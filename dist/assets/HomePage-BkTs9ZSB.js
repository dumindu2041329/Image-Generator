import{u as j,j as e}from"./index-CWCspKH8.js";import{r as u,u as D}from"./vendor-router-B0usbLSA.js";import{u as U}from"./useImageHistory-jzhH1VbF.js";import{u as S,g as E,a as R,b as T}from"./useAuth-DT8mPBJ_.js";import{P as k}from"./ProfileImage-BvTuueZp.js";import{U as I,b as A,c as L,H as B,L as H,X as C,S as $,Z as P,d as M,W as N,e as G,f as _,g as z,h as W,R as y,D as Y,i as K,j as O,k as V,l as Z,m as Q,G as X,n as J}from"./vendor-utils-BzzJCpLm.js";import{r as q,u as ee,S as te,a as se}from"./vendor-clerk-6NQOkdVy.js";import"./vendor-react-CA82q7Og.js";import"./vendor-supabase-l0Uqy5La.js";class ae{static BACKUP_IMAGES={"1:1":["https://picsum.photos/512/512?random=1","https://picsum.photos/512/512?random=2","https://picsum.photos/512/512?random=3","https://picsum.photos/512/512?random=4"],"16:9":["https://picsum.photos/768/432?random=5","https://picsum.photos/768/432?random=6","https://picsum.photos/768/432?random=7","https://picsum.photos/768/432?random=8"],"4:3":["https://picsum.photos/640/480?random=9","https://picsum.photos/640/480?random=10","https://picsum.photos/640/480?random=11","https://picsum.photos/640/480?random=12"]};static getImageDimensions(t="1:1"){switch(t){case"16:9":return{width:1024,height:576};case"4:3":return{width:1024,height:768};case"1:1":default:return{width:1024,height:1024}}}static async generateImage(t){try{const a="https://image.pollinations.ai/prompt";let r=t.prompt;t.style==="vivid"?r+=", hyperrealistic, vibrant colors, dramatic lighting, high contrast, detailed":t.style==="natural"&&(r+=", natural lighting, realistic, soft colors, photographic style");const l=t.aspectRatio||"1:1";l==="16:9"?r+=", wide landscape composition, cinematic framing":l==="4:3"&&(r+=", classic composition, balanced framing");const n=encodeURIComponent(r),o=this.getImageDimensions(l),c=Math.floor(Math.random()*1e6),d=[`${a}/${n}?width=${o.width}&height=${o.height}&seed=${c}&enhance=true&nologo=true`,`${a}/${n}?width=${o.width}&height=${o.height}&seed=${c}`,`${a}/${n}?width=${o.width}&height=${o.height}`,`${a}/${n}`,`${a}/${encodeURIComponent(t.prompt)}?width=${o.width}&height=${o.height}`,`${a}/${encodeURIComponent(t.prompt)}`];let x="",g=null;for(const m of d)try{const h=new AbortController,i=setTimeout(()=>h.abort(),1e4),p=await fetch(m,{signal:h.signal,method:"GET"});if(clearTimeout(i),!p.ok)throw new Error(`Pollinations service returned ${p.status}`);const b=p.headers.get("content-type");if(!b||!b.startsWith("image/"))throw new Error(`Pollinations service returned non-image content: ${b}`);const w=p.headers.get("content-length");if(w&&parseInt(w)===0)throw new Error("Pollinations service returned empty image");x=m;break}catch(h){g=h,console.warn(`URL format failed: ${m}`,h);continue}if(!x)throw g||new Error("All Pollinations URL formats failed");return{id:`pollinations_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:x,prompt:t.prompt,timestamp:new Date,aspectRatio:l}}catch(a){console.warn("Pollinations AI failed, trying alternative service:",a);try{return await this.generateWithAlternativeService(t)}catch(r){return console.warn("Alternative service failed, using demo images:",r),this.generateDemoImage(t)}}}static async generateWithAlternativeService(t){try{const a=this.getImageDimensions(t.aspectRatio),r=`https://picsum.photos/${a.width}/${a.height}?random=${Math.floor(Math.random()*1e3)}`,l=await fetch(r,{method:"HEAD"});if(!l.ok)throw new Error(`Alternative service returned ${l.status}`);return{id:`alternative_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:r,prompt:t.prompt,timestamp:new Date,aspectRatio:t.aspectRatio||"1:1"}}catch(a){throw console.warn("Alternative service failed:",a),new Error("Alternative service failed")}}static async generateDemoImage(t){await new Promise(o=>setTimeout(o,1500+Math.random()*500));const a=t.aspectRatio||"1:1",r=this.BACKUP_IMAGES[a],l=Math.floor(Math.random()*r.length),n=r[l];try{const o=await fetch(n,{method:"HEAD"});if(!o.ok)throw new Error(`Demo image service returned ${o.status}`)}catch(o){console.warn("Demo image failed, using fallback URL:",o);const c=this.getImageDimensions(a),d=`https://picsum.photos/${c.width}/${c.height}?random=${Math.floor(Math.random()*1e3)}`;return{id:`demo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:d,prompt:t.prompt,timestamp:new Date,aspectRatio:a}}return{id:`demo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:n,prompt:t.prompt,timestamp:new Date,aspectRatio:a}}}const re=({onShowAuth:s})=>{const[t,a]=u.useState(!1),{user:r,signOut:l,isConfigured:n}=S(),{showSuccess:o,showError:c}=j(),d=D(),x=async()=>{try{await l(),a(!1),o("Signed Out Successfully","You have been signed out of your account.")}catch{c("Sign Out Failed","An error occurred while signing out. Please try again.")}},g=()=>{d("/my-images"),a(!1)},f=()=>{d("/profile"),a(!1)},m=()=>{r||s()};if(!n)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:s,className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Connect Auth"})]})});if(!r)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:m,className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]})});const h=E(r),i=R(r),p=T(r);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!t),className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-white hover:text-blue-300 transition-all duration-300",children:[e.jsx(k,{imageUrl:p,fullName:h,email:i,size:"sm"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:h||i?.split("@")[0]||"User"}),e.jsx(A,{className:`w-4 h-4 transition-transform duration-200 ${t?"rotate-180":""}`})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-64 glass rounded-xl border border-white/20 z-20",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"px-3 py-3 border-b border-white/10 mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{imageUrl:p,fullName:h,email:i,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:h||"User"}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:i})]})]})}),e.jsxs("button",{onClick:f,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(L,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:g,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(B,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"My Images"})]}),e.jsx("hr",{className:"border-white/10 my-2"}),e.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all duration-200",children:[e.jsx(H,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Sign Out"})]})]})})]})]})};var ie=q();const F={baseTheme:ie.dark,elements:{formButtonPrimary:"bg-blue-600 hover:bg-blue-700 text-white transition-colors",card:"bg-gray-900 border-gray-700 shadow-2xl",headerTitle:"text-white font-bold",headerSubtitle:"text-gray-300",socialButtonsBlockButton:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 transition-colors",socialButtonsBlockButtonText:"text-white",formFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formFieldLabel:"text-gray-300 font-medium",identityPreviewText:"text-gray-300",formFieldHintText:"text-gray-400 text-sm",formFieldErrorText:"text-red-400 text-sm",footerActionText:"text-gray-300",footerActionLink:"text-blue-400 hover:text-blue-300 transition-colors",dividerLine:"bg-gray-600",dividerText:"text-gray-400",formResendCodeLink:"text-blue-400 hover:text-blue-300 transition-colors",otpCodeFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formHeaderTitle:"text-white font-bold",formHeaderSubtitle:"text-gray-300",alertText:"text-gray-300",formFieldSuccessText:"text-green-400 text-sm",formFieldWarningText:"text-yellow-400 text-sm",formFieldInputShowPasswordButton:"text-gray-400 hover:text-gray-300 transition-colors",formFieldInputShowPasswordIcon:"text-gray-400",formFieldInputHidePasswordIcon:"text-gray-400",formFieldInputShowPasswordButtonHover:"text-gray-300",formFieldInputShowPasswordButtonActive:"text-gray-200",formFieldInputShowPasswordButtonFocus:"text-gray-200",formFieldInputShowPasswordButtonDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActive:"text-gray-200",formFieldInputShowPasswordButtonHoverFocus:"text-gray-200",formFieldInputShowPasswordButtonActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActiveFocusDisabled:"text-gray-500"}},ne=({isOpen:s,onClose:t,initialMode:a="signin"})=>{const[r,l]=u.useState(a),{user:n}=ee(),{isConfigured:o}=S(),{showSuccess:c}=j();return u.useEffect(()=>{n&&s&&(c("Welcome!","You have successfully signed in to your account."),t())},[n,s,t,c]),u.useEffect(()=>{s&&l(a)},[s,a]),u.useEffect(()=>{if(!s)return;const d=x=>{const f=x.detail||"";f.includes("sign-up")&&l("signup"),f.includes("sign-in")&&l("signin")};return window.addEventListener("clerk:navigate",d),()=>window.removeEventListener("clerk:navigate",d)},[s]),u.useEffect(()=>{!s&&(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")},[s]),u.useEffect(()=>{if(!s)return;const d=r==="signup"?"/sign-up":"/sign-in";window.location.pathname!==d&&window.history.replaceState(null,"",d)},[s,r]),s?o?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-10 text-gray-400 hover:text-white transition-colors bg-black/20 rounded-full p-2",children:e.jsx(C,{className:"w-5 h-5"})}),r==="signin"?e.jsx(te,{path:"/sign-in",signUpUrl:"/sign-up",afterSignInUrl:"/",redirectUrl:"/",routing:"path",appearance:F}):e.jsx(se,{path:"/sign-up",signInUrl:"/sign-in",afterSignUpUrl:"/",redirectUrl:"/",routing:"path",appearance:F})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(C,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"w-8 h-8 text-yellow-400"})})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"To enable user authentication, please configure your Clerk project and add the publishable key to your environment variables."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})}),e.jsx("button",{onClick:t,className:"bg-gray-700 hover:bg-gray-600 rounded-xl px-6 py-3 text-blue-400 font-medium transition-all duration-300",children:"Close"})]})]})}):null},oe=()=>{const[s,t]=u.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"relative py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-8",children:e.jsx(re,{onShowAuth:()=>t(!0)})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full blur opacity-75 pulse-glow"}),e.jsx("div",{className:"relative glass rounded-full p-3",children:e.jsx($,{className:"w-8 h-8 text-blue-400"})})]})}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:e.jsx("span",{className:"gradient-text",children:"Free AI Image Generator"})}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 mb-6 max-w-2xl mx-auto",children:"Transform your imagination into stunning visuals with completely free AI image generation. No API keys, no limits, no costs - just pure creativity unleashed!"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{children:"Lightning Fast"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Unlimited Free"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{children:"High Quality"})]})]})]})]})}),e.jsx(ne,{isOpen:s,onClose:()=>t(!1)})]})},le=({onGenerate:s,isGenerating:t})=>{const[a,r]=u.useState(""),[l,n]=u.useState("vivid"),[o,c]=u.useState("1:1"),[d,x]=u.useState(!1),g=i=>{i.preventDefault(),a.trim()&&!t&&s(a.trim(),l,o)},f=["A serene mountain landscape at sunset","Cyberpunk city with neon lights","Magical forest with glowing mushrooms","Futuristic spaceship in deep space","Abstract geometric art in vibrant colors","Cozy cottage in a snowy winter scene","Majestic dragon soaring through clouds","Underwater coral reef with tropical fish"],m=[{value:"1:1",label:"Square",ratio:"1:1",description:"Perfect for social media posts",icon:"⬜",dimensions:"1024×1024"},{value:"16:9",label:"Landscape",ratio:"16:9",description:"Great for wallpapers and presentations",icon:"🖥️",dimensions:"1024×576"},{value:"4:3",label:"Classic",ratio:"4:3",description:"Traditional photo format",icon:"📷",dimensions:"1024×768"}],h=[{value:"vivid",label:"Vivid",icon:"✨",description:"Dramatic lighting, vibrant colors, and high detail"},{value:"natural",label:"Natural",icon:"🌿",description:"More natural, realistic images with soft colors"}];return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-12",children:[e.jsx("div",{className:"glass rounded-2xl p-4 mb-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium",children:"100% Free AI Generation"}),e.jsx("p",{className:"text-green-300 text-sm",children:"Powered by Pollinations AI - No API keys required, unlimited usage!"})]})]})}),e.jsx("form",{onSubmit:g,className:"relative",children:e.jsxs("div",{className:"glass rounded-2xl p-1",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(N,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:a,onChange:i=>r(i.target.value),placeholder:"Describe the image you want to generate...",className:"w-full pl-12 pr-4 py-4 bg-transparent text-white placeholder-gray-400 text-lg focus:outline-none",disabled:t})]}),e.jsxs("button",{type:"button",onClick:()=>x(!d),className:`glass-hover rounded-xl p-4 transition-all duration-300 relative ${d?"text-blue-400 bg-blue-500/20 shadow-lg shadow-blue-500/25":"text-gray-400 hover:text-white"}`,title:"Settings",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),d?e.jsx(_,{className:"w-4 h-4"}):e.jsx(A,{className:"w-4 h-4"})]}),d&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full"})]}),e.jsxs("button",{type:"submit",disabled:!a.trim()||t,className:"glass-hover rounded-xl px-6 py-4 flex items-center gap-2 text-white font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center gap-2",children:[t?e.jsx(z,{className:"w-5 h-5 animate-spin"}):e.jsx(W,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:t?"Generating...":"Generate"})]})]})]}),d&&e.jsx("div",{className:"border-t border-white/20 bg-gray-800/30 backdrop-blur-sm",children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Generation Settings"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Customize your AI image generation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base text-white mb-4 font-semibold flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-blue-400"}),"Choose Aspect Ratio"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:m.map(i=>e.jsxs("button",{type:"button",onClick:()=>c(i.value),className:`relative p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${o===i.value?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 ring-2 ring-blue-400":"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:i.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-base",children:i.label}),e.jsx("div",{className:"text-sm opacity-80",children:i.ratio})]})]}),e.jsx("div",{className:"text-xs opacity-75 mb-2",children:i.description}),e.jsxs("div",{className:"text-xs font-mono opacity-60",children:[i.dimensions,"px"]}),o===i.value&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})})]},i.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base text-white mb-4 font-semibold flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-purple-400"}),"Generation Style"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(i=>e.jsxs("button",{type:"button",onClick:()=>n(i.value),className:`p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${l===i.value?"bg-gradient-to-br from-purple-500 to-pink-600 text-white shadow-lg shadow-purple-500/25 ring-2 ring-purple-400":"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-xl",children:i.icon}),e.jsx("div",{className:"font-semibold",children:i.label})]}),e.jsx("div",{className:"text-sm opacity-80",children:i.description})]},i.value))})]}),e.jsxs("div",{className:"glass rounded-xl p-4 bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30",children:[e.jsx("div",{className:"text-sm text-blue-300 mb-2 font-medium",children:"Current Configuration:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{className:"text-gray-300",children:[m.find(i=>i.value===o)?.label," (",o,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-purple-400"}),e.jsxs("span",{className:"text-gray-300",children:[h.find(i=>i.value===l)?.label," Style"]})]})]})]})]})})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-3 text-center",children:"✨ Try these creative prompts:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:f.map((i,p)=>e.jsx("button",{onClick:()=>r(i),disabled:t,className:"glass glass-hover rounded-full px-4 py-2 text-sm text-gray-300 transition-all duration-300 hover:text-white disabled:opacity-50",children:i},p))})]})]})},ce=async s=>{if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(s);return}catch{}const t=document.createElement("textarea");t.value=s,t.style.position="fixed",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t),t.focus(),t.select();try{if(!document.execCommand("copy"))throw new Error("execCommand returned false")}catch{throw new Error("Fallback copy method failed.")}finally{document.body.removeChild(t)}},de=async(s,t,a,r)=>{try{const l=await fetch(s);if(!l.ok)throw new Error(`Failed to fetch image: ${l.status}`);const n=await l.blob(),o=window.URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o),a?.()}catch(l){console.error("Download error:",l);try{const n=document.createElement("a");n.href=s,n.download=t,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n),a?.()}catch(n){console.error("Fallback download error:",n),r?.(l)}}},me=(s="1:1",t,a="jpg")=>{const r=new Date().toISOString().split("T")[0];return`ai-generated-${s}-${t}-${r}.${a}`},he=({image:s})=>{const[t,a]=u.useState("idle"),[r,l]=u.useState(!1),{showSuccess:n,showError:o}=j(),c=async()=>{if(r)return;l(!0);const m=me(s.aspectRatio||"1:1",s.id);await de(s.url,m,()=>{n("Download Started","Your image is being downloaded.")},h=>{o("Download Failed","Could not download the image. Please try again.")}),l(!1)},d=async()=>{try{await ce(s.prompt),a("success"),n("Prompt Copied!","The image prompt has been copied to your clipboard.")}catch{a("error"),o("Copy Failed","Could not copy the prompt to clipboard. Please try copying manually."),alert(`Could not copy automatically. Please copy this prompt manually:

"${s.prompt}"`)}setTimeout(()=>a("idle"),2e3)},x=m=>new Intl.RelativeTimeFormat("en",{numeric:"auto"}).format(Math.ceil((m.getTime()-Date.now())/(1e3*60)),"minute"),g=m=>{switch(m){case"16:9":return"aspect-video";case"4:3":return"aspect-[4/3]";case"1:1":default:return"aspect-square"}},f=m=>{switch(m){case"16:9":return"Landscape";case"4:3":return"Classic";case"1:1":default:return"Square"}};return s.isLoading?e.jsxs("div",{className:"glass rounded-2xl overflow-hidden floating-animation",children:[e.jsxs("div",{className:`bg-gray-800 relative overflow-hidden ${g(s.aspectRatio)}`,children:[e.jsx("div",{className:"absolute inset-0 shimmer"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Creating your image..."}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[f(s.aspectRatio)," format"]})]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded animate-pulse w-2/3"})]})]}):e.jsxs("div",{className:"glass rounded-2xl overflow-hidden group hover:scale-105 transition-all duration-300 floating-animation",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:s.url,alt:s.prompt,className:`w-full object-cover transition-transform duration-300 group-hover:scale-110 ${g(s.aspectRatio)}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"glass rounded-lg px-2 py-1 text-xs text-white border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"w-3 h-3"}),e.jsx("span",{children:s.aspectRatio||"1:1"})]})})}),e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{onClick:c,disabled:r,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${r?"opacity-50 cursor-not-allowed":"hover:text-blue-400"}`,title:r?"Downloading...":"Download image",children:r?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:d,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${t==="success"?"text-green-400":t==="error"?"text-red-400":"hover:text-green-400"}`,title:t==="success"?"Copied!":t==="error"?"Copy failed":"Copy prompt",children:t==="success"?e.jsx(K,{className:"w-4 h-4"}):e.jsx(O,{className:"w-4 h-4"})})]}),t!=="idle"&&e.jsx("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:`glass rounded-lg px-3 py-1 text-sm ${t==="success"?"text-green-400 border-green-500/30":"text-red-400 border-red-500/30"}`,children:t==="success"?"Copied!":"Failed"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-gray-300 text-sm line-clamp-2 mb-3",children:s.prompt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-3 h-3"}),e.jsx("span",{children:x(s.timestamp)})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(y,{className:"w-3 h-3"}),e.jsx("span",{children:f(s.aspectRatio)})]})]})]})]})},ue=({images:s})=>s.length===0?e.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center py-16",children:e.jsxs("div",{className:"glass rounded-2xl p-12",children:[e.jsx(Z,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"No images yet"}),e.jsx("p",{className:"text-gray-500",children:"Generate your first AI image by entering a prompt above!"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Your Generated Images"}),e.jsxs("p",{className:"text-gray-400",children:[s.filter(t=>!t.isLoading).length," image",s.filter(t=>!t.isLoading).length!==1?"s":""," generated"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(t=>e.jsx(he,{image:t},t.id))})]}),xe=()=>e.jsx("footer",{className:"mt-20 py-8 px-4 border-t border-white/10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("span",{className:"text-gray-400",children:"Made with"}),e.jsx(Q,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-gray-400",children:"by Dualite Alpha"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-4",children:[e.jsx("a",{href:"https://github.com/dumindu2041329",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"GitHub",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsx("a",{href:"https://www.linkedin.com/in/dumindu-damsara-0049ab246/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"LinkedIn",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["© ",new Date().getFullYear()," AI Image Generator. All rights reserved."]})]})}),Ie=()=>{const[s,t]=u.useState([]),[a,r]=u.useState(!1),{saveImage:l}=U(),{user:n,isConfigured:o}=S(),{showSuccess:c,showError:d,showWarning:x}=j(),g=u.useRef(n);u.useEffect(()=>{g.current&&!n&&t([]),g.current=n},[n]);const f=async(m,h,i)=>{r(!0);const p={id:`loading_${Date.now()}`,url:"",prompt:m,timestamp:new Date,isLoading:!0,aspectRatio:i||"1:1"};t(b=>[p,...b]);try{const b=await ae.generateImage({prompt:m,style:h,aspectRatio:i});if(t(w=>w.map(v=>v.id===p.id?b:v)),c("Image Generated Successfully!",`Created a ${i||"1:1"} image with ${h||"vivid"} style.`),o&&n)try{await l(m,b.url,i||"1:1",h||"vivid"),c("Image Saved!","Your generated image has been saved to your history.")}catch(w){const v=w instanceof Error?w.message:"Unknown error occurred";v.includes("empty (0 bytes)")?x("Image Generation Issue","The image generation service returned an empty image. This may be a temporary issue. Please try again with a different prompt or try again later."):x("Image Generated but Not Saved",`The image was created successfully but could not be saved to your history. ${v}`)}}catch(b){b instanceof Error?d("Image Generation Failed",b.message):d("Image Generation Failed","An unexpected error occurred. Please try again."),t(w=>w.filter(v=>v.id!==p.id))}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(oe,{}),o&&n&&e.jsx("div",{className:"max-w-4xl mx-auto px-4 mb-6",children:e.jsx("div",{className:"glass rounded-2xl p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"✓"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium",children:"Authentication Active"}),e.jsx("p",{className:"text-green-300 text-sm",children:"Your generated images are automatically saved to your history!"})]})]})})}),e.jsx(le,{onGenerate:f,isGenerating:a}),e.jsx(ue,{images:s}),e.jsx(xe,{})]})]})};export{Ie as default};
