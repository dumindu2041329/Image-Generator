const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MyImagesPage-UxA5TtVv.js","assets/vendor-router-B0usbLSA.js","assets/vendor-react-CA82q7Og.js","assets/vendor-utils-BqsyAqeV.js","assets/vendor-supabase-l0Uqy5La.js","assets/vendor-clerk-TSkbXxwZ.js","assets/ProfilePage-C2mHuUWF.js","assets/AuthConfirmPage-De3UZ7OT.js","assets/ResetPasswordPage-KRzs6eK3.js"])))=>i.map(i=>d[i]);
import{r as ue,a as me}from"./vendor-react-CA82q7Og.js";import{r as u,a as he,R as ge,u as xe,B as pe,b as fe,c as I}from"./vendor-router-B0usbLSA.js";import{c as Y,_ as L}from"./vendor-supabase-l0Uqy5La.js";import{o as we,u as re,a as be,r as ve,S as ye,b as je,C as Ne}from"./vendor-clerk-TSkbXxwZ.js";import{X as H,I as J,T as Se,C as Ie,a as Ce,b as Ee,U as ke,c as F,d as ae,e as _e,H as Pe,L as Ae,S as V,Z as ie,f as Re,W as z,g as $e,h as Te,i as Ue,j as Fe,R as D,D as De,k as Le,l as Be,m as Oe,n as Me,o as ze,G as Ge,p as He}from"./vendor-utils-BqsyAqeV.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function l(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerPolicy&&(n.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?n.credentials="include":c.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(c){if(c.ep)return;c.ep=!0;const n=l(c);fetch(c.href,n)}})();var G={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q;function Ye(){if(q)return k;q=1;var t=ue(),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function o(x,h,b){var w,g={},r=null,d=null;b!==void 0&&(r=""+b),h.key!==void 0&&(r=""+h.key),h.ref!==void 0&&(d=h.ref);for(w in h)i.call(h,w)&&!n.hasOwnProperty(w)&&(g[w]=h[w]);if(x&&x.defaultProps)for(w in h=x.defaultProps,h)g[w]===void 0&&(g[w]=h[w]);return{$$typeof:s,type:x,key:r,ref:d,props:g,_owner:c.current}}return k.Fragment=l,k.jsx=o,k.jsxs=o,k}var K;function We(){return K||(K=1,G.exports=Ye()),G.exports}var e=We(),$={},Z;function Je(){if(Z)return $;Z=1;var t=me();return $.createRoot=t.createRoot,$.hydrateRoot=t.hydrateRoot,$}var Ve=Je();const ne=u.createContext(void 0),qe=({children:t})=>{const[s,l]=u.useState([]),i=u.useCallback(()=>`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,[]),c=u.useCallback(r=>{l(d=>d.filter(a=>a.id!==r))},[]),n=u.useCallback(r=>{const d=i(),a={id:d,duration:5e3,...r};return l(m=>[...m,a]),a.duration&&a.duration>0&&setTimeout(()=>{c(d)},a.duration),d},[i,c]),o=u.useCallback(()=>{l([])},[]),x=u.useCallback((r,d,a)=>n({type:"success",title:r,message:d,...a}),[n]),h=u.useCallback((r,d,a)=>n({type:"error",title:r,message:d,duration:7e3,...a}),[n]),b=u.useCallback((r,d,a)=>n({type:"warning",title:r,message:d,duration:6e3,...a}),[n]),w=u.useCallback((r,d,a)=>n({type:"info",title:r,message:d,...a}),[n]),g={toasts:s,addToast:n,removeToast:c,clearAllToasts:o,showSuccess:x,showError:h,showWarning:b,showInfo:w};return e.jsx(ne.Provider,{value:g,children:t})},R=()=>{const t=u.useContext(ne);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},Ke=({toast:t,onRemove:s})=>{const[l,i]=u.useState(!1),[c,n]=u.useState(!1);u.useEffect(()=>{const r=setTimeout(()=>i(!0),50);return()=>clearTimeout(r)},[]);const o=()=>{n(!0),setTimeout(()=>s(t.id),300)},[x,h]=u.useState(100);u.useEffect(()=>{if(!t.duration||t.duration<=0)return;const r=setInterval(()=>{h(d=>{const a=100/t.duration*100;return Math.max(0,d-a)})},100);return()=>clearInterval(r)},[t.duration]);const b=()=>{const r="relative overflow-hidden glass border-l-4";switch(t.type){case"success":return`${r} border-green-500 bg-green-500/10`;case"error":return`${r} border-red-500 bg-red-500/10`;case"warning":return`${r} border-yellow-500 bg-yellow-500/10`;case"info":return`${r} border-blue-500 bg-blue-500/10`;default:return`${r} border-gray-500 bg-gray-500/10`}},w=()=>{const r="w-5 h-5";switch(t.type){case"success":return e.jsx(Ce,{className:`${r} text-green-400`});case"error":return e.jsx(Ie,{className:`${r} text-red-400`});case"warning":return e.jsx(Se,{className:`${r} text-yellow-400`});case"info":return e.jsx(J,{className:`${r} text-blue-400`});default:return e.jsx(J,{className:`${r} text-gray-400`})}},g=()=>{switch(t.type){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":return"bg-blue-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:`
        rounded-xl p-4 max-w-sm w-full transition-all duration-300 transform
        ${b()}
        ${l&&!c?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}
      `,role:"alert","aria-live":"polite",children:[t.duration&&t.duration>0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/10",children:e.jsx("div",{className:`h-full transition-all duration-100 linear ${g()}`,style:{width:`${x}%`}})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:w()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-medium text-sm leading-5",children:t.title}),t.message&&e.jsx("p",{className:"text-gray-300 text-sm mt-1 leading-5",children:t.message}),t.action&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:t.action.onClick,className:"text-sm font-medium text-blue-400 hover:text-blue-300 transition-colors duration-200",children:t.action.label})})]}),e.jsx("button",{onClick:o,className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-lg hover:bg-white/10","aria-label":"Close notification",children:e.jsx(H,{className:"w-4 h-4"})})]})]})},Ze=()=>{const{toasts:t,removeToast:s}=R(),l=e.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-3 pointer-events-none",children:t.map(i=>e.jsx("div",{className:"pointer-events-auto",children:e.jsx(Ke,{toast:i,onRemove:s})},i.id))});return t.length===0||typeof document>"u"?null:he.createPortal(l,document.body)},_="pk_test_YWJsZS1saW9uLTI5LmNsZXJrLmFjY291bnRzLmRldiQ",oe=()=>!_.includes("YOUR_CLERK_PUBLISHABLE_KEY")&&_.startsWith("pk_"),X=oe()?new we(_):null,le=async()=>{try{const t=window?.Clerk;if(t?.session){const s=await t.session.getToken({template:"supabase"});if(s)return s}if(X?.session){const s=await X.session.getToken({template:"supabase"});if(s)return s}return null}catch{return null}};class Xe{static BACKUP_IMAGES={"1:1":["https://picsum.photos/512/512?random=1","https://picsum.photos/512/512?random=2","https://picsum.photos/512/512?random=3","https://picsum.photos/512/512?random=4"],"16:9":["https://picsum.photos/768/432?random=5","https://picsum.photos/768/432?random=6","https://picsum.photos/768/432?random=7","https://picsum.photos/768/432?random=8"],"4:3":["https://picsum.photos/640/480?random=9","https://picsum.photos/640/480?random=10","https://picsum.photos/640/480?random=11","https://picsum.photos/640/480?random=12"]};static getImageDimensions(s="1:1"){switch(s){case"16:9":return{width:1024,height:576};case"4:3":return{width:1024,height:768};case"1:1":default:return{width:1024,height:1024}}}static async generateImage(s){try{const l="https://image.pollinations.ai/prompt";let i=s.prompt;s.style==="vivid"?i+=", hyperrealistic, vibrant colors, dramatic lighting, high contrast, detailed":s.style==="natural"&&(i+=", natural lighting, realistic, soft colors, photographic style");const c=s.aspectRatio||"1:1";c==="16:9"?i+=", wide landscape composition, cinematic framing":c==="4:3"&&(i+=", classic composition, balanced framing");const n=encodeURIComponent(i),o=this.getImageDimensions(c),x=Math.floor(Math.random()*1e6),h=[`${l}/${n}?width=${o.width}&height=${o.height}&seed=${x}&enhance=true&nologo=true`,`${l}/${n}?width=${o.width}&height=${o.height}&seed=${x}`,`${l}/${n}?width=${o.width}&height=${o.height}`,`${l}/${n}`,`${l}/${encodeURIComponent(s.prompt)}?width=${o.width}&height=${o.height}`,`${l}/${encodeURIComponent(s.prompt)}`];let b="",w=null;for(const r of h)try{const d=new AbortController,a=setTimeout(()=>d.abort(),1e4),m=await fetch(r,{signal:d.signal,method:"GET"});if(clearTimeout(a),!m.ok)throw new Error(`Pollinations service returned ${m.status}`);const p=m.headers.get("content-type");if(!p||!p.startsWith("image/"))throw new Error(`Pollinations service returned non-image content: ${p}`);const j=m.headers.get("content-length");if(j&&parseInt(j)===0)throw new Error("Pollinations service returned empty image");b=r;break}catch(d){w=d,console.warn(`URL format failed: ${r}`,d);continue}if(!b)throw w||new Error("All Pollinations URL formats failed");return{id:`pollinations_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:b,prompt:s.prompt,timestamp:new Date,aspectRatio:c}}catch(l){console.warn("Pollinations AI failed, trying alternative service:",l);try{return await this.generateWithAlternativeService(s)}catch(i){return console.warn("Alternative service failed, using demo images:",i),this.generateDemoImage(s)}}}static async generateWithAlternativeService(s){try{const l=this.getImageDimensions(s.aspectRatio),i=`https://picsum.photos/${l.width}/${l.height}?random=${Math.floor(Math.random()*1e3)}`,c=await fetch(i,{method:"HEAD"});if(!c.ok)throw new Error(`Alternative service returned ${c.status}`);return{id:`alternative_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:i,prompt:s.prompt,timestamp:new Date,aspectRatio:s.aspectRatio||"1:1"}}catch(l){throw console.warn("Alternative service failed:",l),new Error("Alternative service failed")}}static async generateDemoImage(s){await new Promise(o=>setTimeout(o,1500+Math.random()*500));const l=s.aspectRatio||"1:1",i=this.BACKUP_IMAGES[l],c=Math.floor(Math.random()*i.length),n=i[c];try{const o=await fetch(n,{method:"HEAD"});if(!o.ok)throw new Error(`Demo image service returned ${o.status}`)}catch(o){console.warn("Demo image failed, using fallback URL:",o);const x=this.getImageDimensions(l),h=`https://picsum.photos/${x.width}/${x.height}?random=${Math.floor(Math.random()*1e3)}`;return{id:`demo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:h,prompt:s.prompt,timestamp:new Date,aspectRatio:l}}return{id:`demo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:n,prompt:s.prompt,timestamp:new Date,aspectRatio:l}}}const P="https://dxljyzvwolnbdreewbvs.supabase.co",A="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR4bGp5enZ3b2xuYmRyZWV3YnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyNTY0OTksImV4cCI6MjA3MjgzMjQ5OX0.hzNFBkxNMS6BwToieigRze1GEq_OSpzrXJpH92o0ouU",W=()=>!P.includes("YOUR_SUPABASE_URL")&&!A.includes("YOUR_SUPABASE_ANON_KEY")&&!P.includes("API_KEY_ADDED"),Qe=()=>W()?Y(P,A,{global:{fetch:async(t,s={})=>{const l=await le();s.headers={apikey:A,...s.headers};const i=t.toString();if(i.includes("/rest/v1/"))(s.headers||{})["Content-Type"]||(s.headers={...s.headers,"Content-Type":"application/json"});else if(i.includes("/storage/v1/object/")){const c=s.headers||{};s.body&&!c["Content-Type"]&&(s.headers={...s.headers,"Content-Type":"application/json"})}if(l?(s.headers={...s.headers,Authorization:`Bearer ${l}`},console.log("Supabase request with token:",l.substring(0,50)+"...")):console.warn("No Clerk token available for Supabase request"),i.includes("/storage/v1/object/")&&console.log("Storage API request:",{url:i,method:s.method,headers:s.headers,body:s.body}),i.includes("/storage/v1/object/")&&s.body)try{if(typeof s.body=="string"){const c=JSON.parse(s.body);s.body=JSON.stringify(c)}}catch(c){console.warn("Failed to parse storage request body:",c)}return fetch(t,s)}}}):null,C=Qe(),et=()=>W()?Y(P,A):null,Q=et(),ee=async()=>{if(!Q)return null;const t=await le();return console.log("Getting authenticated storage client, token available:",!!t),t?Y(P,A,{global:{headers:{Authorization:`Bearer ${t}`}}}):Q},tt=t=>t?.id||null,st=t=>t?.emailAddresses?.[0]?.emailAddress||void 0,rt=t=>t?.fullName||void 0,at=t=>t?.imageUrl||void 0,B=()=>{const{user:t,isLoaded:s,isSignedIn:l}=re(),i=be(),[c,n]=u.useState(!0),[o,x]=u.useState(!1),h=t?{id:t.id,emailAddresses:t.emailAddresses.map(f=>({emailAddress:f.emailAddress})),firstName:t.firstName,lastName:t.lastName,imageUrl:t.imageUrl,fullName:t.fullName}:null;return u.useEffect(()=>{const f=oe()&&W();x(f),s&&n(!1)},[s]),{user:h,loading:c||!s,isConfigured:o,isSignedIn:!!l,signIn:async(f,v)=>{if(!o)throw new Error("Authentication not configured");try{const y=await i.client.signIn.create({identifier:f,password:v});if(y.status==="complete")return await i.setActive({session:y.createdSessionId}),{user:y};throw new Error("Sign in incomplete")}catch(y){throw new Error(y.message||"Sign in failed")}},signUp:async(f,v,y)=>{if(!o)throw new Error("Authentication not configured");try{const[N,...E]=(y||"").split(" "),O=E.join(" "),S=await i.client.signUp.create({emailAddress:f,password:v,firstName:N||void 0,lastName:O||void 0});return await S.prepareEmailAddressVerification({strategy:"email_code"}),{user:S,needsVerification:!0}}catch(N){throw new Error(N.message||"Sign up failed")}},signOut:async()=>{if(o)try{await i.signOut(),(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")}catch(f){throw new Error(f.message||"Sign out failed")}},resetPassword:async f=>{if(!o)throw new Error("Authentication not configured");try{await i.client.signIn.create({identifier:f,strategy:"reset_password_email_code"})}catch(v){throw new Error(v.message||"Password reset failed")}},updateProfile:async f=>{if(!o)throw new Error("Authentication not configured");if(!h)throw new Error("No user logged in");try{const v={};if(f.full_name){const[y,...N]=f.full_name.split(" ");v.firstName=y,v.lastName=N.join(" ")}return await t?.update(v),{user:t}}catch(v){throw new Error(v.message||"Profile update failed")}},updateProfileImage:async f=>{if(!o)throw new Error("Authentication not configured");if(!i.user)throw new Error("No user logged in");try{return await i.user.setProfileImage({file:f}),{user:i.user}}catch(v){throw new Error(v.message||"Profile image update failed")}},updateEmail:async(f,v)=>{if(!o)throw new Error("Authentication not configured");if(!h)throw new Error("No user logged in");try{if(v){const N=t?.emailAddresses?.[0]?.emailAddress;if(!N)throw new Error("Current email not found");const E=await i.client.signIn.create({identifier:N,password:v});if(E.status==="complete")await i.setActive({session:E.createdSessionId});else throw new Error("Re-authentication failed")}const y=await t?.createEmailAddress({email:f});if(!y)throw new Error("Failed to create new email address");return await y.prepareVerification({strategy:"email_code"}),{user:t}}catch(y){throw new Error(y.message||"Email update failed")}},verifyEmailUpdate:async(f,v)=>{if(!o)throw new Error("Authentication not configured");if(!t)throw new Error("No user logged in");try{const y=t.emailAddresses.find(N=>N.emailAddress===f);if(!y)throw new Error("New email not found on account");return await y.attemptVerification({code:v}),await t.update({primaryEmailAddressId:y.id}),{user:t}}catch(y){throw new Error(y.message||"Email verification failed")}},updatePassword:async f=>{if(!o)throw new Error("Authentication not configured");if(!h)throw new Error("No user logged in");try{return await t?.updatePassword({newPassword:f}),{user:t}}catch(v){throw new Error(v.message||"Password update failed")}}}},it=()=>{const[t,s]=u.useState([]),[l,i]=u.useState(!1),{user:c,isConfigured:n}=B(),o=tt(c),x=u.useCallback(async()=>{if(!(!n||!o||!C)){i(!0);try{const{data:g,error:r}=await C.from("saved_images").select("*").eq("user_id",o).order("created_at",{ascending:!1});if(r)throw console.error("Fetch saved images error:",r),r;const d=(g||[]).filter(a=>!a||typeof a!="object"||!a.id?(console.warn("Invalid image data found:",a),!1):!0);console.log("Valid images loaded:",d.length,"out of",(g||[]).length),s(d)}catch(g){console.error("Fetch saved images error:",g)}finally{i(!1)}}},[n,o]);return u.useEffect(()=>{o&&n?x():s([])},[o,n,x]),{savedImages:t,loading:l,saveImage:async(g,r,d,a)=>{if(!n||!o||!C)return null;try{const m=await fetch(r);if(!m.ok)throw console.error(`Failed to fetch generated image for saving. Status: ${m.status}, URL: ${r}`),new Error(`Failed to fetch generated image for saving. Status: ${m.status}`);const p=await m.blob();if(!p.type.startsWith("image/"))throw console.error(`Generated image is not a valid image type: ${p.type}, URL: ${r}`),new Error(`Generated image is not a valid image type: ${p.type}`);if(p.size===0)throw console.error(`Generated image is empty (0 bytes), URL: ${r}`),new Error("Generated image is empty (0 bytes). The image generation service may be experiencing issues. Please try again.");const j=p.type.split("/")[1]||"jpg",f=`${Date.now()}.${j}`,v=`${o}/${f}`,y=await ee(),{error:N}=await y?.storage.from("generated_images").upload(v,p,{cacheControl:"3600",upsert:!1,contentType:p.type||"image/jpeg"})||{error:new Error("Storage client not available")};if(N)throw N;const{data:{publicUrl:E}}=y?.storage.from("generated_images").getPublicUrl(v)||{data:{publicUrl:""}};if(!E)throw new Error("Failed to get public URL for the uploaded image.");const O={user_id:o,prompt:g,image_url:E,aspect_ratio:d,style:a,is_favorite:!1,storage_file_path:v},{data:S,error:M}=await C.from("saved_images").insert([O]).select().single();if(M)throw console.error("Database insert error:",M),M;return S&&typeof S=="object"&&S.id&&s(de=>[S,...de]),S}catch(m){return console.error("Save image error:",m),null}},deleteImage:async g=>{if(!(!n||!o||!C))try{const r=t.find(m=>m.id===g);if(!r)return;let d=r.storage_file_path;if(!d){const m=r.image_url.split("/"),p=m.indexOf("generated_images");p!==-1&&(d=m.slice(p+1).join("/"))}if(d&&d.includes("undefined")&&(console.warn("Invalid file path detected, skipping storage deletion:",d),d=null),d)try{const m=d.startsWith("/")?d.slice(1):d;console.log("Attempting to delete file from storage:",m),console.log("File path details:",{original:d,cleaned:m,userId:o});const p=await ee(),{data:j,error:f}=await p?.storage.from("generated_images").remove([m])||{data:null,error:new Error("Storage client not available")};console.log("Storage deletion response:",{removeData:j,storageError:f}),f?console.warn("Storage deletion failed:",f):console.log("Successfully deleted file from storage:",m)}catch(m){console.warn("Storage deletion error:",m)}else console.warn("No file path available for storage deletion");const{error:a}=await C.from("saved_images").delete().eq("id",g).eq("user_id",o);if(a)throw a;s(m=>m.filter(p=>p.id!==g))}catch(r){throw r}},toggleFavorite:async g=>{if(!(!n||!o||!C))try{const r=t.find(p=>p.id===g);if(!r){console.warn("Image not found for favorite toggle:",g);return}const d=!r.is_favorite;console.log("Toggling favorite for image:",g,"from",r.is_favorite,"to",d);const{data:a,error:m}=await C.from("saved_images").update({is_favorite:d}).eq("id",g).eq("user_id",o).select().single();if(m)throw console.error("Error updating favorite status:",m),m;console.log("Database update successful, received data:",a),s(p=>p.map(j=>j.id===g?a&&typeof a=="object"&&a.id?(console.log("Updating image with database data:",a),a):(console.log("Updating image locally with new favorite status"),{...j,is_favorite:d}):j))}catch(r){throw console.error("Toggle favorite error:",r),r}},refreshImages:x}},te=({imageUrl:t,fullName:s,email:l,size:i="md",editable:c=!1,onImageChange:n,loading:o=!1})=>{const[x,h]=u.useState(!1),w={sm:{container:"w-8 h-8",icon:"w-3 h-3",text:"text-xs"},md:{container:"w-12 h-12",icon:"w-5 h-5",text:"text-sm"},lg:{container:"w-20 h-20",icon:"w-8 h-8",text:"text-lg"},xl:{container:"w-32 h-32",icon:"w-12 h-12",text:"text-2xl"}}[i],g=()=>s?s.split(" ").map(m=>m.charAt(0).toUpperCase()).slice(0,2).join(""):l?l.charAt(0).toUpperCase():"U",r=m=>{const p=m.target.files?.[0];if(p&&n){if(!p.type.startsWith("image/")||p.size>5*1024*1024)return;n(p)}},d=()=>{h(!0)};ge.useEffect(()=>{h(!1)},[t]);const a=()=>{if(o)return e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("div",{className:"animate-spin rounded-full border-2 border-white/30 border-t-white w-1/2 h-1/2"})});if(t&&!x)return e.jsx("img",{src:t,alt:s||"Profile",onError:d,className:"w-full h-full object-cover"});const m=g();return m&&m!=="U"?e.jsx("span",{className:`font-semibold text-white ${w.text}`,children:m}):e.jsx(F,{className:`text-white ${w.icon}`})};return c?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`
          ${w.container} 
          rounded-full 
          bg-gradient-to-r from-blue-500 to-purple-600 
          flex items-center justify-center 
          overflow-hidden 
          border-2 border-white/20
          cursor-pointer
          group
          hover:scale-105
          transition-all duration-200
        `,children:[a(),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:e.jsx(Ee,{className:"w-1/3 h-1/3 text-white"})})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:r,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:o}),c&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(ke,{className:"w-3 h-3 text-white"})})]}):e.jsx("div",{className:`
      ${w.container} 
      rounded-full 
      bg-gradient-to-r from-blue-500 to-purple-600 
      flex items-center justify-center 
      overflow-hidden 
      border-2 border-white/20
    `,children:a()})},nt=({onShowAuth:t})=>{const[s,l]=u.useState(!1),{user:i,signOut:c,isConfigured:n}=B(),{showSuccess:o,showError:x}=R(),h=xe(),b=async()=>{try{await c(),l(!1),o("Signed Out Successfully","You have been signed out of your account.")}catch{x("Sign Out Failed","An error occurred while signing out. Please try again.")}},w=()=>{h("/my-images"),l(!1)},g=()=>{h("/profile"),l(!1)},r=()=>{i||t()};if(!n)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:t,className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Connect Auth"})]})});if(!i)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:r,className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]})});const d=rt(i),a=st(i),m=at(i);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!s),className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-white hover:text-blue-300 transition-all duration-300",children:[e.jsx(te,{imageUrl:m,fullName:d,email:a,size:"sm"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:d||a?.split("@")[0]||"User"}),e.jsx(ae,{className:`w-4 h-4 transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-64 glass rounded-xl border border-white/20 z-20",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"px-3 py-3 border-b border-white/10 mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{imageUrl:m,fullName:d,email:a,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:d||"User"}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:a})]})]})}),e.jsxs("button",{onClick:g,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(_e,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:w,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(Pe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"My Images"})]}),e.jsx("hr",{className:"border-white/10 my-2"}),e.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all duration-200",children:[e.jsx(Ae,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Sign Out"})]})]})})]})]})};var ot=ve();const se={baseTheme:ot.dark,elements:{formButtonPrimary:"bg-blue-600 hover:bg-blue-700 text-white transition-colors",card:"bg-gray-900 border-gray-700 shadow-2xl",headerTitle:"text-white font-bold",headerSubtitle:"text-gray-300",socialButtonsBlockButton:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 transition-colors",socialButtonsBlockButtonText:"text-white",formFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formFieldLabel:"text-gray-300 font-medium",identityPreviewText:"text-gray-300",formFieldHintText:"text-gray-400 text-sm",formFieldErrorText:"text-red-400 text-sm",footerActionText:"text-gray-300",footerActionLink:"text-blue-400 hover:text-blue-300 transition-colors",dividerLine:"bg-gray-600",dividerText:"text-gray-400",formResendCodeLink:"text-blue-400 hover:text-blue-300 transition-colors",otpCodeFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formHeaderTitle:"text-white font-bold",formHeaderSubtitle:"text-gray-300",alertText:"text-gray-300",formFieldSuccessText:"text-green-400 text-sm",formFieldWarningText:"text-yellow-400 text-sm",formFieldInputShowPasswordButton:"text-gray-400 hover:text-gray-300 transition-colors",formFieldInputShowPasswordIcon:"text-gray-400",formFieldInputHidePasswordIcon:"text-gray-400",formFieldInputShowPasswordButtonHover:"text-gray-300",formFieldInputShowPasswordButtonActive:"text-gray-200",formFieldInputShowPasswordButtonFocus:"text-gray-200",formFieldInputShowPasswordButtonDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActive:"text-gray-200",formFieldInputShowPasswordButtonHoverFocus:"text-gray-200",formFieldInputShowPasswordButtonActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActiveFocusDisabled:"text-gray-500"}},lt=({isOpen:t,onClose:s,initialMode:l="signin"})=>{const[i,c]=u.useState(l),{user:n}=re(),{isConfigured:o}=B(),{showSuccess:x}=R();return u.useEffect(()=>{n&&t&&(x("Welcome!","You have successfully signed in to your account."),s())},[n,t,s,x]),u.useEffect(()=>{t&&c(l)},[t,l]),u.useEffect(()=>{if(!t)return;const h=b=>{const g=b.detail||"";g.includes("sign-up")&&c("signup"),g.includes("sign-in")&&c("signin")};return window.addEventListener("clerk:navigate",h),()=>window.removeEventListener("clerk:navigate",h)},[t]),u.useEffect(()=>{!t&&(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")},[t]),u.useEffect(()=>{if(!t)return;const h=i==="signup"?"/sign-up":"/sign-in";window.location.pathname!==h&&window.history.replaceState(null,"",h)},[t,i]),t?o?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 z-10 text-gray-400 hover:text-white transition-colors bg-black/20 rounded-full p-2",children:e.jsx(H,{className:"w-5 h-5"})}),i==="signin"?e.jsx(ye,{path:"/sign-in",signUpUrl:"/sign-up",afterSignInUrl:"/",redirectUrl:"/",routing:"path",appearance:se}):e.jsx(je,{path:"/sign-up",signInUrl:"/sign-in",afterSignUpUrl:"/",redirectUrl:"/",routing:"path",appearance:se})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(H,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(F,{className:"w-8 h-8 text-yellow-400"})})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"To enable user authentication, please configure your Clerk project and add the publishable key to your environment variables."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})}),e.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-600 rounded-xl px-6 py-3 text-blue-400 font-medium transition-all duration-300",children:"Close"})]})]})}):null},ct=()=>{const[t,s]=u.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"relative py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-8",children:e.jsx(nt,{onShowAuth:()=>s(!0)})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full blur opacity-75 pulse-glow"}),e.jsx("div",{className:"relative glass rounded-full p-3",children:e.jsx(V,{className:"w-8 h-8 text-blue-400"})})]})}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:e.jsx("span",{className:"gradient-text",children:"Free AI Image Generator"})}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 mb-6 max-w-2xl mx-auto",children:"Transform your imagination into stunning visuals with completely free AI image generation. No API keys, no limits, no costs - just pure creativity unleashed!"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{children:"Lightning Fast"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Unlimited Free"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{children:"High Quality"})]})]})]})]})}),e.jsx(lt,{isOpen:t,onClose:()=>s(!1)})]})},dt=({onGenerate:t,isGenerating:s})=>{const[l,i]=u.useState(""),[c,n]=u.useState("vivid"),[o,x]=u.useState("1:1"),[h,b]=u.useState(!1),w=a=>{a.preventDefault(),l.trim()&&!s&&t(l.trim(),c,o)},g=["A serene mountain landscape at sunset","Cyberpunk city with neon lights","Magical forest with glowing mushrooms","Futuristic spaceship in deep space","Abstract geometric art in vibrant colors","Cozy cottage in a snowy winter scene","Majestic dragon soaring through clouds","Underwater coral reef with tropical fish"],r=[{value:"1:1",label:"Square",ratio:"1:1",description:"Perfect for social media posts",icon:"⬜",dimensions:"1024×1024"},{value:"16:9",label:"Landscape",ratio:"16:9",description:"Great for wallpapers and presentations",icon:"🖥️",dimensions:"1024×576"},{value:"4:3",label:"Classic",ratio:"4:3",description:"Traditional photo format",icon:"📷",dimensions:"1024×768"}],d=[{value:"vivid",label:"Vivid",icon:"✨",description:"Dramatic lighting, vibrant colors, and high detail"},{value:"natural",label:"Natural",icon:"🌿",description:"More natural, realistic images with soft colors"}];return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-12",children:[e.jsx("div",{className:"glass rounded-2xl p-4 mb-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium",children:"100% Free AI Generation"}),e.jsx("p",{className:"text-green-300 text-sm",children:"Powered by Pollinations AI - No API keys required, unlimited usage!"})]})]})}),e.jsx("form",{onSubmit:w,className:"relative",children:e.jsxs("div",{className:"glass rounded-2xl p-1",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:l,onChange:a=>i(a.target.value),placeholder:"Describe the image you want to generate...",className:"w-full pl-12 pr-4 py-4 bg-transparent text-white placeholder-gray-400 text-lg focus:outline-none",disabled:s})]}),e.jsxs("button",{type:"button",onClick:()=>b(!h),className:`glass-hover rounded-xl p-4 transition-all duration-300 relative ${h?"text-blue-400 bg-blue-500/20 shadow-lg shadow-blue-500/25":"text-gray-400 hover:text-white"}`,title:"Settings",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),h?e.jsx(Te,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})]}),h&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full"})]}),e.jsxs("button",{type:"submit",disabled:!l.trim()||s,className:"glass-hover rounded-xl px-6 py-4 flex items-center gap-2 text-white font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center gap-2",children:[s?e.jsx(Ue,{className:"w-5 h-5 animate-spin"}):e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:s?"Generating...":"Generate"})]})]})]}),h&&e.jsx("div",{className:"border-t border-white/20 bg-gray-800/30 backdrop-blur-sm",children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Generation Settings"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Customize your AI image generation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base text-white mb-4 font-semibold flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-blue-400"}),"Choose Aspect Ratio"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(a=>e.jsxs("button",{type:"button",onClick:()=>x(a.value),className:`relative p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${o===a.value?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 ring-2 ring-blue-400":"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:a.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-base",children:a.label}),e.jsx("div",{className:"text-sm opacity-80",children:a.ratio})]})]}),e.jsx("div",{className:"text-xs opacity-75 mb-2",children:a.description}),e.jsxs("div",{className:"text-xs font-mono opacity-60",children:[a.dimensions,"px"]}),o===a.value&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})})]},a.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base text-white mb-4 font-semibold flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-purple-400"}),"Generation Style"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(a=>e.jsxs("button",{type:"button",onClick:()=>n(a.value),className:`p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${c===a.value?"bg-gradient-to-br from-purple-500 to-pink-600 text-white shadow-lg shadow-purple-500/25 ring-2 ring-purple-400":"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-xl",children:a.icon}),e.jsx("div",{className:"font-semibold",children:a.label})]}),e.jsx("div",{className:"text-sm opacity-80",children:a.description})]},a.value))})]}),e.jsxs("div",{className:"glass rounded-xl p-4 bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30",children:[e.jsx("div",{className:"text-sm text-blue-300 mb-2 font-medium",children:"Current Configuration:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{className:"text-gray-300",children:[r.find(a=>a.value===o)?.label," (",o,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-purple-400"}),e.jsxs("span",{className:"text-gray-300",children:[d.find(a=>a.value===c)?.label," Style"]})]})]})]})]})})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-3 text-center",children:"✨ Try these creative prompts:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:g.map((a,m)=>e.jsx("button",{onClick:()=>i(a),disabled:s,className:"glass glass-hover rounded-full px-4 py-2 text-sm text-gray-300 transition-all duration-300 hover:text-white disabled:opacity-50",children:a},m))})]})]})},ut=async t=>{if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(t);return}catch{}const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.top="-9999px",s.style.left="-9999px",document.body.appendChild(s),s.focus(),s.select();try{if(!document.execCommand("copy"))throw new Error("execCommand returned false")}catch{throw new Error("Fallback copy method failed.")}finally{document.body.removeChild(s)}},mt=async(t,s,l,i)=>{try{const c=await fetch(t);if(!c.ok)throw new Error(`Failed to fetch image: ${c.status}`);const n=await c.blob(),o=window.URL.createObjectURL(n),x=document.createElement("a");x.href=o,x.download=s,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(o),l?.()}catch(c){console.error("Download error:",c);try{const n=document.createElement("a");n.href=t,n.download=s,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n),l?.()}catch(n){console.error("Fallback download error:",n),i?.(c)}}},ht=(t="1:1",s,l="jpg")=>{const i=new Date().toISOString().split("T")[0];return`ai-generated-${t}-${s}-${i}.${l}`},gt=({image:t})=>{const[s,l]=u.useState("idle"),[i,c]=u.useState(!1),{showSuccess:n,showError:o}=R(),x=async()=>{if(i)return;c(!0);const r=ht(t.aspectRatio||"1:1",t.id);await mt(t.url,r,()=>{n("Download Started","Your image is being downloaded.")},d=>{o("Download Failed","Could not download the image. Please try again.")}),c(!1)},h=async()=>{try{await ut(t.prompt),l("success"),n("Prompt Copied!","The image prompt has been copied to your clipboard.")}catch{l("error"),o("Copy Failed","Could not copy the prompt to clipboard. Please try copying manually."),alert(`Could not copy automatically. Please copy this prompt manually:

"${t.prompt}"`)}setTimeout(()=>l("idle"),2e3)},b=r=>new Intl.RelativeTimeFormat("en",{numeric:"auto"}).format(Math.ceil((r.getTime()-Date.now())/(1e3*60)),"minute"),w=r=>{switch(r){case"16:9":return"aspect-video";case"4:3":return"aspect-[4/3]";case"1:1":default:return"aspect-square"}},g=r=>{switch(r){case"16:9":return"Landscape";case"4:3":return"Classic";case"1:1":default:return"Square"}};return t.isLoading?e.jsxs("div",{className:"glass rounded-2xl overflow-hidden floating-animation",children:[e.jsxs("div",{className:`bg-gray-800 relative overflow-hidden ${w(t.aspectRatio)}`,children:[e.jsx("div",{className:"absolute inset-0 shimmer"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Creating your image..."}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[g(t.aspectRatio)," format"]})]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded animate-pulse w-2/3"})]})]}):e.jsxs("div",{className:"glass rounded-2xl overflow-hidden group hover:scale-105 transition-all duration-300 floating-animation",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:t.url,alt:t.prompt,className:`w-full object-cover transition-transform duration-300 group-hover:scale-110 ${w(t.aspectRatio)}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"glass rounded-lg px-2 py-1 text-xs text-white border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),e.jsx("span",{children:t.aspectRatio||"1:1"})]})})}),e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{onClick:x,disabled:i,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${i?"opacity-50 cursor-not-allowed":"hover:text-blue-400"}`,title:i?"Downloading...":"Download image",children:i?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(De,{className:"w-4 h-4"})}),e.jsx("button",{onClick:h,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${s==="success"?"text-green-400":s==="error"?"text-red-400":"hover:text-green-400"}`,title:s==="success"?"Copied!":s==="error"?"Copy failed":"Copy prompt",children:s==="success"?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Be,{className:"w-4 h-4"})})]}),s!=="idle"&&e.jsx("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:`glass rounded-lg px-3 py-1 text-sm ${s==="success"?"text-green-400 border-green-500/30":"text-red-400 border-red-500/30"}`,children:s==="success"?"Copied!":"Failed"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-gray-300 text-sm line-clamp-2 mb-3",children:t.prompt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-3 h-3"}),e.jsx("span",{children:b(t.timestamp)})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(D,{className:"w-3 h-3"}),e.jsx("span",{children:g(t.aspectRatio)})]})]})]})]})},xt=({images:t})=>t.length===0?e.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center py-16",children:e.jsxs("div",{className:"glass rounded-2xl p-12",children:[e.jsx(Me,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"No images yet"}),e.jsx("p",{className:"text-gray-500",children:"Generate your first AI image by entering a prompt above!"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Your Generated Images"}),e.jsxs("p",{className:"text-gray-400",children:[t.filter(s=>!s.isLoading).length," image",t.filter(s=>!s.isLoading).length!==1?"s":""," generated"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(s=>e.jsx(gt,{image:s},s.id))})]}),pt=()=>e.jsx("footer",{className:"mt-20 py-8 px-4 border-t border-white/10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("span",{className:"text-gray-400",children:"Made with"}),e.jsx(ze,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-gray-400",children:"by Dualite Alpha"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-4",children:[e.jsx("a",{href:"https://github.com/dumindu2041329",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"GitHub",children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsx("a",{href:"https://www.linkedin.com/in/dumindu-damsara-0049ab246/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"LinkedIn",children:e.jsx(He,{className:"w-5 h-5"})})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["© ",new Date().getFullYear()," AI Image Generator. All rights reserved."]})]})}),T=()=>{const[t,s]=u.useState([]),[l,i]=u.useState(!1),{saveImage:c}=it(),{user:n,isConfigured:o}=B(),{showSuccess:x,showError:h,showWarning:b}=R(),w=u.useRef(n);u.useEffect(()=>{w.current&&!n&&s([]),w.current=n},[n]);const g=async(r,d,a)=>{i(!0);const m={id:`loading_${Date.now()}`,url:"",prompt:r,timestamp:new Date,isLoading:!0,aspectRatio:a||"1:1"};s(p=>[m,...p]);try{const p=await Xe.generateImage({prompt:r,style:d,aspectRatio:a});if(s(j=>j.map(f=>f.id===m.id?p:f)),x("Image Generated Successfully!",`Created a ${a||"1:1"} image with ${d||"vivid"} style.`),o&&n)try{await c(r,p.url,a||"1:1",d||"vivid"),x("Image Saved!","Your generated image has been saved to your history.")}catch(j){const f=j instanceof Error?j.message:"Unknown error occurred";f.includes("empty (0 bytes)")?b("Image Generation Issue","The image generation service returned an empty image. This may be a temporary issue. Please try again with a different prompt or try again later."):b("Image Generated but Not Saved",`The image was created successfully but could not be saved to your history. ${f}`)}}catch(p){p instanceof Error?h("Image Generation Failed",p.message):h("Image Generation Failed","An unexpected error occurred. Please try again."),s(j=>j.filter(f=>f.id!==m.id))}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(ct,{}),o&&n&&e.jsx("div",{className:"max-w-4xl mx-auto px-4 mb-6",children:e.jsx("div",{className:"glass rounded-2xl p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"✓"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium",children:"Authentication Active"}),e.jsx("p",{className:"text-green-300 text-sm",children:"Your generated images are automatically saved to your history!"})]})]})})}),e.jsx(dt,{onGenerate:g,isGenerating:l}),e.jsx(xt,{images:t}),e.jsx(pt,{})]})]})},ft=u.lazy(()=>L(()=>import("./MyImagesPage-UxA5TtVv.js"),__vite__mapDeps([0,1,2,3,4,5]))),wt=u.lazy(()=>L(()=>import("./ProfilePage-C2mHuUWF.js"),__vite__mapDeps([6,1,2,3,4,5]))),bt=u.lazy(()=>L(()=>import("./AuthConfirmPage-De3UZ7OT.js"),__vite__mapDeps([7,1,2,3,4,5]))),vt=u.lazy(()=>L(()=>import("./ResetPasswordPage-KRzs6eK3.js"),__vite__mapDeps([8,1,2,3,4,5]))),U=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-lg",children:"Loading..."})});function yt(){return _.includes("YOUR_CLERK_PUBLISHABLE_KEY")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Please add your Clerk publishable key to the .env file to enable authentication."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 text-left",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})})]})}):e.jsx(Ne,{publishableKey:_,routerPush:t=>{window.history.pushState(null,"",t),window.dispatchEvent(new CustomEvent("clerk:navigate",{detail:t}))},routerReplace:t=>{window.history.replaceState(null,"",t),window.dispatchEvent(new CustomEvent("clerk:navigate",{detail:t}))},children:e.jsx(qe,{children:e.jsxs(pe,{children:[e.jsxs(fe,{children:[e.jsx(I,{path:"/",element:e.jsx(T,{})}),e.jsx(I,{path:"/sign-in",element:e.jsx(T,{})}),e.jsx(I,{path:"/sign-up",element:e.jsx(T,{})}),e.jsx(I,{path:"/factor-one",element:e.jsx(T,{})}),e.jsx(I,{path:"/my-images",element:e.jsx(u.Suspense,{fallback:e.jsx(U,{}),children:e.jsx(ft,{})})}),e.jsx(I,{path:"/profile",element:e.jsx(u.Suspense,{fallback:e.jsx(U,{}),children:e.jsx(wt,{})})}),e.jsx(I,{path:"/auth/confirm",element:e.jsx(u.Suspense,{fallback:e.jsx(U,{}),children:e.jsx(bt,{})})}),e.jsx(I,{path:"/reset-password",element:e.jsx(u.Suspense,{fallback:e.jsx(U,{}),children:e.jsx(vt,{})})})]}),e.jsx(Ze,{})]})})})}const ce=document.getElementById("root");if(!ce)throw new Error("Root element not found");const jt=Ve.createRoot(ce);jt.render(e.jsx(u.StrictMode,{children:e.jsx(yt,{})}));export{te as P,B as a,R as b,st as c,rt as d,at as e,tt as g,e as j,it as u};
