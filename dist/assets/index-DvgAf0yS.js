const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MyImagesPage-CV5htoC1.js","assets/vendor-router-B0usbLSA.js","assets/vendor-react-CA82q7Og.js","assets/vendor-utils-DVH-fnlD.js","assets/vendor-supabase-l0Uqy5La.js","assets/vendor-clerk-TSkbXxwZ.js","assets/ProfilePage-CLPWGTeZ.js","assets/AuthConfirmPage-CPvgaQIQ.js","assets/ResetPasswordPage-CNqLxkL6.js"])))=>i.map(i=>d[i]);
import{r as je,a as Ne}from"./vendor-react-CA82q7Og.js";import{r as c,a as Se,R as Ie,u as ke,B as Ce,b as Ee,c as _}from"./vendor-router-B0usbLSA.js";import{c as _e,_ as O}from"./vendor-supabase-l0Uqy5La.js";import{o as Pe,u as le,a as Re,r as Ae,S as Te,b as Fe,C as Ue}from"./vendor-clerk-TSkbXxwZ.js";import{X as M,I as Z,T as Le,C as De,a as $e,b as Be,U as Oe,c as $,d as ce,e as ze,H as qe,L as He,S as X,Z as de,f as Ye,W as Ge,g as Me,h as Ve,i as Ke,P as Q,R as B,D as We,j as Je,k as Ze,l as Xe,m as Qe,G as et,n as tt}from"./vendor-utils-DVH-fnlD.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=a(i);fetch(i.href,n)}})();var Y={exports:{}},A={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee;function st(){if(ee)return A;ee=1;var t=je(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function l(g,h,v){var f,y={},o=null,u=null;v!==void 0&&(o=""+v),h.key!==void 0&&(o=""+h.key),h.ref!==void 0&&(u=h.ref);for(f in h)r.call(h,f)&&!n.hasOwnProperty(f)&&(y[f]=h[f]);if(g&&g.defaultProps)for(f in h=g.defaultProps,h)y[f]===void 0&&(y[f]=h[f]);return{$$typeof:s,type:g,key:o,ref:u,props:y,_owner:i.current}}return A.Fragment=a,A.jsx=l,A.jsxs=l,A}var te;function rt(){return te||(te=1,Y.exports=st()),Y.exports}var e=rt(),se={},at="@vercel/speed-insights",nt="1.2.0",ot=()=>{window.si||(window.si=function(...s){(window.siq=window.siq||[]).push(s)})};function it(){return typeof window<"u"}function lt(){try{const t="production"}catch{}return"production"}function ue(){return lt()==="development"}function ct(t){return t.scriptSrc?t.scriptSrc:ue()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function dt(t={}){var s;if(!it()||t.route===null)return null;ot();const a=ct(t);if(document.head.querySelector(`script[src*="${a}"]`))return null;t.beforeSend&&((s=window.si)==null||s.call(window,"beforeSend",t.beforeSend));const r=document.createElement("script");return r.src=a,r.defer=!0,r.dataset.sdkn=at+(t.framework?`/${t.framework}`:""),r.dataset.sdkv=nt,t.sampleRate&&(r.dataset.sampleRate=t.sampleRate.toString()),t.route&&(r.dataset.route=t.route),t.endpoint?r.dataset.endpoint=t.endpoint:t.basePath&&(r.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(r.dataset.dsn=t.dsn),ue()&&t.debug===!1&&(r.dataset.debug="false"),r.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${a}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(r),{setRoute:i=>{r.dataset.route=i??void 0}}}function ut(){if(!(typeof process>"u"||typeof se>"u"))return se.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function mt(t){c.useEffect(()=>{var a;t.beforeSend&&((a=window.si)==null||a.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const s=c.useRef(null);return c.useEffect(()=>{if(s.current)t.route&&s.current(t.route);else{const a=dt({framework:t.framework??"react",basePath:t.basePath??ut(),...t});a&&(s.current=a.setRoute)}},[t.route]),null}var L={},re;function ht(){if(re)return L;re=1;var t=Ne();return L.createRoot=t.createRoot,L.hydrateRoot=t.hydrateRoot,L}var gt=ht();const me=c.createContext(void 0),xt=({children:t})=>{const[s,a]=c.useState([]),r=c.useCallback(()=>`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,[]),i=c.useCallback(o=>{a(u=>u.filter(m=>m.id!==o))},[]),n=c.useCallback(o=>{const u=r(),m={id:u,duration:5e3,...o};return a(p=>[...p,m]),m.duration&&m.duration>0&&setTimeout(()=>{i(u)},m.duration),u},[r,i]),l=c.useCallback(()=>{a([])},[]),g=c.useCallback((o,u,m)=>n({type:"success",title:o,message:u,...m}),[n]),h=c.useCallback((o,u,m)=>n({type:"error",title:o,message:u,duration:7e3,...m}),[n]),v=c.useCallback((o,u,m)=>n({type:"warning",title:o,message:u,duration:6e3,...m}),[n]),f=c.useCallback((o,u,m)=>n({type:"info",title:o,message:u,...m}),[n]),y={toasts:s,addToast:n,removeToast:i,clearAllToasts:l,showSuccess:g,showError:h,showWarning:v,showInfo:f};return e.jsx(me.Provider,{value:y,children:t})},F=()=>{const t=c.useContext(me);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},ft=({toast:t,onRemove:s})=>{const[a,r]=c.useState(!1),[i,n]=c.useState(!1);c.useEffect(()=>{const o=setTimeout(()=>r(!0),50);return()=>clearTimeout(o)},[]);const l=()=>{n(!0),setTimeout(()=>s(t.id),300)},[g,h]=c.useState(100);c.useEffect(()=>{if(!t.duration||t.duration<=0)return;const o=setInterval(()=>{h(u=>{const m=100/t.duration*100;return Math.max(0,u-m)})},100);return()=>clearInterval(o)},[t.duration]);const v=()=>{const o="relative overflow-hidden glass border-l-4";switch(t.type){case"success":return`${o} border-green-500 bg-green-500/10`;case"error":return`${o} border-red-500 bg-red-500/10`;case"warning":return`${o} border-yellow-500 bg-yellow-500/10`;case"info":return`${o} border-blue-500 bg-blue-500/10`;default:return`${o} border-gray-500 bg-gray-500/10`}},f=()=>{const o="w-5 h-5";switch(t.type){case"success":return e.jsx($e,{className:`${o} text-green-400`});case"error":return e.jsx(De,{className:`${o} text-red-400`});case"warning":return e.jsx(Le,{className:`${o} text-yellow-400`});case"info":return e.jsx(Z,{className:`${o} text-blue-400`});default:return e.jsx(Z,{className:`${o} text-gray-400`})}},y=()=>{switch(t.type){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":return"bg-blue-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:`
        rounded-xl p-4 max-w-sm w-full transition-all duration-300 transform
        ${v()}
        ${a&&!i?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}
      `,role:"alert","aria-live":"polite",children:[t.duration&&t.duration>0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/10",children:e.jsx("div",{className:`h-full transition-all duration-100 linear ${y()}`,style:{width:`${g}%`}})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:f()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-medium text-sm leading-5",children:t.title}),t.message&&e.jsx("p",{className:"text-gray-300 text-sm mt-1 leading-5",children:t.message}),t.action&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:t.action.onClick,className:"text-sm font-medium text-blue-400 hover:text-blue-300 transition-colors duration-200",children:t.action.label})})]}),e.jsx("button",{onClick:l,className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-lg hover:bg-white/10","aria-label":"Close notification",children:e.jsx(M,{className:"w-4 h-4"})})]})]})},pt=()=>{const{toasts:t,removeToast:s}=F(),a=e.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-3 pointer-events-none",children:t.map(r=>e.jsx("div",{className:"pointer-events-auto",children:e.jsx(ft,{toast:r,onRemove:s})},r.id))});return t.length===0||typeof document>"u"?null:Se.createPortal(a,document.body)},T="pk_test_YWJsZS1saW9uLTI5LmNsZXJrLmFjY291bnRzLmRldiQ",he=()=>!T.includes("YOUR_CLERK_PUBLISHABLE_KEY")&&T.startsWith("pk_"),G=he()?new Pe(T):null,wt=async()=>{try{const t=window?.Clerk;if(t?.session){try{const a=await t.session.getToken({template:"supabase"});if(a)return a}catch{console.warn("Supabase template not configured in Clerk, using default token")}const s=await t.session.getToken();if(s)return s}if(G?.session){try{const a=await G.session.getToken({template:"supabase"});if(a)return a}catch{console.warn("Supabase template not configured in Clerk, using default token")}const s=await G.session.getToken();if(s)return s}return console.warn("No active Clerk session found"),null}catch(t){return console.error("Error getting Clerk token:",t),null}};class ae{static DIMENSIONS={"16:9":{width:1024,height:576},"4:3":{width:768,height:576},"1:1":{width:768,height:768}};static BASE_URL="https://image.pollinations.ai/prompt/";static generateImage(s){if(!s.prompt?.trim())throw new Error("Prompt is required");const a=s.prompt.trim(),r=s.aspectRatio||"1:1",i=this.DIMENSIONS[r]||this.DIMENSIONS["1:1"],n=`${a}, masterpiece, best quality, highly detailed`,l=Date.now()%1e6+Math.floor(Math.random()*1e3),g=encodeURIComponent(n),h=`${this.BASE_URL}${g}?width=${i.width}&height=${i.height}&seed=${l}&enhance=true&nologo=true&model=flux&steps=20`;return{id:`pollinations_${Date.now()}_${Math.random().toString(36).slice(2,11)}`,url:h,prompt:a,aspectRatio:r,timestamp:new Date}}static generateVariations(s,a=3){if(!s.prompt?.trim())throw new Error("Prompt is required");const r=[];for(let i=0;i<a;i++){const n={...s,prompt:i===0?s.prompt:`${s.prompt}, variation ${i+1}`};setTimeout(()=>{const l=this.generateImage(n);r.push(l)},i*10)}return r}static getDimensions(s){return this.DIMENSIONS[s]||this.DIMENSIONS["1:1"]}static testApiKey(){return!0}static preloadImage(s){return new Promise((a,r)=>{const i=new Image;i.onload=()=>a(),i.onerror=r,i.src=s})}static async generateAndPreload(s){const a=this.generateImage(s);return this.preloadImage(a.url).catch(()=>{}),a}}const V="https://dxljyzvwolnbdreewbvs.supabase.co",K="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR4bGp5enZ3b2xuYmRyZWV3YnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyNTY0OTksImV4cCI6MjA3MjgzMjQ5OX0.hzNFBkxNMS6BwToieigRze1GEq_OSpzrXJpH92o0ouU",ge=()=>!V.includes("YOUR_SUPABASE_URL")&&!K.includes("YOUR_SUPABASE_ANON_KEY")&&!V.includes("API_KEY_ADDED"),bt=()=>ge()?_e(V,K,{global:{fetch:async(t,s={})=>{const a=await wt();s.headers={apikey:K,...s.headers};const r=t.toString();if(r.includes("/rest/v1/"))(s.headers||{})["Content-Type"]||(s.headers={...s.headers,"Content-Type":"application/json"});else if(r.includes("/storage/v1/object/")){const i=s.headers||{},n=s.body&&(s.body instanceof Blob||s.body instanceof File||s.body instanceof FormData);s.body&&!i["Content-Type"]&&!n&&(s.headers={...s.headers,"Content-Type":"application/json"})}if(a?(s.headers={...s.headers,Authorization:`Bearer ${a}`},console.log("Supabase request with valid token (length:",a.length,")")):console.warn("âš ï¸  No Clerk token available for Supabase request - this will likely cause 400/401 errors"),r.includes("/storage/v1/object/")&&console.log("Storage API request:",{url:r,method:s.method,headers:s.headers,body:s.body}),r.includes("/storage/v1/object/")&&s.body&&!(s.body instanceof Blob||s.body instanceof File||s.body instanceof FormData)&&typeof s.body=="string")try{const n=JSON.parse(s.body);s.body=JSON.stringify(n)}catch(n){console.warn("Failed to parse storage request body:",n)}return fetch(t,s)}}}):null,S=bt(),ne=async()=>S,vt=t=>t?.id||null,yt=t=>t?.emailAddresses?.[0]?.emailAddress||void 0,jt=t=>t?.fullName||void 0,Nt=t=>t?.imageUrl||void 0,z=()=>{const{user:t,isLoaded:s,isSignedIn:a}=le(),r=Re(),[i,n]=c.useState(!0),[l,g]=c.useState(!1),h=t?{id:t.id,emailAddresses:t.emailAddresses.map(w=>({emailAddress:w.emailAddress})),firstName:t.firstName,lastName:t.lastName,imageUrl:t.imageUrl,fullName:t.fullName}:null;return c.useEffect(()=>{const w=he()&&ge();g(w),s&&n(!1)},[s]),{user:h,loading:i||!s,isConfigured:l,isSignedIn:!!a,signIn:async(w,b)=>{if(!l)throw new Error("Authentication not configured");try{const d=await r.client.signIn.create({identifier:w,password:b});if(d.status==="complete")return await r.setActive({session:d.createdSessionId}),{user:d};throw new Error("Sign in incomplete")}catch(d){throw new Error(d.message||"Sign in failed")}},signUp:async(w,b,d)=>{if(!l)throw new Error("Authentication not configured");try{const[N,...E]=(d||"").split(" "),C=E.join(" "),I=await r.client.signUp.create({emailAddress:w,password:b,firstName:N||void 0,lastName:C||void 0});return await I.prepareEmailAddressVerification({strategy:"email_code"}),{user:I,needsVerification:!0}}catch(N){throw new Error(N.message||"Sign up failed")}},signOut:async()=>{if(l)try{await r.signOut(),(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")}catch(w){throw new Error(w.message||"Sign out failed")}},resetPassword:async w=>{if(!l)throw new Error("Authentication not configured");try{await r.client.signIn.create({identifier:w,strategy:"reset_password_email_code"})}catch(b){throw new Error(b.message||"Password reset failed")}},updateProfile:async w=>{if(!l)throw new Error("Authentication not configured");if(!h)throw new Error("No user logged in");try{const b={};if(w.full_name){const[d,...N]=w.full_name.split(" ");b.firstName=d,b.lastName=N.join(" ")}return await t?.update(b),{user:t}}catch(b){throw new Error(b.message||"Profile update failed")}},updateProfileImage:async w=>{if(!l)throw new Error("Authentication not configured");if(!r.user)throw new Error("No user logged in");try{return await r.user.setProfileImage({file:w}),{user:r.user}}catch(b){throw new Error(b.message||"Profile image update failed")}},updateEmail:async(w,b)=>{if(!l)throw new Error("Authentication not configured");if(!h)throw new Error("No user logged in");try{if(b){const N=t?.emailAddresses?.[0]?.emailAddress;if(!N)throw new Error("Current email not found");const E=await r.client.signIn.create({identifier:N,password:b});if(E.status==="complete")await r.setActive({session:E.createdSessionId});else throw new Error("Re-authentication failed")}const d=await t?.createEmailAddress({email:w});if(!d)throw new Error("Failed to create new email address");return await d.prepareVerification({strategy:"email_code"}),{user:t}}catch(d){throw new Error(d.message||"Email update failed")}},verifyEmailUpdate:async(w,b)=>{if(!l)throw new Error("Authentication not configured");if(!t)throw new Error("No user logged in");try{const d=t.emailAddresses.find(N=>N.emailAddress===w);if(!d)throw new Error("New email not found on account");return await d.attemptVerification({code:b}),await t.update({primaryEmailAddressId:d.id}),{user:t}}catch(d){throw new Error(d.message||"Email verification failed")}},updatePassword:async w=>{if(!l)throw new Error("Authentication not configured");if(!h)throw new Error("No user logged in");try{return await t?.updatePassword({newPassword:w}),{user:t}}catch(b){throw new Error(b.message||"Password update failed")}}}},St=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!1),{user:i,isConfigured:n}=z(),l=vt(i),g=c.useCallback(async()=>{if(!n||!l||!S){console.log("fetchSavedImages skipped:",{isConfigured:n,userId:!!l,supabase:!!S});return}r(!0);try{const{data:o,error:u}=await S.from("saved_images").select("*").eq("user_id",l).order("created_at",{ascending:!1});if(u)throw console.error("Fetch saved images error:",u),u;const m=(o||[]).filter(p=>!p||typeof p!="object"||!p.id?(console.warn("Invalid image data found:",p),!1):!0);s(m)}catch(o){console.error("Fetch saved images error:",o)}finally{r(!1)}},[n,l]);c.useEffect(()=>{l&&n?g():s([])},[l,n,g]);const h=c.useRef(new Set);return{savedImages:t,loading:a,saveImage:async(o,u,m,p="pollinations")=>{if(!n||!l||!S)return console.warn("Cannot save image: not configured or missing user/supabase"),null;const x=`${l}:${u}`;if(h.current.has(x))return console.log("â³ Save already in progress for this image, skipping duplicate save"),null;h.current.add(x),console.log("saveImage called with:",{prompt:o.substring(0,50),generatedImageUrl:u,aspectRatio:m,style:p,userId:l});try{const{data:j}=await S.from("saved_images").select("id, prompt, image_url").eq("user_id",l).or(`image_url.eq.${u},prompt.eq.${o}`).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(j?.id)return console.log("ðŸ” Found existing image with same URL or prompt, skipping save:",j.id),h.current.delete(x),j;const w=p==="vivid"||p==="natural"?p:"vivid";let b=!1;try{console.log("ðŸ–¼ï¸ Attempting to fetch image for storage upload:",u.substring(0,100)+"...");const I=await fetch(u,{signal:AbortSignal.timeout(1e4)});if(console.log("ðŸ“¥ Fetch response status:",I.status,I.statusText),I.ok){const k=await I.blob();if(console.log("âœ… Image blob fetched:",{type:k.type,size:k.size}),k.size>0&&k.type.startsWith("image/")){console.log("âœ… Blob is valid image, proceeding with storage upload");const we=k.type.split("/")[1]||"jpg",be=`${Date.now()}.${we}`,P=`${l}/${be}`;console.log("ðŸ“¤ Uploading to storage:",{filePath:P,size:k.size,type:k.type});const q=await ne();if(!q)throw console.error("âŒ Storage client not available!"),new Error("Storage client not available");const{error:H,data:ve}=await q.storage.from("generated_images").upload(P,k,{cacheControl:"3600",upsert:!1,contentType:k.type});if(H)throw console.error("âŒ Storage upload failed:",{uploadError:H,filePath:P}),H;console.log("âœ… Storage upload successful:",ve);const{data:{publicUrl:U}}=q.storage.from("generated_images").getPublicUrl(P);if(!U)throw console.error("âŒ Failed to get public URL"),new Error("Failed to get public URL");console.log("âœ… Public URL obtained:",U.substring(0,100)+"...");const ye={user_id:l,prompt:o,image_url:U,aspect_ratio:m,style:w,is_favorite:!1,storage_file_path:P},{data:W}=await S.from("saved_images").select("id").eq("user_id",l).eq("image_url",U).limit(1).maybeSingle();if(W?.id)return console.log("â„¹ï¸ Duplicate detected (storage URL), skipping insert"),h.current.delete(x),setTimeout(()=>g(),500),W;console.log("ðŸ’¾ Saving to database with storage URL");const{data:J,error:R}=await S.from("saved_images").insert(ye).select().single();if(R){if(R.code==="23505"||R.message?.includes("duplicate"))return console.log("âš ï¸ Unique constraint violation - image already exists"),h.current.delete(x),setTimeout(()=>g(),500),b=!0,null;throw console.error("âŒ Database insert failed:",R),R}return console.log("âœ… Storage upload + database insert successful!",J?"with data":"without returned data"),h.current.delete(x),setTimeout(()=>g(),500),b=!0,J||{}}else console.warn("âš ï¸ Invalid blob: size="+k.size+", type="+k.type)}else console.error("âŒ Fetch failed:",I.status,I.statusText)}catch(I){console.error("âŒ Storage upload failed, will use fallback:",I)}if(b)return console.log("âœ… Storage upload was completed, no need for fallback"),null;console.log("ðŸ“Œ Using direct URL fallback");const d={user_id:l,prompt:o,image_url:u,aspect_ratio:m,style:w,is_favorite:!1},{data:N}=await S.from("saved_images").select("id").eq("user_id",l).eq("image_url",u).limit(1).maybeSingle();if(N?.id)return console.log("â„¹ï¸ Duplicate detected (direct URL), skipping insert"),h.current.delete(x),setTimeout(()=>g(),500),N;const{data:E,error:C}=await S.from("saved_images").insert(d).select().single();return C?C.code==="23505"||C.message?.includes("duplicate")?(console.log("âš ï¸ Unique constraint violation - image already exists"),h.current.delete(x),setTimeout(()=>g(),500),null):(console.error("Database insert failed:",{error:C,message:C.message,code:C.code,details:C.details,hint:C.hint}),null):(console.log("ðŸŽ† Direct URL database insert successful!",E?"with data":"without returned data"),h.current.delete(x),setTimeout(()=>g(),500),E||{})}catch(j){return console.error("saveImage catch block:",j),h.current.delete(x),null}finally{h.current.delete(x)}},deleteImage:async o=>{if(!(!n||!l||!S))try{const u=t.find(x=>x.id===o);if(!u)return;let m=u.storage_file_path;if(!m){const x=u.image_url.split("/"),j=x.indexOf("generated_images");j!==-1&&(m=x.slice(j+1).join("/"))}if(m&&m.includes("undefined")&&(console.warn("Invalid file path detected, skipping storage deletion:",m),m=null),m)try{const x=m.startsWith("/")?m.slice(1):m;console.log("Attempting to delete file from storage:",x),console.log("File path details:",{original:m,cleaned:x,userId:l});const j=await ne(),{data:w,error:b}=await j?.storage.from("generated_images").remove([x])||{data:null,error:new Error("Storage client not available")};console.log("Storage deletion response:",{removeData:w,storageError:b}),b?console.warn("Storage deletion failed:",b):console.log("Successfully deleted file from storage:",x)}catch(x){console.warn("Storage deletion error:",x)}else console.warn("No file path available for storage deletion");const{error:p}=await S.from("saved_images").delete().eq("id",o).eq("user_id",l);if(p)throw p;s(x=>x.filter(j=>j.id!==o))}catch(u){throw u}},toggleFavorite:async o=>{if(!(!n||!l||!S))try{const u=t.find(j=>j.id===o);if(!u){console.warn("Image not found for favorite toggle:",o);return}const m=!u.is_favorite;console.log("Toggling favorite for image:",o,"from",u.is_favorite,"to",m);const{data:p,error:x}=await S.from("saved_images").update({is_favorite:m}).eq("id",o).eq("user_id",l).select().single();if(x)throw console.error("Error updating favorite status:",x),x;console.log("Database update successful, received data:",p),s(j=>j.map(w=>w.id===o?p&&typeof p=="object"&&p.id?(console.log("Updating image with database data:",p),p):(console.log("Updating image locally with new favorite status"),{...w,is_favorite:m}):w))}catch(u){throw console.error("Toggle favorite error:",u),u}},refreshImages:g}},oe=({imageUrl:t,fullName:s,email:a,size:r="md",editable:i=!1,onImageChange:n,loading:l=!1})=>{const[g,h]=c.useState(!1),f={sm:{container:"w-8 h-8",icon:"w-3 h-3",text:"text-xs"},md:{container:"w-12 h-12",icon:"w-5 h-5",text:"text-sm"},lg:{container:"w-20 h-20",icon:"w-8 h-8",text:"text-lg"},xl:{container:"w-32 h-32",icon:"w-12 h-12",text:"text-2xl"}}[r],y=()=>s?s.split(" ").map(p=>p.charAt(0).toUpperCase()).slice(0,2).join(""):a?a.charAt(0).toUpperCase():"U",o=p=>{const x=p.target.files?.[0];if(x&&n){if(!x.type.startsWith("image/")||x.size>5*1024*1024)return;n(x)}},u=()=>{h(!0)};Ie.useEffect(()=>{h(!1)},[t]);const m=()=>{if(l)return e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("div",{className:"w-1/2 h-1/2 rounded-full bg-white/20"})});if(t&&!g)return e.jsx("img",{src:t,alt:s||"Profile",onError:u,className:"w-full h-full object-cover"});const p=y();return p&&p!=="U"?e.jsx("span",{className:`font-semibold text-white ${f.text}`,children:p}):e.jsx($,{className:`text-white ${f.icon}`})};return i?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`
          ${f.container} 
          rounded-full 
          bg-gradient-to-r from-blue-500 to-purple-600 
          flex items-center justify-center 
          overflow-hidden 
          border-2 border-white/20
          cursor-pointer
          group
          hover:scale-105
          transition-all duration-200
        `,children:[m(),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:e.jsx(Be,{className:"w-1/3 h-1/3 text-white"})})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:o,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:l}),i&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(Oe,{className:"w-3 h-3 text-white"})})]}):e.jsx("div",{className:`
      ${f.container} 
      rounded-full 
      bg-gradient-to-r from-blue-500 to-purple-600 
      flex items-center justify-center 
      overflow-hidden 
      border-2 border-white/20
    `,children:m()})},It=({onShowAuth:t})=>{const[s,a]=c.useState(!1),{user:r,signOut:i,isConfigured:n}=z(),{showSuccess:l,showError:g}=F(),h=ke(),v=async()=>{try{await i(),a(!1),l("Signed Out Successfully","You have been signed out of your account.")}catch{g("Sign Out Failed","An error occurred while signing out. Please try again.")}},f=()=>{h("/my-images"),a(!1)},y=()=>{h("/profile"),a(!1)},o=()=>{r||t()};if(!n)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:t,className:"glass glass-hover rounded-lg sm:rounded-xl px-3 sm:px-4 py-2 flex items-center gap-1.5 sm:gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx($,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-xs sm:text-sm hidden sm:inline",children:"Connect Auth"})]})});if(!r)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:o,className:"glass glass-hover rounded-lg sm:rounded-xl px-3 sm:px-4 py-2 flex items-center gap-1.5 sm:gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx($,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-xs sm:text-sm hidden sm:inline",children:"Sign In"})]})});const u=jt(r),m=yt(r),p=Nt(r);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!s),className:"glass glass-hover rounded-lg sm:rounded-xl px-2 sm:px-4 py-2 flex items-center gap-1 sm:gap-2 text-white hover:text-blue-300 transition-all duration-300",children:[e.jsx(oe,{imageUrl:p,fullName:u,email:m,size:"sm"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:u||m?.split("@")[0]||"User"}),e.jsx(ce,{className:`w-4 h-4 transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 sm:w-64 glass rounded-lg sm:rounded-xl border border-white/20 z-20 shadow-xl",children:e.jsxs("div",{className:"p-2 sm:p-3",children:[e.jsx("div",{className:"px-2 sm:px-3 py-2 sm:py-3 border-b border-white/10 mb-1.5 sm:mb-2",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(oe,{imageUrl:p,fullName:u,email:m,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm text-white font-medium truncate",children:u||"User"}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:m})]})]})}),e.jsxs("button",{onClick:y,className:"w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-2.5 text-xs sm:text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(ze,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:f,className:"w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-2.5 text-xs sm:text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(qe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"My Images"})]}),e.jsx("hr",{className:"border-white/10 my-1.5 sm:my-2"}),e.jsxs("button",{onClick:v,className:"w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-2.5 text-xs sm:text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all duration-200",children:[e.jsx(He,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Sign Out"})]})]})})]})]})};var kt=Ae();const ie={baseTheme:kt.dark,elements:{formButtonPrimary:"bg-blue-600 hover:bg-blue-700 text-white transition-colors",card:"bg-gray-900 border-gray-700 shadow-2xl relative",headerTitle:"text-white font-bold",headerSubtitle:"text-gray-300",socialButtonsBlockButton:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 transition-colors",socialButtonsBlockButtonText:"text-white",formFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formFieldLabel:"text-gray-300 font-medium",identityPreviewText:"text-gray-300",formFieldHintText:"text-gray-400 text-sm",formFieldErrorText:"text-red-400 text-sm",footerActionText:"text-gray-300",footerActionLink:"text-blue-400 hover:text-blue-300 transition-colors",dividerLine:"bg-gray-600",dividerText:"text-gray-400",formResendCodeLink:"text-blue-400 hover:text-blue-300 transition-colors",otpCodeFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formHeaderTitle:"text-white font-bold",formHeaderSubtitle:"text-gray-300",alertText:"text-gray-300",formFieldSuccessText:"text-green-400 text-sm",formFieldWarningText:"text-yellow-400 text-sm",formFieldInputShowPasswordButton:"text-gray-400 hover:text-gray-300 transition-colors",formFieldInputShowPasswordIcon:"text-gray-400",formFieldInputHidePasswordIcon:"text-gray-400",formFieldInputShowPasswordButtonHover:"text-gray-300",formFieldInputShowPasswordButtonActive:"text-gray-200",formFieldInputShowPasswordButtonFocus:"text-gray-200",formFieldInputShowPasswordButtonDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActive:"text-gray-200",formFieldInputShowPasswordButtonHoverFocus:"text-gray-200",formFieldInputShowPasswordButtonActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActiveFocusDisabled:"text-gray-500"}},Ct=({isOpen:t,onClose:s,initialMode:a="signin"})=>{const[r,i]=c.useState(a),[n,l]=c.useState(!1),{user:g}=le(),{isConfigured:h}=z(),{showSuccess:v}=F();return c.useEffect(()=>{g&&t&&(v("Welcome!","You have successfully signed in to your account."),s())},[g,t,s,v]),c.useEffect(()=>{if(t){i(a),l(!1);const f=setTimeout(()=>{l(!0)},500);return()=>{clearTimeout(f)}}else l(!1)},[t]),c.useEffect(()=>{if(!t)return;const f=y=>{const u=y.detail||"";u.includes("sign-up")&&i("signup"),u.includes("sign-in")&&i("signin")};return window.addEventListener("clerk:navigate",f),()=>window.removeEventListener("clerk:navigate",f)},[t]),c.useEffect(()=>{!t&&(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")},[t]),c.useEffect(()=>{if(!t)return;const f=r==="signup"?"/sign-up":"/sign-in";window.location.pathname!==f&&window.history.replaceState(null,"",f)},[t,r]),c.useEffect(()=>{t&&i(a)},[t,a]),t?h?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative",children:[n&&e.jsx("button",{onClick:s,"aria-label":"Close authentication",className:"absolute top-4 right-4 z-50 text-gray-400 hover:text-white transition-all duration-300 bg-black/20 hover:bg-black/40 rounded-full p-2 animate-fade-in",children:e.jsx(M,{className:"w-5 h-5"})}),r==="signin"?e.jsx(Te,{path:"/sign-in",signUpUrl:"/sign-up",afterSignInUrl:"/",redirectUrl:"/",routing:"path",appearance:ie}):e.jsx(Fe,{path:"/sign-up",signInUrl:"/sign-in",afterSignUpUrl:"/",redirectUrl:"/",routing:"path",appearance:ie})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(M,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx($,{className:"w-8 h-8 text-yellow-400"})})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"To enable user authentication, please configure your Clerk project and add the publishable key to your environment variables."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})}),e.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-600 rounded-xl px-6 py-3 text-blue-400 font-medium transition-all duration-300",children:"Close"})]})]})}):null},Et=()=>{const[t,s]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"relative py-4 sm:py-6 md:py-8 px-3 sm:px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-4 sm:mb-6 md:mb-8",children:e.jsx(It,{onShowAuth:()=>s(!0)})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-3 sm:mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full blur opacity-75 pulse-glow"}),e.jsx("div",{className:"relative glass rounded-full p-2 sm:p-3",children:e.jsx(X,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-400"})})]})}),e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-5xl lg:text-6xl font-bold mb-3 sm:mb-4 px-2",children:e.jsx("span",{className:"gradient-text",children:"Free AI Image Generator"})}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-300 mb-4 sm:mb-6 max-w-2xl mx-auto px-4",children:"Transform your imagination into stunning visuals with completely free AI image generation. No API keys, no limits, no costs - just pure creativity unleashed!"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-400 px-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(de,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-yellow-400"}),e.jsx("span",{children:"Lightning Fast"})]}),e.jsx("div",{className:"hidden sm:block w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(Ye,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-400"}),e.jsx("span",{children:"Unlimited Free"})]}),e.jsx("div",{className:"hidden sm:block w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(X,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-purple-400"}),e.jsx("span",{children:"High Quality"})]})]})]})]})}),e.jsx(Ct,{isOpen:t,onClose:()=>s(!1)})]})},xe=c.forwardRef(({onGenerate:t,isGenerating:s},a)=>{const[r,i]=c.useState(""),[n,l]=c.useState("1:1"),[g,h]=c.useState("vivid"),[v,f]=c.useState(!1),y=c.useRef(null),o=c.useRef(null),u=c.useRef(!1),m=d=>{d.preventDefault(),!u.current&&r.trim()&&!s&&(u.current=!0,t({prompt:r.trim(),aspectRatio:n,generationStyle:g}),setTimeout(()=>{u.current=!1},500))},p=()=>{const d=o.current;d&&(d.style.height="auto",d.style.height=`${Math.min(d.scrollHeight,200)}px`)},x=d=>{i(d.target.value),p()};c.useEffect(()=>{p()},[r]),c.useImperativeHandle(a,()=>({focus:()=>{o.current&&o.current.focus()}}),[]);const j=["A serene mountain landscape at sunset","Cyberpunk city with neon lights","Magical forest with glowing mushrooms","Futuristic spaceship in deep space","Abstract geometric art in vibrant colors","Cozy cottage in a snowy winter scene","Majestic dragon soaring through clouds","Underwater coral reef with tropical fish"],w=[{value:"1:1",label:"Square",ratio:"1:1",description:"Perfect for social media posts",icon:"â¬œ",dimensions:"512Ã—512"},{value:"16:9",label:"Landscape",ratio:"16:9",description:"Great for wallpapers and presentations",icon:"ðŸ–¥ï¸",dimensions:"768Ã—432"},{value:"4:3",label:"Classic",ratio:"4:3",description:"Traditional photo format",icon:"ðŸ“·",dimensions:"640Ã—480"}],b=[{value:"vivid",label:"Vivid Style",description:"Bold & Dramatic Images",icon:"ðŸŽ¨",features:["High Contrast","Vibrant Colors","Artistic"],color:"from-purple-500 to-pink-600",borderColor:"border-purple-500/30"},{value:"natural",label:"Natural Style",description:"Realistic & Subtle",icon:"ðŸŒ¿",features:["Photo-realistic","Natural Colors","Balanced"],color:"from-blue-500 to-cyan-600",borderColor:"border-blue-500/30"}];return e.jsxs("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 mb-6 sm:mb-8 md:mb-12",children:[e.jsx("form",{ref:y,onSubmit:m,className:"relative",children:e.jsxs("div",{className:"glass rounded-xl sm:rounded-2xl p-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4 p-2 sm:p-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ge,{className:"absolute left-3 sm:left-4 top-3 sm:top-4 w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),e.jsx("textarea",{ref:o,value:r,onChange:x,onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),y.current?.requestSubmit())},placeholder:"Describe the image you want to generate...",className:"w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-4 bg-transparent text-white placeholder-gray-400 text-sm sm:text-base md:text-lg focus:outline-none resize-none overflow-y-auto min-h-[48px] sm:min-h-[56px] max-h-[200px] scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent hover:scrollbar-thumb-gray-500",disabled:s,rows:1})]}),e.jsxs("div",{className:"flex sm:flex-col gap-2 w-full sm:w-auto",children:[e.jsxs("button",{type:"button",onClick:()=>f(!v),className:`glass-hover rounded-lg sm:rounded-xl p-2 sm:p-4 transition-all duration-300 relative flex-1 sm:flex-none ${v?"text-blue-400 bg-blue-500/20 shadow-lg shadow-blue-500/25":"text-gray-400 hover:text-white"}`,title:"Settings",children:[e.jsxs("div",{className:"flex items-center justify-center sm:gap-2",children:[e.jsx(Me,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"sm:hidden ml-1.5 text-xs",children:"Settings"}),v?e.jsx(Ve,{className:"hidden sm:block w-4 h-4"}):e.jsx(ce,{className:"hidden sm:block w-4 h-4"})]}),v&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 sm:w-3 sm:h-3 bg-blue-500 rounded-full"})]}),e.jsxs("button",{type:"submit",disabled:!r.trim()||s,className:"glass-hover rounded-lg sm:rounded-xl px-4 sm:px-6 py-2 sm:py-4 flex items-center justify-center gap-1.5 sm:gap-2 text-white font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group flex-1 sm:flex-none",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center gap-1.5 sm:gap-2",children:[e.jsx(Ke,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Generate"})]})]})]})]}),v&&e.jsx("div",{className:"border-t border-white/20 bg-gray-800/30 backdrop-blur-sm",children:e.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white mb-1 sm:mb-2",children:"Generation Settings"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Customize your AI image generation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm sm:text-base text-white mb-3 sm:mb-4 font-semibold flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-400"}),"Choose Generation Style"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:b.map(d=>e.jsxs("button",{type:"button",onClick:()=>h(d.value),className:`relative p-3 sm:p-4 rounded-lg sm:rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${g===d.value?`bg-gradient-to-br ${d.color} text-white shadow-lg shadow-purple-500/25 ring-2 ring-purple-400`:"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1.5 sm:mb-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl",children:d.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:d.label}),e.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:d.description})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:d.features.map((N,E)=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/20 opacity-75",children:N},E))}),g===d.value&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"})})]},d.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm sm:text-base text-white mb-3 sm:mb-4 font-semibold flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-400"}),"Choose Aspect Ratio"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:w.map(d=>e.jsxs("button",{type:"button",onClick:()=>l(d.value),className:`relative p-3 sm:p-4 rounded-lg sm:rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${n===d.value?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 ring-2 ring-blue-400":"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1.5 sm:mb-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl",children:d.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:d.label}),e.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:d.ratio})]})]}),e.jsx("div",{className:"text-xs opacity-75 mb-1 sm:mb-2",children:d.description}),e.jsxs("div",{className:"text-xs font-mono opacity-60",children:[d.dimensions,"px"]}),n===d.value&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})})]},d.value))})]}),e.jsxs("div",{className:"glass rounded-lg sm:rounded-xl p-3 sm:p-4 bg-gradient-to-r from-purple-500/10 to-blue-500/10 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs sm:text-sm text-purple-300 mb-2 font-medium",children:"Ready to Generate:"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-gray-300",children:b.find(d=>d.value===g)?.label})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{className:"text-gray-300",children:[w.find(d=>d.value===n)?.label," (",n,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-gray-300",children:"100% Free"})]})]})]})]})})]})}),e.jsxs("div",{className:"mt-4 sm:mt-6",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mb-2 sm:mb-3 text-center",children:"âœ¨ Try these creative prompts:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 justify-center",children:j.map((d,N)=>e.jsx("button",{onClick:()=>i(d),disabled:s,className:"glass glass-hover rounded-full px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm text-gray-300 transition-all duration-300 hover:text-white disabled:opacity-50",children:d},N))})]})]})});xe.displayName="PromptInput";const _t=async t=>{if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(t);return}catch{}const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.top="-9999px",s.style.left="-9999px",document.body.appendChild(s),s.focus(),s.select();try{if(!document.execCommand("copy"))throw new Error("execCommand returned false")}catch{throw new Error("Fallback copy method failed.")}finally{document.body.removeChild(s)}},Pt=async(t,s,a,r)=>{try{const i=await fetch(t);if(!i.ok)throw new Error(`Failed to fetch image: ${i.status}`);const n=await i.blob(),l=window.URL.createObjectURL(n),g=document.createElement("a");g.href=l,g.download=s,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(l),a?.()}catch(i){console.error("Download error:",i);try{const n=document.createElement("a");n.href=t,n.download=s,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n),a?.()}catch(n){console.error("Fallback download error:",n),r?.(i)}}},Rt=(t="1:1",s,a="jpg")=>{const r=new Date().toISOString().split("T")[0];return`ai-generated-${t}-${s}-${r}.${a}`},At=({image:t})=>{const[s,a]=c.useState("idle"),[r,i]=c.useState(!1),{showSuccess:n,showError:l}=F(),g=async()=>{if(r)return;i(!0);const o=Rt(t.aspectRatio||"1:1",t.id);await Pt(t.url,o,()=>{n("Download Started","Your image is being downloaded.")},u=>{l("Download Failed","Could not download the image. Please try again.")}),i(!1)},h=async()=>{try{await _t(t.prompt),a("success"),n("Prompt Copied!","The image prompt has been copied to your clipboard.")}catch{a("error"),l("Copy Failed","Could not copy the prompt to clipboard. Please try copying manually."),alert(`Could not copy automatically. Please copy this prompt manually:

"${t.prompt}"`)}setTimeout(()=>a("idle"),2e3)},v=o=>new Intl.RelativeTimeFormat("en",{numeric:"auto"}).format(Math.ceil((o.getTime()-Date.now())/(1e3*60)),"minute"),f=o=>{switch(o){case"16:9":return"aspect-video";case"4:3":return"aspect-[4/3]";case"1:1":default:return"aspect-square"}},y=o=>{switch(o){case"16:9":return"Landscape";case"4:3":return"Classic";case"1:1":default:return"Square"}};return t.isLoading?e.jsxs("div",{className:"glass rounded-xl overflow-hidden w-full max-w-sm mx-auto min-h-[400px] flex flex-col",children:[e.jsx("div",{className:`bg-gray-800 relative overflow-hidden flex-1 ${f(t.aspectRatio)}`,children:e.jsx("div",{className:"absolute inset-0 bg-gray-700/40"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-2/3"})]})]}):e.jsxs("div",{className:"glass rounded-xl overflow-hidden group hover:scale-105 transition-all duration-300 floating-animation w-full max-w-sm mx-auto min-h-[400px] flex flex-col animate-fade-in-up","data-image-id":t.id,children:[e.jsxs("div",{className:"relative overflow-hidden flex-1",children:[e.jsx("img",{src:t.url,alt:t.prompt,className:`w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 ${f(t.aspectRatio)}`,loading:"eager",decoding:"async",fetchpriority:"high",onLoad:()=>{const o=document.querySelector(`[data-image-id="${t.id}"]`);o?.classList.add("animate-pulse"),setTimeout(()=>o?.classList.remove("animate-pulse"),300)}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-3 left-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"glass rounded-lg px-2 py-1 text-xs text-white border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),e.jsx("span",{children:t.aspectRatio||"1:1"})]})})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{onClick:g,disabled:r,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${r?"opacity-50 cursor-not-allowed":"hover:text-blue-400"}`,title:r?"Downloading...":"Download image",children:r?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(We,{className:"w-4 h-4"})}),e.jsx("button",{onClick:h,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${s==="success"?"text-green-400":s==="error"?"text-red-400":"hover:text-green-400"}`,title:s==="success"?"Copied!":s==="error"?"Copy failed":"Copy prompt",children:s==="success"?e.jsx(Je,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"})})]}),s!=="idle"&&e.jsx("div",{className:"absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:`glass rounded-lg px-3 py-1 text-sm ${s==="success"?"text-green-400 border-green-500/30":"text-red-400 border-red-500/30"}`,children:s==="success"?"Copied!":"Failed"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-gray-300 text-sm line-clamp-2 mb-3",children:t.prompt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-3 h-3"}),e.jsx("span",{children:v(t.timestamp)})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(B,{className:"w-3 h-3"}),e.jsx("span",{children:y(t.aspectRatio)})]})]})]})]})},fe=c.forwardRef(({images:t},s)=>t.length===0?e.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center py-16",children:e.jsxs("div",{className:"glass rounded-2xl p-12",children:[e.jsx(Qe,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"No images yet"}),e.jsx("p",{className:"text-gray-500",children:"Generate your first AI image by entering a prompt above!"})]})}):e.jsxs("div",{ref:s,className:"max-w-7xl mx-auto px-3 sm:px-4",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Your Generated Images"}),e.jsxs("p",{className:"text-gray-400",children:[t.filter(a=>!a.isLoading).length," image",t.filter(a=>!a.isLoading).length!==1?"s":""," generated"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 gap-4 sm:gap-5 md:gap-6",children:t.map(a=>e.jsx(At,{image:a},a.id))})]}));fe.displayName="ImageGrid";const Tt=()=>e.jsx("footer",{className:"mt-10 sm:mt-16 md:mt-20 py-6 sm:py-8 px-3 sm:px-4 border-t border-white/10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 sm:gap-6 mb-3 sm:mb-4",children:[e.jsx("a",{href:"https://github.com/dumindu2041329",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"GitHub",children:e.jsx(et,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx("a",{href:"https://www.linkedin.com/in/dumindu-damsara-0049ab246/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"LinkedIn",children:e.jsx(tt,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Â© ",new Date().getFullYear()," AI Image Generator. All rights reserved."]})]})}),D=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!1),{saveImage:i}=St(),{user:n,isConfigured:l}=z(),{showSuccess:g,showError:h,showWarning:v}=F(),f=c.useRef(n),y=c.useRef(null),o=c.useRef(null);c.useEffect(()=>{f.current&&!n&&s([]),f.current=n},[n]);const u=m=>{r(!0);const p=performance.now();try{const x=ae.generateImage(m),j=Math.round(performance.now()-p);ae.preloadImage(x.url).catch(()=>{}),s(w=>[x,...w]),g("Image Generated Instantly!",`Created a ${m.aspectRatio||"1:1"} image in ${j}ms using Pollinations AI.`),setTimeout(()=>{y.current&&y.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50),l&&n&&i(m.prompt,x.url,m.aspectRatio||"1:1",m.generationStyle||"vivid").then(()=>{setTimeout(()=>{g("Image Saved!","Your generated image has been saved to your history.")},1e3)}).catch(w=>{console.warn("Save to history failed:",w),setTimeout(()=>{v("Image Generated Successfully","Your image was created but could not be saved to your history. The image is still available above!")},1e3)})}catch(x){x instanceof Error?h("Image Generation Failed",x.message):h("Image Generation Failed","An unexpected error occurred. Please try again.")}finally{setTimeout(()=>r(!1),100)}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(Et,{}),l&&n&&e.jsx("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 mb-4 sm:mb-6",children:e.jsx("div",{className:"glass rounded-xl sm:rounded-2xl p-3 sm:p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-bold",children:"âœ“"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium text-sm sm:text-base",children:"Authentication Active"}),e.jsx("p",{className:"text-green-300 text-xs sm:text-sm",children:"Your generated images are automatically saved to your history!"})]})]})})}),e.jsx(xe,{ref:o,onGenerate:u,isGenerating:a}),e.jsx(fe,{ref:y,images:t}),e.jsx(Tt,{})]})]})},Ft=c.lazy(()=>O(()=>import("./MyImagesPage-CV5htoC1.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ut=c.lazy(()=>O(()=>import("./ProfilePage-CLPWGTeZ.js"),__vite__mapDeps([6,1,2,3,4,5]))),Lt=c.lazy(()=>O(()=>import("./AuthConfirmPage-CPvgaQIQ.js"),__vite__mapDeps([7,1,2,3,4,5]))),Dt=c.lazy(()=>O(()=>import("./ResetPasswordPage-CNqLxkL6.js"),__vite__mapDeps([8,1,2,3,4,5])));function $t(){return T.includes("YOUR_CLERK_PUBLISHABLE_KEY")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Please add your Clerk publishable key to the .env file to enable authentication."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 text-left",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})})]})}):e.jsx(Ue,{publishableKey:T,routerPush:t=>{window.history.pushState(null,"",t),window.dispatchEvent(new CustomEvent("clerk:navigate",{detail:t}))},routerReplace:t=>{window.history.replaceState(null,"",t),window.dispatchEvent(new CustomEvent("clerk:navigate",{detail:t}))},children:e.jsx(xt,{children:e.jsxs(Ce,{children:[e.jsxs(Ee,{children:[e.jsx(_,{path:"/",element:e.jsx(D,{})}),e.jsx(_,{path:"/sign-in",element:e.jsx(D,{})}),e.jsx(_,{path:"/sign-up",element:e.jsx(D,{})}),e.jsx(_,{path:"/factor-one",element:e.jsx(D,{})}),e.jsx(_,{path:"/my-images",element:e.jsx(c.Suspense,{fallback:null,children:e.jsx(Ft,{})})}),e.jsx(_,{path:"/profile",element:e.jsx(c.Suspense,{fallback:null,children:e.jsx(Ut,{})})}),e.jsx(_,{path:"/auth/confirm",element:e.jsx(c.Suspense,{fallback:null,children:e.jsx(Lt,{})})}),e.jsx(_,{path:"/reset-password",element:e.jsx(c.Suspense,{fallback:null,children:e.jsx(Dt,{})})})]}),e.jsx(pt,{})]})})})}const pe=document.getElementById("root");if(!pe)throw new Error("Root element not found");const Bt=gt.createRoot(pe);Bt.render(e.jsxs(c.StrictMode,{children:[e.jsx($t,{}),e.jsx(mt,{})]}));export{oe as P,z as a,F as b,yt as c,jt as d,Nt as e,vt as g,e as j,St as u};
