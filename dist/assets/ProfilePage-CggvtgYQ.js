import{a as re,b as le,g as ie,c as oe,d as ne,e as de,j as e,P as ce}from"./index-BcwWYJOa.js";import{u as me,r as i}from"./vendor-router-B0usbLSA.js";import{A as E,c as m,v as ue,M as U,w as b,E as R,x as Y}from"./vendor-utils-CjA-DQXP.js";import"./vendor-react-CA82q7Og.js";import"./vendor-supabase-l0Uqy5La.js";import"./vendor-clerk-TSkbXxwZ.js";const we=()=>{const u=me(),{user:x,isConfigured:T,updateProfile:$,updateEmail:z,verifyEmailUpdate:B,updatePassword:D,updateProfileImage:G}=re(),{showSuccess:h,showError:f,showInfo:L}=le(),[w,S]=i.useState(""),[d,C]=i.useState(""),[p,k]=i.useState(""),[I,F]=i.useState(""),[N,A]=i.useState(""),[M,V]=i.useState(!1),[_,q]=i.useState(""),[j,H]=i.useState(!1),[v,O]=i.useState(!1),[r,o]=i.useState({profile:!1,email:!1,password:!1,image:!1}),[l,c]=i.useState({fullName:"",email:"",newPassword:"",confirmPassword:""}),y=ie(x),g=oe(x),P=ne(x),J=de(x);i.useEffect(()=>{y&&(S(P||""),C(g||""),q(J||""))},[y]);const K=s=>s.trim()?s.trim().length<2?"Full name must be at least 2 characters":"":"Full name is required",W=s=>s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?"":"Please enter a valid email address":"Email is required",Q=s=>s?s.length<6?"Password must be at least 6 characters":"":"Password is required",X=(s,a)=>a?s!==a?"Passwords do not match":"":"Please confirm your password",Z=async s=>{if(y){o(a=>({...a,image:!0}));try{const t=(await G(s))?.user?.imageUrl||_;q(t),h("Profile Image Updated","Your profile image has been updated successfully.")}catch(a){f("Upload Failed",a instanceof Error?a.message:"Failed to upload profile image.")}finally{o(a=>({...a,image:!1}))}}},ee=async s=>{s.preventDefault();const a=K(w);if(a){c(t=>({...t,fullName:a}));return}c(t=>({...t,fullName:""})),o(t=>({...t,profile:!0}));try{await $({full_name:w}),h("Profile Updated","Your profile information has been updated successfully.")}catch(t){f("Update Failed",t instanceof Error?t.message:"Failed to update profile.")}finally{o(t=>({...t,profile:!1}))}},se=async s=>{s.preventDefault();const a=W(d);if(a){c(t=>({...t,email:a}));return}if(d===g){L("No Changes","The email address is the same as your current email.");return}c(t=>({...t,email:""})),o(t=>({...t,email:!0}));try{await z(d),h("Email Update Initiated","Please check your new email address for a verification code to confirm the change."),V(!0)}catch(t){f("Email Update Failed",t instanceof Error?t.message:"Failed to update email address.")}finally{o(t=>({...t,email:!1}))}},ae=async s=>{if(s.preventDefault(),!!N.trim()){o(a=>({...a,email:!0}));try{await B(d,N.trim()),h("Email Updated","Your email address has been verified and set as primary."),V(!1),A("")}catch(a){f("Verification Failed",a instanceof Error?a.message:"Failed to verify the new email address.")}finally{o(a=>({...a,email:!1}))}}},te=async s=>{s.preventDefault();const a=Q(p),t=X(p,I);if(a||t){c(n=>({...n,newPassword:a,confirmPassword:t}));return}c(n=>({...n,newPassword:"",confirmPassword:""})),o(n=>({...n,password:!0}));try{await D(p),k(""),F(""),h("Password Updated","Your password has been changed successfully.")}catch(n){f("Password Update Failed",n instanceof Error?n.message:"Failed to update password.")}finally{o(n=>({...n,password:!1}))}};return T?x?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"glass border-b border-white/20 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>u("/"),className:"glass glass-hover rounded-xl p-3 text-gray-400 hover:text-white transition-colors",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(m,{className:"w-8 h-8"}),"Profile Settings"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your account information and preferences"})]})]})})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Profile Image"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(ce,{imageUrl:_,fullName:P,email:g,size:"xl",editable:!0,onImageChange:Z,loading:r.image}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:P||"User"}),e.jsx("p",{className:"text-gray-400 mb-4",children:g}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Click on your profile image to upload a new one. ",e.jsx("br",{}),"Supported formats: JPEG, PNG, WebP (max 5MB)"]})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Profile Information"}),e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:w,onChange:s=>S(s.target.value),className:`w-full pl-10 pr-4 py-3 glass rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 ${l.fullName?"focus:ring-red-500 border-red-500":"focus:ring-blue-500"}`,placeholder:"Enter your full name"})]}),l.fullName&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.fullName})]}),e.jsxs("button",{type:"submit",disabled:r.profile,className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.profile?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(ue,{className:"w-5 h-5"}),r.profile?"Updating...":"Update Profile"]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Email Address"}),e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:d,onChange:s=>C(s.target.value),className:`w-full pl-10 pr-4 py-3 glass rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 ${l.email?"focus:ring-red-500 border-red-500":"focus:ring-blue-500"}`,placeholder:"Enter your email address"})]}),l.email&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.email}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Changing your email will require verification with a code sent to your new email address."})]}),e.jsxs("button",{type:"submit",disabled:r.email,className:"flex items-center gap-2 bg-gradient-to-r from-green-500 to-teal-600 text-white px-6 py-3 rounded-xl font-medium hover:from-green-600 hover:to-teal-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.email?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(U,{className:"w-5 h-5"}),r.email?"Updating...":"Update Email"]})]}),M&&e.jsxs("form",{onSubmit:ae,className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Verification Code (sent to ",d,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:N,onChange:s=>A(s.target.value),className:"w-full pl-10 pr-4 py-3 glass rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the code from your email"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter the 6-digit code you received to confirm your new email address."})]}),e.jsxs("button",{type:"submit",disabled:r.email,className:"flex items-center gap-2 bg-gradient-to-r from-green-500 to-teal-600 text-white px-6 py-3 rounded-xl font-medium hover:from-green-600 hover:to-teal-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.email?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(U,{className:"w-5 h-5"}),r.email?"Verifying...":"Verify Email"]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Change Password"}),e.jsxs("form",{onSubmit:te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:j?"text":"password",value:p,onChange:s=>k(s.target.value),className:`w-full pl-10 pr-12 py-3 glass rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 ${l.newPassword?"focus:ring-red-500 border-red-500":"focus:ring-blue-500"}`,placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>H(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:j?e.jsx(R,{className:"w-5 h-5"}):e.jsx(Y,{className:"w-5 h-5"})})]}),l.newPassword&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:v?"text":"password",value:I,onChange:s=>F(s.target.value),className:`w-full pl-10 pr-12 py-3 glass rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 ${l.confirmPassword?"focus:ring-red-500 border-red-500":"focus:ring-blue-500"}`,placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>O(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:v?e.jsx(R,{className:"w-5 h-5"}):e.jsx(Y,{className:"w-5 h-5"})})]}),l.confirmPassword&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.confirmPassword})]}),e.jsxs("button",{type:"submit",disabled:r.password,className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-pink-600 text-white px-6 py-3 rounded-xl font-medium hover:from-red-600 hover:to-pink-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.password?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(b,{className:"w-5 h-5"}),r.password?"Updating...":"Change Password"]})]})]})]})})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"glass border-b border-white/20 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>u("/"),className:"glass glass-hover rounded-xl p-3 text-gray-400 hover:text-white transition-colors",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(m,{className:"w-8 h-8"}),"Profile Settings"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Please sign in to access your profile"})]})]})})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[e.jsx(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Sign In Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"You need to be signed in to access your profile settings and manage your account."}),e.jsx("button",{onClick:()=>u("/"),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Go Home to Sign In"})]})})})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"glass border-b border-white/20 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>u("/"),className:"glass glass-hover rounded-xl p-3 text-gray-400 hover:text-white transition-colors",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(m,{className:"w-8 h-8"}),"Profile Settings"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Authentication configuration required"})]})]})})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[e.jsx(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Authentication Not Configured"}),e.jsx("p",{className:"text-gray-300 mb-6 max-w-2xl mx-auto",children:"To access profile settings and other authenticated features, you need to configure Supabase authentication. Please set up your Supabase project and add the required environment variables."}),e.jsxs("div",{className:"glass rounded-xl p-6 mb-6 text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Required Environment Variables:"}),e.jsxs("div",{className:"space-y-2 font-mono text-sm",children:[e.jsx("div",{className:"text-blue-300",children:"VITE_SUPABASE_URL=your_supabase_url"}),e.jsx("div",{className:"text-blue-300",children:"VITE_SUPABASE_ANON_KEY=your_supabase_anon_key"})]})]}),e.jsx("button",{onClick:()=>u("/"),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Go Back to Home"})]})})})]})]})};export{we as default};
