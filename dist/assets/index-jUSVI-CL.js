const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MyImagesPage-DNX520tF.js","assets/vendor-router-B0usbLSA.js","assets/vendor-react-CA82q7Og.js","assets/vendor-utils-CbZ2wFIe.js","assets/vendor-supabase-l0Uqy5La.js","assets/vendor-clerk-TSkbXxwZ.js","assets/ProfilePage-Ea_4TGvJ.js","assets/AuthConfirmPage-C_HPmHfI.js","assets/ResetPasswordPage-rYd3N6LU.js"])))=>i.map(i=>d[i]);
import{r as pe,a as we}from"./vendor-react-CA82q7Og.js";import{r as d,a as be,R as ve,u as ye,B as je,b as Ne,c as C}from"./vendor-router-B0usbLSA.js";import{c as W,_ as O}from"./vendor-supabase-l0Uqy5La.js";import{o as Se,u as ne,a as Ie,r as ke,S as Ee,b as Ce,C as Pe}from"./vendor-clerk-TSkbXxwZ.js";import{X as D,I as J,T as Re,C as ie,a as _e,b as $e,U as oe,c as L,d as le,e as Ae,H as Te,L as Ue,S as K,Z as ce,f as Fe,g as B,W as H,h as De,i as Le,j as Be,R as M,k as Me,D as Oe,l as Ge,m as ze,n as He,G as Ye,o as We}from"./vendor-utils-CbZ2wFIe.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Y={exports:{}},R={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q;function Ve(){if(q)return R;q=1;var t=pe(),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(g,w,b){var p,h={},l=null,u=null;b!==void 0&&(l=""+b),w.key!==void 0&&(l=""+w.key),w.ref!==void 0&&(u=w.ref);for(p in w)s.call(w,p)&&!i.hasOwnProperty(p)&&(h[p]=w[p]);if(g&&g.defaultProps)for(p in w=g.defaultProps,w)h[p]===void 0&&(h[p]=w[p]);return{$$typeof:r,type:g,key:l,ref:u,props:h,_owner:n.current}}return R.Fragment=a,R.jsx=o,R.jsxs=o,R}var Z;function Je(){return Z||(Z=1,Y.exports=Ve()),Y.exports}var e=Je(),X={},Ke="@vercel/speed-insights",qe="1.2.0",Ze=()=>{window.si||(window.si=function(...r){(window.siq=window.siq||[]).push(r)})};function Xe(){return typeof window<"u"}function Qe(){try{const t="production"}catch{}return"production"}function de(){return Qe()==="development"}function et(t){return t.scriptSrc?t.scriptSrc:de()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function tt(t={}){var r;if(!Xe()||t.route===null)return null;Ze();const a=et(t);if(document.head.querySelector(`script[src*="${a}"]`))return null;t.beforeSend&&((r=window.si)==null||r.call(window,"beforeSend",t.beforeSend));const s=document.createElement("script");return s.src=a,s.defer=!0,s.dataset.sdkn=Ke+(t.framework?`/${t.framework}`:""),s.dataset.sdkv=qe,t.sampleRate&&(s.dataset.sampleRate=t.sampleRate.toString()),t.route&&(s.dataset.route=t.route),t.endpoint?s.dataset.endpoint=t.endpoint:t.basePath&&(s.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(s.dataset.dsn=t.dsn),de()&&t.debug===!1&&(s.dataset.debug="false"),s.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${a}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(s),{setRoute:n=>{s.dataset.route=n??void 0}}}function rt(){if(!(typeof process>"u"||typeof X>"u"))return X.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function st(t){d.useEffect(()=>{var a;t.beforeSend&&((a=window.si)==null||a.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const r=d.useRef(null);return d.useEffect(()=>{if(r.current)t.route&&r.current(t.route);else{const a=tt({framework:t.framework??"react",basePath:t.basePath??rt(),...t});a&&(r.current=a.setRoute)}},[t.route]),null}var U={},Q;function at(){if(Q)return U;Q=1;var t=we();return U.createRoot=t.createRoot,U.hydrateRoot=t.hydrateRoot,U}var nt=at();const ue=d.createContext(void 0),it=({children:t})=>{const[r,a]=d.useState([]),s=d.useCallback(()=>`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,[]),n=d.useCallback(l=>{a(u=>u.filter(m=>m.id!==l))},[]),i=d.useCallback(l=>{const u=s(),m={id:u,duration:5e3,...l};return a(c=>[...c,m]),m.duration&&m.duration>0&&setTimeout(()=>{n(u)},m.duration),u},[s,n]),o=d.useCallback(()=>{a([])},[]),g=d.useCallback((l,u,m)=>i({type:"success",title:l,message:u,...m}),[i]),w=d.useCallback((l,u,m)=>i({type:"error",title:l,message:u,duration:7e3,...m}),[i]),b=d.useCallback((l,u,m)=>i({type:"warning",title:l,message:u,duration:6e3,...m}),[i]),p=d.useCallback((l,u,m)=>i({type:"info",title:l,message:u,...m}),[i]),h={toasts:r,addToast:i,removeToast:n,clearAllToasts:o,showSuccess:g,showError:w,showWarning:b,showInfo:p};return e.jsx(ue.Provider,{value:h,children:t})},T=()=>{const t=d.useContext(ue);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},ot=({toast:t,onRemove:r})=>{const[a,s]=d.useState(!1),[n,i]=d.useState(!1);d.useEffect(()=>{const l=setTimeout(()=>s(!0),50);return()=>clearTimeout(l)},[]);const o=()=>{i(!0),setTimeout(()=>r(t.id),300)},[g,w]=d.useState(100);d.useEffect(()=>{if(!t.duration||t.duration<=0)return;const l=setInterval(()=>{w(u=>{const m=100/t.duration*100;return Math.max(0,u-m)})},100);return()=>clearInterval(l)},[t.duration]);const b=()=>{const l="relative overflow-hidden glass border-l-4";switch(t.type){case"success":return`${l} border-green-500 bg-green-500/10`;case"error":return`${l} border-red-500 bg-red-500/10`;case"warning":return`${l} border-yellow-500 bg-yellow-500/10`;case"info":return`${l} border-blue-500 bg-blue-500/10`;default:return`${l} border-gray-500 bg-gray-500/10`}},p=()=>{const l="w-5 h-5";switch(t.type){case"success":return e.jsx(_e,{className:`${l} text-green-400`});case"error":return e.jsx(ie,{className:`${l} text-red-400`});case"warning":return e.jsx(Re,{className:`${l} text-yellow-400`});case"info":return e.jsx(J,{className:`${l} text-blue-400`});default:return e.jsx(J,{className:`${l} text-gray-400`})}},h=()=>{switch(t.type){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":return"bg-blue-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:`
        rounded-xl p-4 max-w-sm w-full transition-all duration-300 transform
        ${b()}
        ${a&&!n?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}
      `,role:"alert","aria-live":"polite",children:[t.duration&&t.duration>0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/10",children:e.jsx("div",{className:`h-full transition-all duration-100 linear ${h()}`,style:{width:`${g}%`}})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:p()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-medium text-sm leading-5",children:t.title}),t.message&&e.jsx("p",{className:"text-gray-300 text-sm mt-1 leading-5",children:t.message}),t.action&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:t.action.onClick,className:"text-sm font-medium text-blue-400 hover:text-blue-300 transition-colors duration-200",children:t.action.label})})]}),e.jsx("button",{onClick:o,className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-lg hover:bg-white/10","aria-label":"Close notification",children:e.jsx(D,{className:"w-4 h-4"})})]})]})},lt=()=>{const{toasts:t,removeToast:r}=T(),a=e.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-3 pointer-events-none",children:t.map(s=>e.jsx("div",{className:"pointer-events-auto",children:e.jsx(ot,{toast:s,onRemove:r})},s.id))});return t.length===0||typeof document>"u"?null:be.createPortal(a,document.body)},_="pk_test_YWJsZS1saW9uLTI5LmNsZXJrLmFjY291bnRzLmRldiQ",me=()=>!_.includes("YOUR_CLERK_PUBLISHABLE_KEY")&&_.startsWith("pk_"),ee=me()?new Se(_):null,he=async()=>{try{const t=window?.Clerk;if(t?.session){const r=await t.session.getToken({template:"supabase"});if(r)return r}if(ee?.session){const r=await ee.session.getToken({template:"supabase"});if(r)return r}return null}catch{return null}};class ct{static BACKUP_IMAGES={"1:1":["https://picsum.photos/512/512?random=1","https://picsum.photos/512/512?random=2","https://picsum.photos/512/512?random=3","https://picsum.photos/512/512?random=4"],"16:9":["https://picsum.photos/768/432?random=5","https://picsum.photos/768/432?random=6","https://picsum.photos/768/432?random=7","https://picsum.photos/768/432?random=8"],"4:3":["https://picsum.photos/640/480?random=9","https://picsum.photos/640/480?random=10","https://picsum.photos/640/480?random=11","https://picsum.photos/640/480?random=12"]};static getImageDimensions(r="1:1"){switch(r){case"16:9":return{width:1024,height:576};case"4:3":return{width:1024,height:768};case"1:1":default:return{width:1024,height:1024}}}static async generateImage(r){if(r.sourceImage)return this.generateImageToImage(r);try{const a="https://image.pollinations.ai/prompt";let s=r.prompt;r.style==="vivid"?s+=", hyperrealistic, vibrant colors, dramatic lighting, high contrast, detailed":r.style==="natural"&&(s+=", natural lighting, realistic, soft colors, photographic style");const n=r.aspectRatio||"1:1";n==="16:9"?s+=", wide landscape composition, cinematic framing":n==="4:3"&&(s+=", classic composition, balanced framing");const i=encodeURIComponent(s),o=this.getImageDimensions(n),g=Math.floor(Math.random()*1e6),w=[`${a}/${i}?width=${o.width}&height=${o.height}&seed=${g}&enhance=true&nologo=true`,`${a}/${i}?width=${o.width}&height=${o.height}&seed=${g}`,`${a}/${i}?width=${o.width}&height=${o.height}`,`${a}/${i}`,`${a}/${encodeURIComponent(r.prompt)}?width=${o.width}&height=${o.height}`,`${a}/${encodeURIComponent(r.prompt)}`];let b="",p=null;for(const l of w)try{const u=new AbortController,m=setTimeout(()=>u.abort(),1e4),c=await fetch(l,{signal:u.signal,method:"GET"});if(clearTimeout(m),!c.ok)throw new Error(`Pollinations service returned ${c.status}`);const f=c.headers.get("content-type");if(!f||!f.startsWith("image/"))throw new Error(`Pollinations service returned non-image content: ${f}`);const N=c.headers.get("content-length");if(N&&parseInt(N)===0)throw new Error("Pollinations service returned empty image");b=l;break}catch(u){p=u,console.warn(`URL format failed: ${l}`,u);continue}if(!b)throw p||new Error("All Pollinations URL formats failed");return{id:`pollinations_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:b,prompt:r.prompt,timestamp:new Date,aspectRatio:n}}catch(a){console.warn("Pollinations AI failed, trying alternative service:",a);try{return await this.generateWithAlternativeService(r)}catch(s){return console.warn("Alternative service failed, using demo images:",s),this.generateDemoImage(r)}}}static async generateWithAlternativeService(r){try{const a=this.getImageDimensions(r.aspectRatio),s=`https://picsum.photos/${a.width}/${a.height}?random=${Math.floor(Math.random()*1e3)}`,n=await fetch(s,{method:"HEAD"});if(!n.ok)throw new Error(`Alternative service returned ${n.status}`);return{id:`alternative_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:s,prompt:r.prompt,timestamp:new Date,aspectRatio:r.aspectRatio||"1:1"}}catch(a){throw console.warn("Alternative service failed:",a),new Error("Alternative service failed")}}static async generateDemoImage(r){await new Promise(o=>setTimeout(o,1500+Math.random()*500));const a=r.aspectRatio||"1:1",s=this.BACKUP_IMAGES[a],n=Math.floor(Math.random()*s.length),i=s[n];try{const o=await fetch(i,{method:"HEAD"});if(!o.ok)throw new Error(`Demo image service returned ${o.status}`)}catch(o){console.warn("Demo image failed, using fallback URL:",o);const g=this.getImageDimensions(a),w=`https://picsum.photos/${g.width}/${g.height}?random=${Math.floor(Math.random()*1e3)}`;return{id:`demo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:w,prompt:r.prompt,timestamp:new Date,aspectRatio:a}}return{id:`demo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:i,prompt:r.prompt,timestamp:new Date,aspectRatio:a}}static async generateImageToImage(r){try{console.log("Starting image-to-image generation with source:",r.sourceImage instanceof File?"File":"URL");const a=r.aspectRatio||"1:1",s=r.strength||.7;let n=r.prompt;s<.3?n+=", subtle modifications, maintain original composition and style":s<.7?n+=", moderate changes, inspired by reference image":n+=", creative interpretation, transform style significantly",r.style==="vivid"?n+=", hyperrealistic, vibrant colors, dramatic lighting, high contrast, detailed":r.style==="natural"&&(n+=", natural lighting, realistic, soft colors, photographic style"),n+=", based on reference image, similar composition";const i="https://image.pollinations.ai/prompt",o=encodeURIComponent(n),g=this.getImageDimensions(a),w=Math.floor(Math.random()*1e6),b=[`${i}/${o}?width=${g.width}&height=${g.height}&seed=${w}&enhance=true`,`${i}/${o}?width=${g.width}&height=${g.height}&seed=${w}`,`${i}/${o}?width=${g.width}&height=${g.height}`];let p="",h=null;for(const u of b)try{const m=new AbortController,c=setTimeout(()=>m.abort(),1e4),f=await fetch(u,{signal:m.signal,method:"GET"});if(clearTimeout(c),!f.ok)throw new Error(`Service returned ${f.status}`);const N=f.headers.get("content-type");if(!N||!N.startsWith("image/"))throw new Error(`Non-image content: ${N}`);p=u;break}catch(m){h=m;continue}if(!p)throw h||new Error("All image generation attempts failed");const l={id:`img2img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:p,prompt:r.prompt,timestamp:new Date,aspectRatio:a};return console.log("Image-to-image generation successful:",l.id),l}catch(a){console.warn("Image-to-image generation failed, falling back to text-to-image:",a);const s={prompt:`${r.prompt}, creative interpretation of uploaded reference image`,style:r.style,aspectRatio:r.aspectRatio};return this.generateImage(s)}}}const $="https://dxljyzvwolnbdreewbvs.supabase.co",A="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR4bGp5enZ3b2xuYmRyZWV3YnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyNTY0OTksImV4cCI6MjA3MjgzMjQ5OX0.hzNFBkxNMS6BwToieigRze1GEq_OSpzrXJpH92o0ouU",V=()=>!$.includes("YOUR_SUPABASE_URL")&&!A.includes("YOUR_SUPABASE_ANON_KEY")&&!$.includes("API_KEY_ADDED"),dt=()=>V()?W($,A,{global:{fetch:async(t,r={})=>{const a=await he();r.headers={apikey:A,...r.headers};const s=t.toString();if(s.includes("/rest/v1/"))(r.headers||{})["Content-Type"]||(r.headers={...r.headers,"Content-Type":"application/json"});else if(s.includes("/storage/v1/object/")){const n=r.headers||{};r.body&&!n["Content-Type"]&&(r.headers={...r.headers,"Content-Type":"application/json"})}if(a?(r.headers={...r.headers,Authorization:`Bearer ${a}`},console.log("Supabase request with token:",a.substring(0,50)+"...")):console.warn("No Clerk token available for Supabase request"),s.includes("/storage/v1/object/")&&console.log("Storage API request:",{url:s,method:r.method,headers:r.headers,body:r.body}),s.includes("/storage/v1/object/")&&r.body)try{if(typeof r.body=="string"){const n=JSON.parse(r.body);r.body=JSON.stringify(n)}}catch(n){console.warn("Failed to parse storage request body:",n)}return fetch(t,r)}}}):null,P=dt(),ut=()=>V()?W($,A):null,te=ut(),re=async()=>{if(!te)return null;const t=await he();return console.log("Getting authenticated storage client, token available:",!!t),t?W($,A,{global:{headers:{Authorization:`Bearer ${t}`}}}):te},mt=t=>t?.id||null,ht=t=>t?.emailAddresses?.[0]?.emailAddress||void 0,gt=t=>t?.fullName||void 0,ft=t=>t?.imageUrl||void 0,G=()=>{const{user:t,isLoaded:r,isSignedIn:a}=ne(),s=Ie(),[n,i]=d.useState(!0),[o,g]=d.useState(!1),w=t?{id:t.id,emailAddresses:t.emailAddresses.map(v=>({emailAddress:v.emailAddress})),firstName:t.firstName,lastName:t.lastName,imageUrl:t.imageUrl,fullName:t.fullName}:null;return d.useEffect(()=>{const v=me()&&V();g(v),r&&i(!1)},[r]),{user:w,loading:n||!r,isConfigured:o,isSignedIn:!!a,signIn:async(v,y)=>{if(!o)throw new Error("Authentication not configured");try{const j=await s.client.signIn.create({identifier:v,password:y});if(j.status==="complete")return await s.setActive({session:j.createdSessionId}),{user:j};throw new Error("Sign in incomplete")}catch(j){throw new Error(j.message||"Sign in failed")}},signUp:async(v,y,j)=>{if(!o)throw new Error("Authentication not configured");try{const[S,...I]=(j||"").split(" "),k=I.join(" "),x=await s.client.signUp.create({emailAddress:v,password:y,firstName:S||void 0,lastName:k||void 0});return await x.prepareEmailAddressVerification({strategy:"email_code"}),{user:x,needsVerification:!0}}catch(S){throw new Error(S.message||"Sign up failed")}},signOut:async()=>{if(o)try{await s.signOut(),(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")}catch(v){throw new Error(v.message||"Sign out failed")}},resetPassword:async v=>{if(!o)throw new Error("Authentication not configured");try{await s.client.signIn.create({identifier:v,strategy:"reset_password_email_code"})}catch(y){throw new Error(y.message||"Password reset failed")}},updateProfile:async v=>{if(!o)throw new Error("Authentication not configured");if(!w)throw new Error("No user logged in");try{const y={};if(v.full_name){const[j,...S]=v.full_name.split(" ");y.firstName=j,y.lastName=S.join(" ")}return await t?.update(y),{user:t}}catch(y){throw new Error(y.message||"Profile update failed")}},updateProfileImage:async v=>{if(!o)throw new Error("Authentication not configured");if(!s.user)throw new Error("No user logged in");try{return await s.user.setProfileImage({file:v}),{user:s.user}}catch(y){throw new Error(y.message||"Profile image update failed")}},updateEmail:async(v,y)=>{if(!o)throw new Error("Authentication not configured");if(!w)throw new Error("No user logged in");try{if(y){const S=t?.emailAddresses?.[0]?.emailAddress;if(!S)throw new Error("Current email not found");const I=await s.client.signIn.create({identifier:S,password:y});if(I.status==="complete")await s.setActive({session:I.createdSessionId});else throw new Error("Re-authentication failed")}const j=await t?.createEmailAddress({email:v});if(!j)throw new Error("Failed to create new email address");return await j.prepareVerification({strategy:"email_code"}),{user:t}}catch(j){throw new Error(j.message||"Email update failed")}},verifyEmailUpdate:async(v,y)=>{if(!o)throw new Error("Authentication not configured");if(!t)throw new Error("No user logged in");try{const j=t.emailAddresses.find(S=>S.emailAddress===v);if(!j)throw new Error("New email not found on account");return await j.attemptVerification({code:y}),await t.update({primaryEmailAddressId:j.id}),{user:t}}catch(j){throw new Error(j.message||"Email verification failed")}},updatePassword:async v=>{if(!o)throw new Error("Authentication not configured");if(!w)throw new Error("No user logged in");try{return await t?.updatePassword({newPassword:v}),{user:t}}catch(y){throw new Error(y.message||"Password update failed")}}}},xt=()=>{const[t,r]=d.useState([]),[a,s]=d.useState(!1),{user:n,isConfigured:i}=G(),o=mt(n),g=d.useCallback(async()=>{if(!(!i||!o||!P)){s(!0);try{const{data:h,error:l}=await P.from("saved_images").select("*").eq("user_id",o).order("created_at",{ascending:!1});if(l)throw console.error("Fetch saved images error:",l),l;const u=(h||[]).filter(m=>!m||typeof m!="object"||!m.id?(console.warn("Invalid image data found:",m),!1):!0);console.log("Valid images loaded:",u.length,"out of",(h||[]).length),r(u)}catch(h){console.error("Fetch saved images error:",h)}finally{s(!1)}}},[i,o]);return d.useEffect(()=>{o&&i?g():r([])},[o,i,g]),{savedImages:t,loading:a,saveImage:async(h,l,u,m)=>{if(!i||!o||!P)return null;try{const c=await fetch(l);if(!c.ok)throw console.error(`Failed to fetch generated image for saving. Status: ${c.status}, URL: ${l}`),new Error(`Failed to fetch generated image for saving. Status: ${c.status}`);const f=await c.blob();if(!f.type.startsWith("image/"))throw console.error(`Generated image is not a valid image type: ${f.type}, URL: ${l}`),new Error(`Generated image is not a valid image type: ${f.type}`);if(f.size===0)throw console.error(`Generated image is empty (0 bytes), URL: ${l}`),new Error("Generated image is empty (0 bytes). The image generation service may be experiencing issues. Please try again.");const N=f.type.split("/")[1]||"jpg",v=`${Date.now()}.${N}`,y=`${o}/${v}`,j=await re(),{error:S}=await j?.storage.from("generated_images").upload(y,f,{cacheControl:"3600",upsert:!1,contentType:f.type||"image/jpeg"})||{error:new Error("Storage client not available")};if(S)throw S;const{data:{publicUrl:I}}=j?.storage.from("generated_images").getPublicUrl(y)||{data:{publicUrl:""}};if(!I)throw new Error("Failed to get public URL for the uploaded image.");const k={user_id:o,prompt:h,image_url:I,aspect_ratio:u,style:m,is_favorite:!1,storage_file_path:y},{data:x,error:E}=await P.from("saved_images").insert([k]).select().single();if(E)throw console.error("Database insert error:",E),E;return x&&typeof x=="object"&&x.id&&r(z=>[x,...z]),x}catch(c){return console.error("Save image error:",c),null}},deleteImage:async h=>{if(!(!i||!o||!P))try{const l=t.find(c=>c.id===h);if(!l)return;let u=l.storage_file_path;if(!u){const c=l.image_url.split("/"),f=c.indexOf("generated_images");f!==-1&&(u=c.slice(f+1).join("/"))}if(u&&u.includes("undefined")&&(console.warn("Invalid file path detected, skipping storage deletion:",u),u=null),u)try{const c=u.startsWith("/")?u.slice(1):u;console.log("Attempting to delete file from storage:",c),console.log("File path details:",{original:u,cleaned:c,userId:o});const f=await re(),{data:N,error:v}=await f?.storage.from("generated_images").remove([c])||{data:null,error:new Error("Storage client not available")};console.log("Storage deletion response:",{removeData:N,storageError:v}),v?console.warn("Storage deletion failed:",v):console.log("Successfully deleted file from storage:",c)}catch(c){console.warn("Storage deletion error:",c)}else console.warn("No file path available for storage deletion");const{error:m}=await P.from("saved_images").delete().eq("id",h).eq("user_id",o);if(m)throw m;r(c=>c.filter(f=>f.id!==h))}catch(l){throw l}},toggleFavorite:async h=>{if(!(!i||!o||!P))try{const l=t.find(f=>f.id===h);if(!l){console.warn("Image not found for favorite toggle:",h);return}const u=!l.is_favorite;console.log("Toggling favorite for image:",h,"from",l.is_favorite,"to",u);const{data:m,error:c}=await P.from("saved_images").update({is_favorite:u}).eq("id",h).eq("user_id",o).select().single();if(c)throw console.error("Error updating favorite status:",c),c;console.log("Database update successful, received data:",m),r(f=>f.map(N=>N.id===h?m&&typeof m=="object"&&m.id?(console.log("Updating image with database data:",m),m):(console.log("Updating image locally with new favorite status"),{...N,is_favorite:u}):N))}catch(l){throw console.error("Toggle favorite error:",l),l}},refreshImages:g}},se=({imageUrl:t,fullName:r,email:a,size:s="md",editable:n=!1,onImageChange:i,loading:o=!1})=>{const[g,w]=d.useState(!1),p={sm:{container:"w-8 h-8",icon:"w-3 h-3",text:"text-xs"},md:{container:"w-12 h-12",icon:"w-5 h-5",text:"text-sm"},lg:{container:"w-20 h-20",icon:"w-8 h-8",text:"text-lg"},xl:{container:"w-32 h-32",icon:"w-12 h-12",text:"text-2xl"}}[s],h=()=>r?r.split(" ").map(c=>c.charAt(0).toUpperCase()).slice(0,2).join(""):a?a.charAt(0).toUpperCase():"U",l=c=>{const f=c.target.files?.[0];if(f&&i){if(!f.type.startsWith("image/")||f.size>5*1024*1024)return;i(f)}},u=()=>{w(!0)};ve.useEffect(()=>{w(!1)},[t]);const m=()=>{if(o)return e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("div",{className:"w-1/2 h-1/2 rounded-full bg-white/20"})});if(t&&!g)return e.jsx("img",{src:t,alt:r||"Profile",onError:u,className:"w-full h-full object-cover"});const c=h();return c&&c!=="U"?e.jsx("span",{className:`font-semibold text-white ${p.text}`,children:c}):e.jsx(L,{className:`text-white ${p.icon}`})};return n?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`
          ${p.container} 
          rounded-full 
          bg-gradient-to-r from-blue-500 to-purple-600 
          flex items-center justify-center 
          overflow-hidden 
          border-2 border-white/20
          cursor-pointer
          group
          hover:scale-105
          transition-all duration-200
        `,children:[m(),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:e.jsx($e,{className:"w-1/3 h-1/3 text-white"})})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:l,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:o}),n&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(oe,{className:"w-3 h-3 text-white"})})]}):e.jsx("div",{className:`
      ${p.container} 
      rounded-full 
      bg-gradient-to-r from-blue-500 to-purple-600 
      flex items-center justify-center 
      overflow-hidden 
      border-2 border-white/20
    `,children:m()})},pt=({onShowAuth:t})=>{const[r,a]=d.useState(!1),{user:s,signOut:n,isConfigured:i}=G(),{showSuccess:o,showError:g}=T(),w=ye(),b=async()=>{try{await n(),a(!1),o("Signed Out Successfully","You have been signed out of your account.")}catch{g("Sign Out Failed","An error occurred while signing out. Please try again.")}},p=()=>{w("/my-images"),a(!1)},h=()=>{w("/profile"),a(!1)},l=()=>{s||t()};if(!i)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:t,className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Connect Auth"})]})});if(!s)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:l,className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]})});const u=gt(s),m=ht(s),c=ft(s);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!r),className:"glass glass-hover rounded-xl px-4 py-2 flex items-center gap-2 text-white hover:text-blue-300 transition-all duration-300",children:[e.jsx(se,{imageUrl:c,fullName:u,email:m,size:"sm"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:u||m?.split("@")[0]||"User"}),e.jsx(le,{className:`w-4 h-4 transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-64 glass rounded-xl border border-white/20 z-20",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"px-3 py-3 border-b border-white/10 mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{imageUrl:c,fullName:u,email:m,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:u||"User"}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:m})]})]})}),e.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(Ae,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:p,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(Te,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"My Images"})]}),e.jsx("hr",{className:"border-white/10 my-2"}),e.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all duration-200",children:[e.jsx(Ue,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Sign Out"})]})]})})]})]})};var wt=ke();const ae={baseTheme:wt.dark,elements:{formButtonPrimary:"bg-blue-600 hover:bg-blue-700 text-white transition-colors",card:"bg-gray-900 border-gray-700 shadow-2xl relative",headerTitle:"text-white font-bold",headerSubtitle:"text-gray-300",socialButtonsBlockButton:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 transition-colors",socialButtonsBlockButtonText:"text-white",formFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formFieldLabel:"text-gray-300 font-medium",identityPreviewText:"text-gray-300",formFieldHintText:"text-gray-400 text-sm",formFieldErrorText:"text-red-400 text-sm",footerActionText:"text-gray-300",footerActionLink:"text-blue-400 hover:text-blue-300 transition-colors",dividerLine:"bg-gray-600",dividerText:"text-gray-400",formResendCodeLink:"text-blue-400 hover:text-blue-300 transition-colors",otpCodeFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formHeaderTitle:"text-white font-bold",formHeaderSubtitle:"text-gray-300",alertText:"text-gray-300",formFieldSuccessText:"text-green-400 text-sm",formFieldWarningText:"text-yellow-400 text-sm",formFieldInputShowPasswordButton:"text-gray-400 hover:text-gray-300 transition-colors",formFieldInputShowPasswordIcon:"text-gray-400",formFieldInputHidePasswordIcon:"text-gray-400",formFieldInputShowPasswordButtonHover:"text-gray-300",formFieldInputShowPasswordButtonActive:"text-gray-200",formFieldInputShowPasswordButtonFocus:"text-gray-200",formFieldInputShowPasswordButtonDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActive:"text-gray-200",formFieldInputShowPasswordButtonHoverFocus:"text-gray-200",formFieldInputShowPasswordButtonActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActiveFocusDisabled:"text-gray-500"}},bt=({isOpen:t,onClose:r,initialMode:a="signin"})=>{const[s,n]=d.useState(a),[i,o]=d.useState(!1),{user:g}=ne(),{isConfigured:w}=G(),{showSuccess:b}=T();return d.useEffect(()=>{g&&t&&(b("Welcome!","You have successfully signed in to your account."),r())},[g,t,r,b]),d.useEffect(()=>{if(t){n(a),o(!1);const p=setTimeout(()=>{o(!0)},500);return()=>{clearTimeout(p)}}else o(!1)},[t]),d.useEffect(()=>{if(!t)return;const p=h=>{const u=h.detail||"";u.includes("sign-up")&&n("signup"),u.includes("sign-in")&&n("signin")};return window.addEventListener("clerk:navigate",p),()=>window.removeEventListener("clerk:navigate",p)},[t]),d.useEffect(()=>{!t&&(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")},[t]),d.useEffect(()=>{if(!t)return;const p=s==="signup"?"/sign-up":"/sign-in";window.location.pathname!==p&&window.history.replaceState(null,"",p)},[t,s]),d.useEffect(()=>{t&&n(a)},[t,a]),t?w?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative",children:[i&&e.jsx("button",{onClick:r,"aria-label":"Close authentication",className:"absolute top-4 right-4 z-50 text-gray-400 hover:text-white transition-all duration-300 bg-black/20 hover:bg-black/40 rounded-full p-2 animate-fade-in",children:e.jsx(D,{className:"w-5 h-5"})}),s==="signin"?e.jsx(Ee,{path:"/sign-in",signUpUrl:"/sign-up",afterSignInUrl:"/",redirectUrl:"/",routing:"path",appearance:ae}):e.jsx(Ce,{path:"/sign-up",signInUrl:"/sign-in",afterSignUpUrl:"/",redirectUrl:"/",routing:"path",appearance:ae})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(D,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(L,{className:"w-8 h-8 text-yellow-400"})})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"To enable user authentication, please configure your Clerk project and add the publishable key to your environment variables."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})}),e.jsx("button",{onClick:r,className:"bg-gray-700 hover:bg-gray-600 rounded-xl px-6 py-3 text-blue-400 font-medium transition-all duration-300",children:"Close"})]})]})}):null},vt=()=>{const[t,r]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"relative py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-8",children:e.jsx(pt,{onShowAuth:()=>r(!0)})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full blur opacity-75 pulse-glow"}),e.jsx("div",{className:"relative glass rounded-full p-3",children:e.jsx(K,{className:"w-8 h-8 text-blue-400"})})]})}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:e.jsx("span",{className:"gradient-text",children:"Free AI Image Generator"})}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 mb-6 max-w-2xl mx-auto",children:"Transform your imagination into stunning visuals with completely free AI image generation. No API keys, no limits, no costs - just pure creativity unleashed!"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{children:"Lightning Fast"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Unlimited Free"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{children:"High Quality"})]})]})]})]})}),e.jsx(bt,{isOpen:t,onClose:()=>r(!1)})]})},yt=({onImageUpload:t,uploadedImage:r,disabled:a=!1})=>{const s=d.useRef(null),[n,i]=d.useState(!1),[o,g]=d.useState(null),w=c=>c.type.startsWith("image/")?c.size>10*1024*1024?"Image must be smaller than 10MB":null:"Please select an image file (JPG, PNG, GIF, WebP)",b=d.useCallback(c=>{const f=w(c);if(f){g(f);return}g(null);const N=URL.createObjectURL(c);t({file:c,url:N,name:c.name})},[t]),p=d.useCallback(c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?i(!0):c.type==="dragleave"&&i(!1)},[]),h=d.useCallback(c=>{if(c.preventDefault(),c.stopPropagation(),i(!1),a)return;const f=Array.from(c.dataTransfer.files);f.length>0&&b(f[0])},[b,a]),l=d.useCallback(c=>{const f=Array.from(c.target.files||[]);f.length>0&&b(f[0])},[b]),u=d.useCallback(()=>{r&&URL.revokeObjectURL(r.url),t(null),g(null),s.current&&(s.current.value="")},[r,t]),m=()=>{a||s.current?.click()};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`relative rounded-xl border-2 border-dashed transition-all duration-300 ${n?"border-blue-400 bg-blue-500/10":r?"border-green-500/50 bg-green-500/5":"border-gray-600 hover:border-gray-500"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:h,onClick:m,children:[e.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:l,className:"hidden",disabled:a}),r?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r.url,alt:r.name,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg flex items-center justify-center",children:e.jsx("button",{onClick:c=>{c.stopPropagation(),u()},className:"p-2 bg-red-500 hover:bg-red-600 rounded-full text-white transition-colors",disabled:a,children:e.jsx(D,{className:"w-4 h-4"})})}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:r.name})]}):e.jsx("div",{className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n?e.jsx(oe,{className:"w-8 h-8 text-blue-400"}):e.jsx(B,{className:"w-8 h-8 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:n?"Drop image here":"Upload source image"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Drag & drop or click to browse"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF, WebP • Max 10MB"})]})]})})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{children:o})]}),r&&!o&&e.jsx("div",{className:"text-xs text-gray-400 text-center",children:"Upload a different image to replace this one"})]})},ge=d.forwardRef(({onGenerate:t,isGenerating:r},a)=>{const[s,n]=d.useState(""),[i,o]=d.useState("vivid"),[g,w]=d.useState("1:1"),[b,p]=d.useState(!1),[h,l]=d.useState(null),[u,m]=d.useState(.7),[c,f]=d.useState(!1),N=d.useRef(null),v=x=>{if(x.preventDefault(),s.trim()&&!r){const E=h?h.file.size===0?h.url:h.file:void 0;t(s.trim(),i,g,E,h?u:void 0)}},y=()=>{const x=N.current;x&&(x.style.height="auto",x.style.height=`${Math.min(x.scrollHeight,200)}px`)},j=x=>{n(x.target.value),y()};d.useEffect(()=>{y()},[s]),d.useImperativeHandle(a,()=>({setEditMode:(x,E)=>{try{l({file:new File([],"source-image.jpg",{type:"image/jpeg"}),url:x,name:"Source image for editing"}),n(`Transform this image: ${E}`),f(!0),m(.5),setTimeout(()=>{N.current&&(N.current.scrollIntoView({behavior:"smooth",block:"center"}),N.current.focus())},100)}catch(z){console.error("Error setting edit mode:",z)}}}),[]);const S=["A serene mountain landscape at sunset","Cyberpunk city with neon lights","Magical forest with glowing mushrooms","Futuristic spaceship in deep space","Abstract geometric art in vibrant colors","Cozy cottage in a snowy winter scene","Majestic dragon soaring through clouds","Underwater coral reef with tropical fish"],I=[{value:"1:1",label:"Square",ratio:"1:1",description:"Perfect for social media posts",icon:"⬜",dimensions:"1024×1024"},{value:"16:9",label:"Landscape",ratio:"16:9",description:"Great for wallpapers and presentations",icon:"🖥️",dimensions:"1024×576"},{value:"4:3",label:"Classic",ratio:"4:3",description:"Traditional photo format",icon:"📷",dimensions:"1024×768"}],k=[{value:"vivid",label:"Vivid",icon:"✨",description:"Dramatic lighting, vibrant colors, and high detail"},{value:"natural",label:"Natural",icon:"🌿",description:"More natural, realistic images with soft colors"}];return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-12",children:[e.jsx("div",{className:"glass rounded-2xl p-4 mb-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(ce,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium",children:"100% Free AI Generation"}),e.jsx("p",{className:"text-green-300 text-sm",children:"Powered by Pollinations AI - No API keys required, unlimited usage!"})]})]})}),e.jsx("form",{onSubmit:v,className:"relative",children:e.jsxs("div",{className:"glass rounded-2xl p-1",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(H,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),e.jsx("textarea",{ref:N,value:s,onChange:j,onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),v(x))},placeholder:"Describe the image you want to generate...",className:"w-full pl-12 pr-4 py-4 bg-transparent text-white placeholder-gray-400 text-lg focus:outline-none resize-none overflow-y-auto min-h-[56px] max-h-[200px] scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent hover:scrollbar-thumb-gray-500",disabled:r,rows:1})]}),e.jsxs("button",{type:"button",onClick:()=>p(!b),className:`glass-hover rounded-xl p-4 transition-all duration-300 relative ${b?"text-blue-400 bg-blue-500/20 shadow-lg shadow-blue-500/25":"text-gray-400 hover:text-white"}`,title:"Settings",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),b?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(le,{className:"w-4 h-4"})]}),b&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full"})]}),e.jsxs("button",{type:"button",onClick:()=>f(!c),className:`glass-hover rounded-xl p-4 transition-all duration-300 relative ${c||h?"text-purple-400 bg-purple-500/20 shadow-lg shadow-purple-500/25":"text-gray-400 hover:text-white"}`,title:"Image-to-Image",children:[e.jsx(B,{className:"w-5 h-5"}),h&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-purple-500 rounded-full"})]}),e.jsxs("button",{type:"submit",disabled:!s.trim()||r,className:"glass-hover rounded-xl px-6 py-4 flex items-center gap-2 text-white font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Generate"})]})]})]}),b&&e.jsx("div",{className:"border-t border-white/20 bg-gray-800/30 backdrop-blur-sm",children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Generation Settings"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Customize your AI image generation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base text-white mb-4 font-semibold flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-blue-400"}),"Choose Aspect Ratio"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:I.map(x=>e.jsxs("button",{type:"button",onClick:()=>w(x.value),className:`relative p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${g===x.value?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 ring-2 ring-blue-400":"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:x.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-base",children:x.label}),e.jsx("div",{className:"text-sm opacity-80",children:x.ratio})]})]}),e.jsx("div",{className:"text-xs opacity-75 mb-2",children:x.description}),e.jsxs("div",{className:"text-xs font-mono opacity-60",children:[x.dimensions,"px"]}),g===x.value&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})})]},x.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base text-white mb-4 font-semibold flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-purple-400"}),"Generation Style"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map(x=>e.jsxs("button",{type:"button",onClick:()=>o(x.value),className:`p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${i===x.value?"bg-gradient-to-br from-purple-500 to-pink-600 text-white shadow-lg shadow-purple-500/25 ring-2 ring-purple-400":"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-xl",children:x.icon}),e.jsx("div",{className:"font-semibold",children:x.label})]}),e.jsx("div",{className:"text-sm opacity-80",children:x.description})]},x.value))})]}),e.jsxs("div",{className:"glass rounded-xl p-4 bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30",children:[e.jsx("div",{className:"text-sm text-blue-300 mb-2 font-medium",children:"Current Configuration:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{className:"text-gray-300",children:[I.find(x=>x.value===g)?.label," (",g,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-purple-400"}),e.jsxs("span",{className:"text-gray-300",children:[k.find(x=>x.value===i)?.label," Style"]})]})]})]})]})}),c&&e.jsx("div",{className:"border-t border-white/20 bg-purple-800/20 backdrop-blur-sm",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-2 flex items-center justify-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-purple-400"}),"Image-to-Image Generation"]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Upload a source image and describe how to transform it"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base text-white mb-4 font-semibold",children:"Source Image"}),e.jsx(yt,{onImageUpload:l,uploadedImage:h,disabled:r})]}),h&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base text-white mb-4 font-semibold",children:["Transformation Strength: ",Math.round(u*100),"%"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:u,onChange:x=>m(parseFloat(x.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"Subtle (10%)"}),e.jsx("span",{children:"Balanced (50%)"}),e.jsx("span",{children:"Strong (100%)"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Lower values keep more of the original image, higher values create more dramatic changes"})]})]}),e.jsxs("div",{className:"glass rounded-xl p-4 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/30",children:[e.jsx("div",{className:"text-sm text-purple-300 mb-2 font-medium",children:"💡 Tips for better results:"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsx("li",{children:"• Describe what you want to change about the image"}),e.jsx("li",{children:'• Use specific style keywords (e.g., "cartoon", "oil painting", "photorealistic")'}),e.jsx("li",{children:"• Lower strength preserves more original details"}),e.jsx("li",{children:"• Higher strength allows more creative freedom"})]})]})]})})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-3 text-center",children:"✨ Try these creative prompts:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:S.map((x,E)=>e.jsx("button",{onClick:()=>n(x),disabled:r,className:"glass glass-hover rounded-full px-4 py-2 text-sm text-gray-300 transition-all duration-300 hover:text-white disabled:opacity-50",children:x},E))})]})]})});ge.displayName="PromptInput";const jt=async t=>{if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(t);return}catch{}const r=document.createElement("textarea");r.value=t,r.style.position="fixed",r.style.top="-9999px",r.style.left="-9999px",document.body.appendChild(r),r.focus(),r.select();try{if(!document.execCommand("copy"))throw new Error("execCommand returned false")}catch{throw new Error("Fallback copy method failed.")}finally{document.body.removeChild(r)}},Nt=async(t,r,a,s)=>{try{const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch image: ${n.status}`);const i=await n.blob(),o=window.URL.createObjectURL(i),g=document.createElement("a");g.href=o,g.download=r,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(o),a?.()}catch(n){console.error("Download error:",n);try{const i=document.createElement("a");i.href=t,i.download=r,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i),a?.()}catch(i){console.error("Fallback download error:",i),s?.(n)}}},St=(t="1:1",r,a="jpg")=>{const s=new Date().toISOString().split("T")[0];return`ai-generated-${t}-${r}-${s}.${a}`},It=({image:t,onEdit:r})=>{const[a,s]=d.useState("idle"),[n,i]=d.useState(!1),{showSuccess:o,showError:g}=T(),w=async()=>{if(n)return;i(!0);const m=St(t.aspectRatio||"1:1",t.id);await Nt(t.url,m,()=>{o("Download Started","Your image is being downloaded.")},c=>{g("Download Failed","Could not download the image. Please try again.")}),i(!1)},b=async()=>{try{await jt(t.prompt),s("success"),o("Prompt Copied!","The image prompt has been copied to your clipboard.")}catch{s("error"),g("Copy Failed","Could not copy the prompt to clipboard. Please try copying manually."),alert(`Could not copy automatically. Please copy this prompt manually:

"${t.prompt}"`)}setTimeout(()=>s("idle"),2e3)},p=()=>{r&&!t.isLoading&&r(t.url,t.prompt)},h=m=>new Intl.RelativeTimeFormat("en",{numeric:"auto"}).format(Math.ceil((m.getTime()-Date.now())/(1e3*60)),"minute"),l=m=>{switch(m){case"16:9":return"aspect-video";case"4:3":return"aspect-[4/3]";case"1:1":default:return"aspect-square"}},u=m=>{switch(m){case"16:9":return"Landscape";case"4:3":return"Classic";case"1:1":default:return"Square"}};return t.isLoading?e.jsxs("div",{className:"glass rounded-2xl overflow-hidden",children:[e.jsx("div",{className:`bg-gray-800 relative overflow-hidden ${l(t.aspectRatio)}`,children:e.jsx("div",{className:"absolute inset-0 bg-gray-700/40"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-2/3"})]})]}):e.jsxs("div",{className:"glass rounded-2xl overflow-hidden group hover:scale-105 transition-all duration-300 floating-animation",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:t.url,alt:t.prompt,className:`w-full object-cover transition-transform duration-300 group-hover:scale-110 ${l(t.aspectRatio)}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"glass rounded-lg px-2 py-1 text-xs text-white border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),e.jsx("span",{children:t.aspectRatio||"1:1"})]})})}),e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r&&e.jsx("button",{onClick:p,className:"glass glass-hover rounded-full p-2 text-white transition-colors duration-300 hover:text-purple-400",title:"Edit with AI (Image-to-Image)",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:w,disabled:n,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${n?"opacity-50 cursor-not-allowed":"hover:text-blue-400"}`,title:n?"Downloading...":"Download image",children:n?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:b,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${a==="success"?"text-green-400":a==="error"?"text-red-400":"hover:text-green-400"}`,title:a==="success"?"Copied!":a==="error"?"Copy failed":"Copy prompt",children:a==="success"?e.jsx(Ge,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]}),a!=="idle"&&e.jsx("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:`glass rounded-lg px-3 py-1 text-sm ${a==="success"?"text-green-400 border-green-500/30":"text-red-400 border-red-500/30"}`,children:a==="success"?"Copied!":"Failed"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-gray-300 text-sm line-clamp-2 mb-3",children:t.prompt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-3 h-3"}),e.jsx("span",{children:h(t.timestamp)})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(M,{className:"w-3 h-3"}),e.jsx("span",{children:u(t.aspectRatio)})]})]})]})]})},fe=d.forwardRef(({images:t,onEditImage:r},a)=>t.length===0?e.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center py-16",children:e.jsxs("div",{className:"glass rounded-2xl p-12",children:[e.jsx(B,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"No images yet"}),e.jsx("p",{className:"text-gray-500",children:"Generate your first AI image by entering a prompt above!"})]})}):e.jsxs("div",{ref:a,className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Your Generated Images"}),e.jsxs("p",{className:"text-gray-400",children:[t.filter(s=>!s.isLoading).length," image",t.filter(s=>!s.isLoading).length!==1?"s":""," generated"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(s=>e.jsx(It,{image:s,onEdit:r},s.id))})]}));fe.displayName="ImageGrid";const kt=()=>e.jsx("footer",{className:"mt-20 py-8 px-4 border-t border-white/10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-4",children:[e.jsx("a",{href:"https://github.com/dumindu2041329",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"GitHub",children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsx("a",{href:"https://www.linkedin.com/in/dumindu-damsara-0049ab246/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"LinkedIn",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["© ",new Date().getFullYear()," AI Image Generator. All rights reserved."]})]})}),F=()=>{const[t,r]=d.useState([]),[a,s]=d.useState(!1),{saveImage:n}=xt(),{user:i,isConfigured:o}=G(),{showSuccess:g,showError:w,showWarning:b}=T(),p=d.useRef(i),h=d.useRef(null),l=d.useRef(null);d.useEffect(()=>{p.current&&!i&&r([]),p.current=i},[i]);const u=async(c,f,N,v,y)=>{s(!0);const j={id:`loading_${Date.now()}`,url:"",prompt:c,timestamp:new Date,isLoading:!0,aspectRatio:N||"1:1"};r(S=>[j,...S]);try{const S=await ct.generateImage({prompt:c,style:f,aspectRatio:N,sourceImage:v,strength:y});if(r(I=>I.map(k=>k.id===j.id?S:k)),g("Image Generated Successfully!",`Created a ${N||"1:1"} image with ${f||"vivid"} style.`),setTimeout(()=>{h.current&&(h.current.style.opacity="0.7",h.current.style.transition="opacity 0.3s ease-in-out",h.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),setTimeout(()=>{h.current&&(h.current.style.opacity="1")},800))},300),o&&i)try{await n(c,S.url,N||"1:1",f||"vivid"),g("Image Saved!","Your generated image has been saved to your history.")}catch(I){const k=I instanceof Error?I.message:"Unknown error occurred";k.includes("empty (0 bytes)")?b("Image Generation Issue","The image generation service returned an empty image. This may be a temporary issue. Please try again with a different prompt or try again later."):b("Image Generated but Not Saved",`The image was created successfully but could not be saved to your history. ${k}`)}}catch(S){S instanceof Error?w("Image Generation Failed",S.message):w("Image Generation Failed","An unexpected error occurred. Please try again."),r(I=>I.filter(k=>k.id!==j.id))}finally{s(!1)}},m=(c,f)=>{l.current&&(l.current.setEditMode(c,f),l.current.scrollIntoView({behavior:"smooth",block:"start"}))};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(vt,{}),o&&i&&e.jsx("div",{className:"max-w-4xl mx-auto px-4 mb-6",children:e.jsx("div",{className:"glass rounded-2xl p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"✓"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium",children:"Authentication Active"}),e.jsx("p",{className:"text-green-300 text-sm",children:"Your generated images are automatically saved to your history!"})]})]})})}),e.jsx(ge,{ref:l,onGenerate:u,isGenerating:a}),e.jsx(fe,{ref:h,images:t,onEditImage:m}),e.jsx(kt,{})]})]})},Et=d.lazy(()=>O(()=>import("./MyImagesPage-DNX520tF.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ct=d.lazy(()=>O(()=>import("./ProfilePage-Ea_4TGvJ.js"),__vite__mapDeps([6,1,2,3,4,5]))),Pt=d.lazy(()=>O(()=>import("./AuthConfirmPage-C_HPmHfI.js"),__vite__mapDeps([7,1,2,3,4,5]))),Rt=d.lazy(()=>O(()=>import("./ResetPasswordPage-rYd3N6LU.js"),__vite__mapDeps([8,1,2,3,4,5])));function _t(){return _.includes("YOUR_CLERK_PUBLISHABLE_KEY")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Please add your Clerk publishable key to the .env file to enable authentication."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 text-left",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})})]})}):e.jsx(Pe,{publishableKey:_,routerPush:t=>{window.history.pushState(null,"",t),window.dispatchEvent(new CustomEvent("clerk:navigate",{detail:t}))},routerReplace:t=>{window.history.replaceState(null,"",t),window.dispatchEvent(new CustomEvent("clerk:navigate",{detail:t}))},children:e.jsx(it,{children:e.jsxs(je,{children:[e.jsxs(Ne,{children:[e.jsx(C,{path:"/",element:e.jsx(F,{})}),e.jsx(C,{path:"/sign-in",element:e.jsx(F,{})}),e.jsx(C,{path:"/sign-up",element:e.jsx(F,{})}),e.jsx(C,{path:"/factor-one",element:e.jsx(F,{})}),e.jsx(C,{path:"/my-images",element:e.jsx(d.Suspense,{fallback:null,children:e.jsx(Et,{})})}),e.jsx(C,{path:"/profile",element:e.jsx(d.Suspense,{fallback:null,children:e.jsx(Ct,{})})}),e.jsx(C,{path:"/auth/confirm",element:e.jsx(d.Suspense,{fallback:null,children:e.jsx(Pt,{})})}),e.jsx(C,{path:"/reset-password",element:e.jsx(d.Suspense,{fallback:null,children:e.jsx(Rt,{})})})]}),e.jsx(lt,{})]})})})}const xe=document.getElementById("root");if(!xe)throw new Error("Root element not found");const $t=nt.createRoot(xe);$t.render(e.jsxs(d.StrictMode,{children:[e.jsx(_t,{}),e.jsx(st,{})]}));export{se as P,G as a,T as b,ht as c,gt as d,ft as e,mt as g,e as j,xt as u};
