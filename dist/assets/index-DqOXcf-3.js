const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MyImagesPage-BNeTULWS.js","assets/vendor-router-B0usbLSA.js","assets/vendor-react-CA82q7Og.js","assets/vendor-utils-BmJVnZQf.js","assets/vendor-supabase-l0Uqy5La.js","assets/vendor-clerk-TSkbXxwZ.js","assets/ProfilePage-CUh5nAHx.js","assets/AuthConfirmPage-rkYD5BTD.js","assets/ResetPasswordPage-CiMlFRCq.js"])))=>i.map(i=>d[i]);
import{r as he,a as ge}from"./vendor-react-CA82q7Og.js";import{r as c,a as xe,R as fe,u as pe,B as we,b as be,c as I}from"./vendor-router-B0usbLSA.js";import{c as Y,_ as L}from"./vendor-supabase-l0Uqy5La.js";import{o as ye,u as re,a as ve,r as je,S as Ne,b as Se,C as Ie}from"./vendor-clerk-TSkbXxwZ.js";import{X as z,I as V,T as Ee,C as ke,a as Ce,b as Pe,U as Re,c as U,d as ae,e as _e,H as Ae,L as Te,S as J,Z as H,f as Fe,W as Ue,g as $e,h as Le,i as De,R as $,D as Be,j as Oe,k as Ge,l as ze,m as He,G as Ye,n as Me}from"./vendor-utils-BmJVnZQf.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();var G={exports:{}},C={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W;function Ve(){if(W)return C;W=1;var t=he(),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(h,x,b){var f,g={},i=null,m=null;b!==void 0&&(i=""+b),x.key!==void 0&&(i=""+x.key),x.ref!==void 0&&(m=x.ref);for(f in x)r.call(x,f)&&!a.hasOwnProperty(f)&&(g[f]=x[f]);if(h&&h.defaultProps)for(f in x=h.defaultProps,x)g[f]===void 0&&(g[f]=x[f]);return{$$typeof:s,type:h,key:i,ref:m,props:g,_owner:n.current}}return C.Fragment=o,C.jsx=d,C.jsxs=d,C}var K;function Je(){return K||(K=1,G.exports=Ve()),G.exports}var e=Je(),q={},We="@vercel/speed-insights",Ke="1.2.0",qe=()=>{window.si||(window.si=function(...s){(window.siq=window.siq||[]).push(s)})};function Ze(){return typeof window<"u"}function Xe(){try{const t="production"}catch{}return"production"}function ne(){return Xe()==="development"}function Qe(t){return t.scriptSrc?t.scriptSrc:ne()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function et(t={}){var s;if(!Ze()||t.route===null)return null;qe();const o=Qe(t);if(document.head.querySelector(`script[src*="${o}"]`))return null;t.beforeSend&&((s=window.si)==null||s.call(window,"beforeSend",t.beforeSend));const r=document.createElement("script");return r.src=o,r.defer=!0,r.dataset.sdkn=We+(t.framework?`/${t.framework}`:""),r.dataset.sdkv=Ke,t.sampleRate&&(r.dataset.sampleRate=t.sampleRate.toString()),t.route&&(r.dataset.route=t.route),t.endpoint?r.dataset.endpoint=t.endpoint:t.basePath&&(r.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(r.dataset.dsn=t.dsn),ne()&&t.debug===!1&&(r.dataset.debug="false"),r.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${o}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(r),{setRoute:n=>{r.dataset.route=n??void 0}}}function tt(){if(!(typeof process>"u"||typeof q>"u"))return q.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function st(t){c.useEffect(()=>{var o;t.beforeSend&&((o=window.si)==null||o.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const s=c.useRef(null);return c.useEffect(()=>{if(s.current)t.route&&s.current(t.route);else{const o=et({framework:t.framework??"react",basePath:t.basePath??tt(),...t});o&&(s.current=o.setRoute)}},[t.route]),null}var T={},Z;function rt(){if(Z)return T;Z=1;var t=ge();return T.createRoot=t.createRoot,T.hydrateRoot=t.hydrateRoot,T}var at=rt();const oe=c.createContext(void 0),nt=({children:t})=>{const[s,o]=c.useState([]),r=c.useCallback(()=>`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,[]),n=c.useCallback(i=>{o(m=>m.filter(u=>u.id!==i))},[]),a=c.useCallback(i=>{const m=r(),u={id:m,duration:5e3,...i};return o(l=>[...l,u]),u.duration&&u.duration>0&&setTimeout(()=>{n(m)},u.duration),m},[r,n]),d=c.useCallback(()=>{o([])},[]),h=c.useCallback((i,m,u)=>a({type:"success",title:i,message:m,...u}),[a]),x=c.useCallback((i,m,u)=>a({type:"error",title:i,message:m,duration:7e3,...u}),[a]),b=c.useCallback((i,m,u)=>a({type:"warning",title:i,message:m,duration:6e3,...u}),[a]),f=c.useCallback((i,m,u)=>a({type:"info",title:i,message:m,...u}),[a]),g={toasts:s,addToast:a,removeToast:n,clearAllToasts:d,showSuccess:h,showError:x,showWarning:b,showInfo:f};return e.jsx(oe.Provider,{value:g,children:t})},A=()=>{const t=c.useContext(oe);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},ot=({toast:t,onRemove:s})=>{const[o,r]=c.useState(!1),[n,a]=c.useState(!1);c.useEffect(()=>{const i=setTimeout(()=>r(!0),50);return()=>clearTimeout(i)},[]);const d=()=>{a(!0),setTimeout(()=>s(t.id),300)},[h,x]=c.useState(100);c.useEffect(()=>{if(!t.duration||t.duration<=0)return;const i=setInterval(()=>{x(m=>{const u=100/t.duration*100;return Math.max(0,m-u)})},100);return()=>clearInterval(i)},[t.duration]);const b=()=>{const i="relative overflow-hidden glass border-l-4";switch(t.type){case"success":return`${i} border-green-500 bg-green-500/10`;case"error":return`${i} border-red-500 bg-red-500/10`;case"warning":return`${i} border-yellow-500 bg-yellow-500/10`;case"info":return`${i} border-blue-500 bg-blue-500/10`;default:return`${i} border-gray-500 bg-gray-500/10`}},f=()=>{const i="w-5 h-5";switch(t.type){case"success":return e.jsx(Ce,{className:`${i} text-green-400`});case"error":return e.jsx(ke,{className:`${i} text-red-400`});case"warning":return e.jsx(Ee,{className:`${i} text-yellow-400`});case"info":return e.jsx(V,{className:`${i} text-blue-400`});default:return e.jsx(V,{className:`${i} text-gray-400`})}},g=()=>{switch(t.type){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":return"bg-blue-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:`
        rounded-xl p-4 max-w-sm w-full transition-all duration-300 transform
        ${b()}
        ${o&&!n?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}
      `,role:"alert","aria-live":"polite",children:[t.duration&&t.duration>0&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/10",children:e.jsx("div",{className:`h-full transition-all duration-100 linear ${g()}`,style:{width:`${h}%`}})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:f()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-medium text-sm leading-5",children:t.title}),t.message&&e.jsx("p",{className:"text-gray-300 text-sm mt-1 leading-5",children:t.message}),t.action&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:t.action.onClick,className:"text-sm font-medium text-blue-400 hover:text-blue-300 transition-colors duration-200",children:t.action.label})})]}),e.jsx("button",{onClick:d,className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors duration-200 p-1 rounded-lg hover:bg-white/10","aria-label":"Close notification",children:e.jsx(z,{className:"w-4 h-4"})})]})]})},it=()=>{const{toasts:t,removeToast:s}=A(),o=e.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-3 pointer-events-none",children:t.map(r=>e.jsx("div",{className:"pointer-events-auto",children:e.jsx(ot,{toast:r,onRemove:s})},r.id))});return t.length===0||typeof document>"u"?null:xe.createPortal(o,document.body)},P="pk_test_YWJsZS1saW9uLTI5LmNsZXJrLmFjY291bnRzLmRldiQ",ie=()=>!P.includes("YOUR_CLERK_PUBLISHABLE_KEY")&&P.startsWith("pk_"),X=ie()?new ye(P):null,le=async()=>{try{const t=window?.Clerk;if(t?.session){const s=await t.session.getToken({template:"supabase"});if(s)return s}if(X?.session){const s=await X.session.getToken({template:"supabase"});if(s)return s}return null}catch{return null}};class lt{static SERVER_API_URL="/api/generate-image";static generatePollinationsURL(s,o="1:1"){const n=(x=>{switch(x){case"16:9":return{width:768,height:432};case"4:3":return{width:640,height:480};case"1:1":default:return{width:512,height:512}}})(o),a=s+", high quality, detailed",d=encodeURIComponent(a),h=Math.floor(Math.random()*1e6);return`https://image.pollinations.ai/prompt/${d}?width=${n.width}&height=${n.height}&seed=${h}&enhance=true&nologo=true`}static async generateImage(s){try{if(!s.prompt||s.prompt.trim().length===0)throw new Error("Prompt is required");console.log("ðŸŽ¨ Generating image with Pollinations AI:",s.prompt);const o={prompt:s.prompt.trim(),aspectRatio:s.aspectRatio||"1:1"};console.log("Request body:",o),console.log("Making request to:",this.SERVER_API_URL);let r;try{r=await fetch(this.SERVER_API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}catch{console.warn("API server not available, using direct Pollinations integration");const d=this.generatePollinationsURL(s.prompt.trim(),s.aspectRatio||"1:1"),h={id:`pollinations_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:d,prompt:s.prompt.trim(),aspectRatio:s.aspectRatio||"1:1",timestamp:new Date};return console.log("âœ… Direct Pollinations generation successful:",h.id),console.log("Generated image URL:",h.url),h}if(console.log("Server response status:",r.status),console.log("Server response headers:",Object.fromEntries(r.headers.entries())),!r.ok){if(r.status===404){console.warn("API endpoint not found (404), using direct Pollinations integration for development");const h=this.generatePollinationsURL(s.prompt.trim(),s.aspectRatio||"1:1"),x={id:`pollinations_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:h,prompt:s.prompt.trim(),aspectRatio:s.aspectRatio||"1:1",timestamp:new Date};return console.log("âœ… Direct Pollinations generation successful:",x.id),console.log("Generated image URL:",x.url),x}let a;try{const h=r.clone();a=await r.json()}catch(h){console.error("Failed to parse error response as JSON:",h);try{const b=await r.clone().text();console.error("Raw error response:",b),a={error:`Server error (${r.status}): ${b}`}}catch(x){console.error("Failed to read error response as text:",x),a={error:`Server error (${r.status})`}}}console.error("âŒ Server API error:",a);const d=a.error||`Server error (${r.status})`;throw new Error(d)}let n;try{n=await r.json()}catch(a){throw console.error("Failed to parse successful response as JSON:",a),new Error("Server returned invalid response format")}if(!n||!n.url||!n.id)throw console.error("Invalid response structure:",n),new Error("Server returned incomplete image data");return n.timestamp=new Date(n.timestamp),console.log("âœ… Pollinations generation successful:",n.id),console.log("Generated image URL:",n.url),n}catch(o){console.error("âŒ Image generation failed:",o);try{console.log("ðŸ”„ Attempting final fallback to direct Pollinations...");const r=this.generatePollinationsURL(s.prompt.trim(),s.aspectRatio||"1:1"),n={id:`pollinations_fallback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:r,prompt:s.prompt.trim(),aspectRatio:s.aspectRatio||"1:1",timestamp:new Date};return console.log("âœ… Fallback generation successful:",n.id),n}catch(r){console.error("âŒ Final fallback also failed:",r)}throw o instanceof Error?new Error(`Image generation failed: ${o.message}. Please try again.`):new Error("Failed to generate image. Please check your connection and try again.")}}static async testApiKey(){return!0}}const R="https://dxljyzvwolnbdreewbvs.supabase.co",_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR4bGp5enZ3b2xuYmRyZWV3YnZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyNTY0OTksImV4cCI6MjA3MjgzMjQ5OX0.hzNFBkxNMS6BwToieigRze1GEq_OSpzrXJpH92o0ouU",M=()=>!R.includes("YOUR_SUPABASE_URL")&&!_.includes("YOUR_SUPABASE_ANON_KEY")&&!R.includes("API_KEY_ADDED"),ct=()=>M()?Y(R,_,{global:{fetch:async(t,s={})=>{const o=await le();s.headers={apikey:_,...s.headers};const r=t.toString();if(r.includes("/rest/v1/"))(s.headers||{})["Content-Type"]||(s.headers={...s.headers,"Content-Type":"application/json"});else if(r.includes("/storage/v1/object/")){const n=s.headers||{};s.body&&!n["Content-Type"]&&(s.headers={...s.headers,"Content-Type":"application/json"})}if(o?(s.headers={...s.headers,Authorization:`Bearer ${o}`},console.log("Supabase request with token:",o.substring(0,50)+"...")):console.warn("No Clerk token available for Supabase request"),r.includes("/storage/v1/object/")&&console.log("Storage API request:",{url:r,method:s.method,headers:s.headers,body:s.body}),r.includes("/storage/v1/object/")&&s.body)try{if(typeof s.body=="string"){const n=JSON.parse(s.body);s.body=JSON.stringify(n)}}catch(n){console.warn("Failed to parse storage request body:",n)}return fetch(t,s)}}}):null,E=ct(),dt=()=>M()?Y(R,_):null,Q=dt(),ee=async()=>{if(!Q)return null;const t=await le();return console.log("Getting authenticated storage client, token available:",!!t),t?Y(R,_,{global:{headers:{Authorization:`Bearer ${t}`}}}):Q},mt=t=>t?.id||null,ut=t=>t?.emailAddresses?.[0]?.emailAddress||void 0,ht=t=>t?.fullName||void 0,gt=t=>t?.imageUrl||void 0,D=()=>{const{user:t,isLoaded:s,isSignedIn:o}=re(),r=ve(),[n,a]=c.useState(!0),[d,h]=c.useState(!1),x=t?{id:t.id,emailAddresses:t.emailAddresses.map(p=>({emailAddress:p.emailAddress})),firstName:t.firstName,lastName:t.lastName,imageUrl:t.imageUrl,fullName:t.fullName}:null;return c.useEffect(()=>{const p=ie()&&M();h(p),s&&a(!1)},[s]),{user:x,loading:n||!s,isConfigured:d,isSignedIn:!!o,signIn:async(p,y)=>{if(!d)throw new Error("Authentication not configured");try{const v=await r.client.signIn.create({identifier:p,password:y});if(v.status==="complete")return await r.setActive({session:v.createdSessionId}),{user:v};throw new Error("Sign in incomplete")}catch(v){throw new Error(v.message||"Sign in failed")}},signUp:async(p,y,v)=>{if(!d)throw new Error("Authentication not configured");try{const[N,...k]=(v||"").split(" "),B=k.join(" "),S=await r.client.signUp.create({emailAddress:p,password:y,firstName:N||void 0,lastName:B||void 0});return await S.prepareEmailAddressVerification({strategy:"email_code"}),{user:S,needsVerification:!0}}catch(N){throw new Error(N.message||"Sign up failed")}},signOut:async()=>{if(d)try{await r.signOut(),(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")}catch(p){throw new Error(p.message||"Sign out failed")}},resetPassword:async p=>{if(!d)throw new Error("Authentication not configured");try{await r.client.signIn.create({identifier:p,strategy:"reset_password_email_code"})}catch(y){throw new Error(y.message||"Password reset failed")}},updateProfile:async p=>{if(!d)throw new Error("Authentication not configured");if(!x)throw new Error("No user logged in");try{const y={};if(p.full_name){const[v,...N]=p.full_name.split(" ");y.firstName=v,y.lastName=N.join(" ")}return await t?.update(y),{user:t}}catch(y){throw new Error(y.message||"Profile update failed")}},updateProfileImage:async p=>{if(!d)throw new Error("Authentication not configured");if(!r.user)throw new Error("No user logged in");try{return await r.user.setProfileImage({file:p}),{user:r.user}}catch(y){throw new Error(y.message||"Profile image update failed")}},updateEmail:async(p,y)=>{if(!d)throw new Error("Authentication not configured");if(!x)throw new Error("No user logged in");try{if(y){const N=t?.emailAddresses?.[0]?.emailAddress;if(!N)throw new Error("Current email not found");const k=await r.client.signIn.create({identifier:N,password:y});if(k.status==="complete")await r.setActive({session:k.createdSessionId});else throw new Error("Re-authentication failed")}const v=await t?.createEmailAddress({email:p});if(!v)throw new Error("Failed to create new email address");return await v.prepareVerification({strategy:"email_code"}),{user:t}}catch(v){throw new Error(v.message||"Email update failed")}},verifyEmailUpdate:async(p,y)=>{if(!d)throw new Error("Authentication not configured");if(!t)throw new Error("No user logged in");try{const v=t.emailAddresses.find(N=>N.emailAddress===p);if(!v)throw new Error("New email not found on account");return await v.attemptVerification({code:y}),await t.update({primaryEmailAddressId:v.id}),{user:t}}catch(v){throw new Error(v.message||"Email verification failed")}},updatePassword:async p=>{if(!d)throw new Error("Authentication not configured");if(!x)throw new Error("No user logged in");try{return await t?.updatePassword({newPassword:p}),{user:t}}catch(y){throw new Error(y.message||"Password update failed")}}}},xt=()=>{const[t,s]=c.useState([]),[o,r]=c.useState(!1),{user:n,isConfigured:a}=D(),d=mt(n),h=c.useCallback(async()=>{if(!(!a||!d||!E)){r(!0);try{const{data:g,error:i}=await E.from("saved_images").select("*").eq("user_id",d).order("created_at",{ascending:!1});if(i)throw console.error("Fetch saved images error:",i),i;const m=(g||[]).filter(u=>!u||typeof u!="object"||!u.id?(console.warn("Invalid image data found:",u),!1):!0);console.log("Valid images loaded:",m.length,"out of",(g||[]).length),s(m)}catch(g){console.error("Fetch saved images error:",g)}finally{r(!1)}}},[a,d]);return c.useEffect(()=>{d&&a?h():s([])},[d,a,h]),{savedImages:t,loading:o,saveImage:async(g,i,m,u)=>{if(!a||!d||!E)return null;try{const l=await fetch(i);if(!l.ok)throw console.error(`Failed to fetch generated image for saving. Status: ${l.status}, URL: ${i}`),new Error(`Failed to fetch generated image for saving. Status: ${l.status}`);const w=await l.blob();if(!w.type.startsWith("image/"))throw console.error(`Generated image is not a valid image type: ${w.type}, URL: ${i}`),new Error(`Generated image is not a valid image type: ${w.type}`);if(w.size===0)throw console.error(`Generated image is empty (0 bytes), URL: ${i}`),new Error("Generated image is empty (0 bytes). The image generation service may be experiencing issues. Please try again.");const j=w.type.split("/")[1]||"jpg",p=`${Date.now()}.${j}`,y=`${d}/${p}`,v=await ee(),{error:N}=await v?.storage.from("generated_images").upload(y,w,{cacheControl:"3600",upsert:!1,contentType:w.type||"image/jpeg"})||{error:new Error("Storage client not available")};if(N)throw N;const{data:{publicUrl:k}}=v?.storage.from("generated_images").getPublicUrl(y)||{data:{publicUrl:""}};if(!k)throw new Error("Failed to get public URL for the uploaded image.");const B={user_id:d,prompt:g,image_url:k,aspect_ratio:m,style:u,is_favorite:!1,storage_file_path:y},{data:S,error:O}=await E.from("saved_images").insert([B]).select().single();if(O)throw console.error("Database insert error:",O),O;return S&&typeof S=="object"&&S.id&&s(ue=>[S,...ue]),S}catch(l){return console.error("Save image error:",l),null}},deleteImage:async g=>{if(!(!a||!d||!E))try{const i=t.find(l=>l.id===g);if(!i)return;let m=i.storage_file_path;if(!m){const l=i.image_url.split("/"),w=l.indexOf("generated_images");w!==-1&&(m=l.slice(w+1).join("/"))}if(m&&m.includes("undefined")&&(console.warn("Invalid file path detected, skipping storage deletion:",m),m=null),m)try{const l=m.startsWith("/")?m.slice(1):m;console.log("Attempting to delete file from storage:",l),console.log("File path details:",{original:m,cleaned:l,userId:d});const w=await ee(),{data:j,error:p}=await w?.storage.from("generated_images").remove([l])||{data:null,error:new Error("Storage client not available")};console.log("Storage deletion response:",{removeData:j,storageError:p}),p?console.warn("Storage deletion failed:",p):console.log("Successfully deleted file from storage:",l)}catch(l){console.warn("Storage deletion error:",l)}else console.warn("No file path available for storage deletion");const{error:u}=await E.from("saved_images").delete().eq("id",g).eq("user_id",d);if(u)throw u;s(l=>l.filter(w=>w.id!==g))}catch(i){throw i}},toggleFavorite:async g=>{if(!(!a||!d||!E))try{const i=t.find(w=>w.id===g);if(!i){console.warn("Image not found for favorite toggle:",g);return}const m=!i.is_favorite;console.log("Toggling favorite for image:",g,"from",i.is_favorite,"to",m);const{data:u,error:l}=await E.from("saved_images").update({is_favorite:m}).eq("id",g).eq("user_id",d).select().single();if(l)throw console.error("Error updating favorite status:",l),l;console.log("Database update successful, received data:",u),s(w=>w.map(j=>j.id===g?u&&typeof u=="object"&&u.id?(console.log("Updating image with database data:",u),u):(console.log("Updating image locally with new favorite status"),{...j,is_favorite:m}):j))}catch(i){throw console.error("Toggle favorite error:",i),i}},refreshImages:h}},te=({imageUrl:t,fullName:s,email:o,size:r="md",editable:n=!1,onImageChange:a,loading:d=!1})=>{const[h,x]=c.useState(!1),f={sm:{container:"w-8 h-8",icon:"w-3 h-3",text:"text-xs"},md:{container:"w-12 h-12",icon:"w-5 h-5",text:"text-sm"},lg:{container:"w-20 h-20",icon:"w-8 h-8",text:"text-lg"},xl:{container:"w-32 h-32",icon:"w-12 h-12",text:"text-2xl"}}[r],g=()=>s?s.split(" ").map(l=>l.charAt(0).toUpperCase()).slice(0,2).join(""):o?o.charAt(0).toUpperCase():"U",i=l=>{const w=l.target.files?.[0];if(w&&a){if(!w.type.startsWith("image/")||w.size>5*1024*1024)return;a(w)}},m=()=>{x(!0)};fe.useEffect(()=>{x(!1)},[t]);const u=()=>{if(d)return e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("div",{className:"w-1/2 h-1/2 rounded-full bg-white/20"})});if(t&&!h)return e.jsx("img",{src:t,alt:s||"Profile",onError:m,className:"w-full h-full object-cover"});const l=g();return l&&l!=="U"?e.jsx("span",{className:`font-semibold text-white ${f.text}`,children:l}):e.jsx(U,{className:`text-white ${f.icon}`})};return n?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`
          ${f.container} 
          rounded-full 
          bg-gradient-to-r from-blue-500 to-purple-600 
          flex items-center justify-center 
          overflow-hidden 
          border-2 border-white/20
          cursor-pointer
          group
          hover:scale-105
          transition-all duration-200
        `,children:[u(),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:e.jsx(Pe,{className:"w-1/3 h-1/3 text-white"})})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:i,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:d}),n&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(Re,{className:"w-3 h-3 text-white"})})]}):e.jsx("div",{className:`
      ${f.container} 
      rounded-full 
      bg-gradient-to-r from-blue-500 to-purple-600 
      flex items-center justify-center 
      overflow-hidden 
      border-2 border-white/20
    `,children:u()})},ft=({onShowAuth:t})=>{const[s,o]=c.useState(!1),{user:r,signOut:n,isConfigured:a}=D(),{showSuccess:d,showError:h}=A(),x=pe(),b=async()=>{try{await n(),o(!1),d("Signed Out Successfully","You have been signed out of your account.")}catch{h("Sign Out Failed","An error occurred while signing out. Please try again.")}},f=()=>{x("/my-images"),o(!1)},g=()=>{x("/profile"),o(!1)},i=()=>{r||t()};if(!a)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:t,className:"glass glass-hover rounded-lg sm:rounded-xl px-3 sm:px-4 py-2 flex items-center gap-1.5 sm:gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx(U,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-xs sm:text-sm hidden sm:inline",children:"Connect Auth"})]})});if(!r)return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:i,className:"glass glass-hover rounded-lg sm:rounded-xl px-3 sm:px-4 py-2 flex items-center gap-1.5 sm:gap-2 text-blue-400 hover:text-blue-300 transition-all duration-300",children:[e.jsx(U,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-xs sm:text-sm hidden sm:inline",children:"Sign In"})]})});const m=ht(r),u=ut(r),l=gt(r);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>o(!s),className:"glass glass-hover rounded-lg sm:rounded-xl px-2 sm:px-4 py-2 flex items-center gap-1 sm:gap-2 text-white hover:text-blue-300 transition-all duration-300",children:[e.jsx(te,{imageUrl:l,fullName:m,email:u,size:"sm"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:m||u?.split("@")[0]||"User"}),e.jsx(ae,{className:`w-4 h-4 transition-transform duration-200 ${s?"rotate-180":""}`})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 sm:w-64 glass rounded-lg sm:rounded-xl border border-white/20 z-20 shadow-xl",children:e.jsxs("div",{className:"p-2 sm:p-3",children:[e.jsx("div",{className:"px-2 sm:px-3 py-2 sm:py-3 border-b border-white/10 mb-1.5 sm:mb-2",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(te,{imageUrl:l,fullName:m,email:u,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm text-white font-medium truncate",children:m||"User"}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:u})]})]})}),e.jsxs("button",{onClick:g,className:"w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-2.5 text-xs sm:text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(_e,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:f,className:"w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-2.5 text-xs sm:text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:[e.jsx(Ae,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"My Images"})]}),e.jsx("hr",{className:"border-white/10 my-1.5 sm:my-2"}),e.jsxs("button",{onClick:b,className:"w-full flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-2.5 text-xs sm:text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all duration-200",children:[e.jsx(Te,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Sign Out"})]})]})})]})]})};var pt=je();const se={baseTheme:pt.dark,elements:{formButtonPrimary:"bg-blue-600 hover:bg-blue-700 text-white transition-colors",card:"bg-gray-900 border-gray-700 shadow-2xl relative",headerTitle:"text-white font-bold",headerSubtitle:"text-gray-300",socialButtonsBlockButton:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 transition-colors",socialButtonsBlockButtonText:"text-white",formFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formFieldLabel:"text-gray-300 font-medium",identityPreviewText:"text-gray-300",formFieldHintText:"text-gray-400 text-sm",formFieldErrorText:"text-red-400 text-sm",footerActionText:"text-gray-300",footerActionLink:"text-blue-400 hover:text-blue-300 transition-colors",dividerLine:"bg-gray-600",dividerText:"text-gray-400",formResendCodeLink:"text-blue-400 hover:text-blue-300 transition-colors",otpCodeFieldInput:"bg-gray-800 border-gray-600 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",formHeaderTitle:"text-white font-bold",formHeaderSubtitle:"text-gray-300",alertText:"text-gray-300",formFieldSuccessText:"text-green-400 text-sm",formFieldWarningText:"text-yellow-400 text-sm",formFieldInputShowPasswordButton:"text-gray-400 hover:text-gray-300 transition-colors",formFieldInputShowPasswordIcon:"text-gray-400",formFieldInputHidePasswordIcon:"text-gray-400",formFieldInputShowPasswordButtonHover:"text-gray-300",formFieldInputShowPasswordButtonActive:"text-gray-200",formFieldInputShowPasswordButtonFocus:"text-gray-200",formFieldInputShowPasswordButtonDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActive:"text-gray-200",formFieldInputShowPasswordButtonHoverFocus:"text-gray-200",formFieldInputShowPasswordButtonActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveFocus:"text-gray-200",formFieldInputShowPasswordButtonHoverActiveDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonActiveFocusDisabled:"text-gray-500",formFieldInputShowPasswordButtonHoverActiveFocusDisabled:"text-gray-500"}},wt=({isOpen:t,onClose:s,initialMode:o="signin"})=>{const[r,n]=c.useState(o),[a,d]=c.useState(!1),{user:h}=re(),{isConfigured:x}=D(),{showSuccess:b}=A();return c.useEffect(()=>{h&&t&&(b("Welcome!","You have successfully signed in to your account."),s())},[h,t,s,b]),c.useEffect(()=>{if(t){n(o),d(!1);const f=setTimeout(()=>{d(!0)},500);return()=>{clearTimeout(f)}}else d(!1)},[t]),c.useEffect(()=>{if(!t)return;const f=g=>{const m=g.detail||"";m.includes("sign-up")&&n("signup"),m.includes("sign-in")&&n("signin")};return window.addEventListener("clerk:navigate",f),()=>window.removeEventListener("clerk:navigate",f)},[t]),c.useEffect(()=>{!t&&(window.location.pathname.startsWith("/sign-")||window.location.pathname.startsWith("/factor"))&&window.history.replaceState(null,"","/")},[t]),c.useEffect(()=>{if(!t)return;const f=r==="signup"?"/sign-up":"/sign-in";window.location.pathname!==f&&window.history.replaceState(null,"",f)},[t,r]),c.useEffect(()=>{t&&n(o)},[t,o]),t?x?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative",children:[a&&e.jsx("button",{onClick:s,"aria-label":"Close authentication",className:"absolute top-4 right-4 z-50 text-gray-400 hover:text-white transition-all duration-300 bg-black/20 hover:bg-black/40 rounded-full p-2 animate-fade-in",children:e.jsx(z,{className:"w-5 h-5"})}),r==="signin"?e.jsx(Ne,{path:"/sign-in",signUpUrl:"/sign-up",afterSignInUrl:"/",redirectUrl:"/",routing:"path",appearance:se}):e.jsx(Se,{path:"/sign-up",signInUrl:"/sign-in",afterSignUpUrl:"/",redirectUrl:"/",routing:"path",appearance:se})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Authentication Required"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(z,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(U,{className:"w-8 h-8 text-yellow-400"})})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"To enable user authentication, please configure your Clerk project and add the publishable key to your environment variables."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})}),e.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-600 rounded-xl px-6 py-3 text-blue-400 font-medium transition-all duration-300",children:"Close"})]})]})}):null},bt=()=>{const[t,s]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"relative py-4 sm:py-6 md:py-8 px-3 sm:px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-4 sm:mb-6 md:mb-8",children:e.jsx(ft,{onShowAuth:()=>s(!0)})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-3 sm:mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full blur opacity-75 pulse-glow"}),e.jsx("div",{className:"relative glass rounded-full p-2 sm:p-3",children:e.jsx(J,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-400"})})]})}),e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-5xl lg:text-6xl font-bold mb-3 sm:mb-4 px-2",children:e.jsx("span",{className:"gradient-text",children:"Free AI Image Generator"})}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-300 mb-4 sm:mb-6 max-w-2xl mx-auto px-4",children:"Transform your imagination into stunning visuals with completely free AI image generation. No API keys, no limits, no costs - just pure creativity unleashed!"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-400 px-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(H,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-yellow-400"}),e.jsx("span",{children:"Lightning Fast"})]}),e.jsx("div",{className:"hidden sm:block w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(Fe,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-400"}),e.jsx("span",{children:"Unlimited Free"})]}),e.jsx("div",{className:"hidden sm:block w-1 h-1 bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(J,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-purple-400"}),e.jsx("span",{children:"High Quality"})]})]})]})]})}),e.jsx(wt,{isOpen:t,onClose:()=>s(!1)})]})},ce=c.forwardRef(({onGenerate:t,isGenerating:s},o)=>{const[r,n]=c.useState(""),[a,d]=c.useState("1:1"),[h,x]=c.useState(!1),b=c.useRef(null),f=l=>{l.preventDefault(),r.trim()&&!s&&t({prompt:r.trim(),aspectRatio:a})},g=()=>{const l=b.current;l&&(l.style.height="auto",l.style.height=`${Math.min(l.scrollHeight,200)}px`)},i=l=>{n(l.target.value),g()};c.useEffect(()=>{g()},[r]),c.useImperativeHandle(o,()=>({focus:()=>{b.current&&b.current.focus()}}),[]);const m=["A serene mountain landscape at sunset","Cyberpunk city with neon lights","Magical forest with glowing mushrooms","Futuristic spaceship in deep space","Abstract geometric art in vibrant colors","Cozy cottage in a snowy winter scene","Majestic dragon soaring through clouds","Underwater coral reef with tropical fish"],u=[{value:"1:1",label:"Square",ratio:"1:1",description:"Perfect for social media posts",icon:"â¬œ",dimensions:"512Ã—512"},{value:"16:9",label:"Landscape",ratio:"16:9",description:"Great for wallpapers and presentations",icon:"ðŸ–¥ï¸",dimensions:"768Ã—432"},{value:"4:3",label:"Classic",ratio:"4:3",description:"Traditional photo format",icon:"ðŸ“·",dimensions:"640Ã—480"}];return e.jsxs("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 mb-6 sm:mb-8 md:mb-12",children:[e.jsx("div",{className:"glass rounded-xl sm:rounded-2xl p-3 sm:p-4 mb-4 sm:mb-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(H,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium text-sm sm:text-base",children:"100% Free AI Image Generation"}),e.jsx("p",{className:"text-green-300 text-xs sm:text-sm",children:"Powered by Pollinations AI â€¢ No API keys, no limits, no costs!"})]})]})}),e.jsx("form",{onSubmit:f,className:"relative",children:e.jsxs("div",{className:"glass rounded-xl sm:rounded-2xl p-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4 p-2 sm:p-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ue,{className:"absolute left-3 sm:left-4 top-3 sm:top-4 w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),e.jsx("textarea",{ref:b,value:r,onChange:i,onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),f(l))},placeholder:"Describe the image you want to generate...",className:"w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-4 bg-transparent text-white placeholder-gray-400 text-sm sm:text-base md:text-lg focus:outline-none resize-none overflow-y-auto min-h-[48px] sm:min-h-[56px] max-h-[200px] scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent hover:scrollbar-thumb-gray-500",disabled:s,rows:1})]}),e.jsxs("div",{className:"flex sm:flex-col gap-2 w-full sm:w-auto",children:[e.jsxs("button",{type:"button",onClick:()=>x(!h),className:`glass-hover rounded-lg sm:rounded-xl p-2 sm:p-4 transition-all duration-300 relative flex-1 sm:flex-none ${h?"text-blue-400 bg-blue-500/20 shadow-lg shadow-blue-500/25":"text-gray-400 hover:text-white"}`,title:"Settings",children:[e.jsxs("div",{className:"flex items-center justify-center sm:gap-2",children:[e.jsx($e,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"sm:hidden ml-1.5 text-xs",children:"Settings"}),h?e.jsx(Le,{className:"hidden sm:block w-4 h-4"}):e.jsx(ae,{className:"hidden sm:block w-4 h-4"})]}),h&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 sm:w-3 sm:h-3 bg-blue-500 rounded-full"})]}),e.jsxs("button",{type:"submit",disabled:!r.trim()||s,className:"glass-hover rounded-lg sm:rounded-xl px-4 sm:px-6 py-2 sm:py-4 flex items-center justify-center gap-1.5 sm:gap-2 text-white font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group flex-1 sm:flex-none",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center gap-1.5 sm:gap-2",children:[e.jsx(De,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Generate"})]})]})]})]}),h&&e.jsx("div",{className:"border-t border-white/20 bg-gray-800/30 backdrop-blur-sm",children:e.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white mb-1 sm:mb-2",children:"Generation Settings"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Customize your AI image generation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm sm:text-base text-white mb-3 sm:mb-4 font-semibold flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-400"}),"Choose Aspect Ratio"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:u.map(l=>e.jsxs("button",{type:"button",onClick:()=>d(l.value),className:`relative p-3 sm:p-4 rounded-lg sm:rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${a===l.value?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 ring-2 ring-blue-400":"glass glass-hover text-gray-300 hover:bg-white/15"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1.5 sm:mb-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl",children:l.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:l.label}),e.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:l.ratio})]})]}),e.jsx("div",{className:"text-xs opacity-75 mb-1 sm:mb-2",children:l.description}),e.jsxs("div",{className:"text-xs font-mono opacity-60",children:[l.dimensions,"px"]}),a===l.value&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})})]},l.value))})]}),e.jsx("div",{className:"glass rounded-lg sm:rounded-xl p-4 sm:p-6 bg-gradient-to-r from-green-500/10 to-blue-500/10 border border-green-500/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-base sm:text-lg font-semibold text-white mb-2",children:"ðŸŽ† Completely Free AI Generation"}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-300 mb-3 sm:mb-4",children:"Your images are generated using Pollinations AI for high-quality results:"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-gray-300",children:"Pollinations AI - Free & Unlimited"})]})]})}),e.jsxs("div",{className:"glass rounded-lg sm:rounded-xl p-3 sm:p-4 bg-gradient-to-r from-green-500/10 to-blue-500/10 border border-green-500/30",children:[e.jsx("div",{className:"text-xs sm:text-sm text-green-300 mb-2 font-medium",children:"Ready to Generate:"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-green-400"}),e.jsxs("span",{className:"text-gray-300",children:[u.find(l=>l.value===a)?.label," (",a,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-gray-300",children:"100% Free"})]})]})]})]})})]})}),e.jsxs("div",{className:"mt-4 sm:mt-6",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mb-2 sm:mb-3 text-center",children:"âœ¨ Try these creative prompts:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 justify-center",children:m.map((l,w)=>e.jsx("button",{onClick:()=>n(l),disabled:s,className:"glass glass-hover rounded-full px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm text-gray-300 transition-all duration-300 hover:text-white disabled:opacity-50",children:l},w))})]})]})});ce.displayName="PromptInput";const yt=async t=>{if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(t);return}catch{}const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.top="-9999px",s.style.left="-9999px",document.body.appendChild(s),s.focus(),s.select();try{if(!document.execCommand("copy"))throw new Error("execCommand returned false")}catch{throw new Error("Fallback copy method failed.")}finally{document.body.removeChild(s)}},vt=async(t,s,o,r)=>{try{const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch image: ${n.status}`);const a=await n.blob(),d=window.URL.createObjectURL(a),h=document.createElement("a");h.href=d,h.download=s,document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(d),o?.()}catch(n){console.error("Download error:",n);try{const a=document.createElement("a");a.href=t,a.download=s,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a),o?.()}catch(a){console.error("Fallback download error:",a),r?.(n)}}},jt=(t="1:1",s,o="jpg")=>{const r=new Date().toISOString().split("T")[0];return`ai-generated-${t}-${s}-${r}.${o}`},Nt=({image:t})=>{const[s,o]=c.useState("idle"),[r,n]=c.useState(!1),{showSuccess:a,showError:d}=A(),h=async()=>{if(r)return;n(!0);const i=jt(t.aspectRatio||"1:1",t.id);await vt(t.url,i,()=>{a("Download Started","Your image is being downloaded.")},m=>{d("Download Failed","Could not download the image. Please try again.")}),n(!1)},x=async()=>{try{await yt(t.prompt),o("success"),a("Prompt Copied!","The image prompt has been copied to your clipboard.")}catch{o("error"),d("Copy Failed","Could not copy the prompt to clipboard. Please try copying manually."),alert(`Could not copy automatically. Please copy this prompt manually:

"${t.prompt}"`)}setTimeout(()=>o("idle"),2e3)},b=i=>new Intl.RelativeTimeFormat("en",{numeric:"auto"}).format(Math.ceil((i.getTime()-Date.now())/(1e3*60)),"minute"),f=i=>{switch(i){case"16:9":return"aspect-video";case"4:3":return"aspect-[4/3]";case"1:1":default:return"aspect-square"}},g=i=>{switch(i){case"16:9":return"Landscape";case"4:3":return"Classic";case"1:1":default:return"Square"}};return t.isLoading?e.jsxs("div",{className:"glass rounded-xl overflow-hidden w-full max-w-sm mx-auto min-h-[400px] flex flex-col",children:[e.jsx("div",{className:`bg-gray-800 relative overflow-hidden flex-1 ${f(t.aspectRatio)}`,children:e.jsx("div",{className:"absolute inset-0 bg-gray-700/40"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-2/3"})]})]}):e.jsxs("div",{className:"glass rounded-xl overflow-hidden group hover:scale-105 transition-all duration-300 floating-animation w-full max-w-sm mx-auto min-h-[400px] flex flex-col",children:[e.jsxs("div",{className:"relative overflow-hidden flex-1",children:[e.jsx("img",{src:t.url,alt:t.prompt,className:`w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 ${f(t.aspectRatio)}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-3 left-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"glass rounded-lg px-2 py-1 text-xs text-white border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),e.jsx("span",{children:t.aspectRatio||"1:1"})]})})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{onClick:h,disabled:r,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${r?"opacity-50 cursor-not-allowed":"hover:text-blue-400"}`,title:r?"Downloading...":"Download image",children:r?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(Be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:x,className:`glass glass-hover rounded-full p-2 text-white transition-colors duration-300 ${s==="success"?"text-green-400":s==="error"?"text-red-400":"hover:text-green-400"}`,title:s==="success"?"Copied!":s==="error"?"Copy failed":"Copy prompt",children:s==="success"?e.jsx(Oe,{className:"w-4 h-4"}):e.jsx(Ge,{className:"w-4 h-4"})})]}),s!=="idle"&&e.jsx("div",{className:"absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:`glass rounded-lg px-3 py-1 text-sm ${s==="success"?"text-green-400 border-green-500/30":"text-red-400 border-red-500/30"}`,children:s==="success"?"Copied!":"Failed"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-gray-300 text-sm line-clamp-2 mb-3",children:t.prompt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-3 h-3"}),e.jsx("span",{children:b(t.timestamp)})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx($,{className:"w-3 h-3"}),e.jsx("span",{children:g(t.aspectRatio)})]})]})]})]})},de=c.forwardRef(({images:t},s)=>t.length===0?e.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center py-16",children:e.jsxs("div",{className:"glass rounded-2xl p-12",children:[e.jsx(He,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"No images yet"}),e.jsx("p",{className:"text-gray-500",children:"Generate your first AI image by entering a prompt above!"})]})}):e.jsxs("div",{ref:s,className:"max-w-7xl mx-auto px-3 sm:px-4",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Your Generated Images"}),e.jsxs("p",{className:"text-gray-400",children:[t.filter(o=>!o.isLoading).length," image",t.filter(o=>!o.isLoading).length!==1?"s":""," generated"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 gap-4 sm:gap-5 md:gap-6",children:t.map(o=>e.jsx(Nt,{image:o},o.id))})]}));de.displayName="ImageGrid";const St=()=>e.jsx("footer",{className:"mt-10 sm:mt-16 md:mt-20 py-6 sm:py-8 px-3 sm:px-4 border-t border-white/10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 sm:gap-6 mb-3 sm:mb-4",children:[e.jsx("a",{href:"https://github.com/dumindu2041329",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"GitHub",children:e.jsx(Ye,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx("a",{href:"https://www.linkedin.com/in/dumindu-damsara-0049ab246/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors duration-300",title:"LinkedIn",children:e.jsx(Me,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Â© ",new Date().getFullYear()," AI Image Generator. All rights reserved."]})]})}),F=()=>{const[t,s]=c.useState([]),[o,r]=c.useState(!1),{saveImage:n}=xt(),{user:a,isConfigured:d}=D(),{showSuccess:h,showError:x,showWarning:b}=A(),f=c.useRef(a),g=c.useRef(null),i=c.useRef(null);c.useEffect(()=>{f.current&&!a&&s([]),f.current=a},[a]);const m=async u=>{r(!0);const l={id:`loading_${Date.now()}`,url:"",prompt:u.prompt,timestamp:new Date,isLoading:!0,aspectRatio:u.aspectRatio||"1:1"};s(w=>[l,...w]);try{const w=await lt.generateImage(u);if(s(j=>j.map(p=>p.id===l.id?w:p)),h("Image Generated Successfully!",`Created a ${u.aspectRatio||"1:1"} image using Pollinations AI.`),setTimeout(()=>{g.current&&(g.current.style.opacity="0.7",g.current.style.transition="opacity 0.3s ease-in-out",g.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),setTimeout(()=>{g.current&&(g.current.style.opacity="1")},800))},300),d&&a)try{await n(u.prompt,w.url,u.aspectRatio||"1:1","pollinations"),h("Image Saved!","Your generated image has been saved to your history.")}catch(j){const p=j instanceof Error?j.message:"Unknown error occurred";p.includes("empty (0 bytes)")?b("Image Generation Issue","The image generation service returned an empty image. This may be a temporary issue. Please try again with a different prompt or try again later."):b("Image Generated but Not Saved",`The image was created successfully but could not be saved to your history. ${p}`)}}catch(w){w instanceof Error?x("Image Generation Failed",w.message):x("Image Generation Failed","An unexpected error occurred. Please try again."),s(j=>j.filter(p=>p.id!==l.id))}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(bt,{}),d&&a&&e.jsx("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 mb-4 sm:mb-6",children:e.jsx("div",{className:"glass rounded-xl sm:rounded-2xl p-3 sm:p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-bold",children:"âœ“"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-200 font-medium text-sm sm:text-base",children:"Authentication Active"}),e.jsx("p",{className:"text-green-300 text-xs sm:text-sm",children:"Your generated images are automatically saved to your history!"})]})]})})}),e.jsx(ce,{ref:i,onGenerate:m,isGenerating:o}),e.jsx(de,{ref:g,images:t}),e.jsx(St,{})]})]})},It=c.lazy(()=>L(()=>import("./MyImagesPage-BNeTULWS.js"),__vite__mapDeps([0,1,2,3,4,5]))),Et=c.lazy(()=>L(()=>import("./ProfilePage-CUh5nAHx.js"),__vite__mapDeps([6,1,2,3,4,5]))),kt=c.lazy(()=>L(()=>import("./AuthConfirmPage-rkYD5BTD.js"),__vite__mapDeps([7,1,2,3,4,5]))),Ct=c.lazy(()=>L(()=>import("./ResetPasswordPage-CiMlFRCq.js"),__vite__mapDeps([8,1,2,3,4,5])));function Pt(){return P.includes("YOUR_CLERK_PUBLISHABLE_KEY")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full border border-gray-700 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Clerk Configuration Required"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Please add your Clerk publishable key to the .env file to enable authentication."}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 text-left",children:e.jsx("code",{className:"text-green-400 text-sm",children:"VITE_CLERK_PUBLISHABLE_KEY=pk_test_..."})})]})}):e.jsx(Ie,{publishableKey:P,routerPush:t=>{window.history.pushState(null,"",t),window.dispatchEvent(new CustomEvent("clerk:navigate",{detail:t}))},routerReplace:t=>{window.history.replaceState(null,"",t),window.dispatchEvent(new CustomEvent("clerk:navigate",{detail:t}))},children:e.jsx(nt,{children:e.jsxs(we,{children:[e.jsxs(be,{children:[e.jsx(I,{path:"/",element:e.jsx(F,{})}),e.jsx(I,{path:"/sign-in",element:e.jsx(F,{})}),e.jsx(I,{path:"/sign-up",element:e.jsx(F,{})}),e.jsx(I,{path:"/factor-one",element:e.jsx(F,{})}),e.jsx(I,{path:"/my-images",element:e.jsx(c.Suspense,{fallback:null,children:e.jsx(It,{})})}),e.jsx(I,{path:"/profile",element:e.jsx(c.Suspense,{fallback:null,children:e.jsx(Et,{})})}),e.jsx(I,{path:"/auth/confirm",element:e.jsx(c.Suspense,{fallback:null,children:e.jsx(kt,{})})}),e.jsx(I,{path:"/reset-password",element:e.jsx(c.Suspense,{fallback:null,children:e.jsx(Ct,{})})})]}),e.jsx(it,{})]})})})}const me=document.getElementById("root");if(!me)throw new Error("Root element not found");const Rt=at.createRoot(me);Rt.render(e.jsxs(c.StrictMode,{children:[e.jsx(Pt,{}),e.jsx(st,{})]}));export{te as P,D as a,A as b,ut as c,ht as d,gt as e,mt as g,e as j,xt as u};
